/*! For license information please see virtual-anchor-sdk.js.LICENSE.txt */
(()=>{var e={2790:(e,t,i)=>{"use strict";i.d(t,{tH:()=>o,Ze:()=>s,AB:()=>a,es:()=>c,vN:()=>p,Be:()=>h,Cs:()=>u,YT:()=>d,Zh:()=>v,aq:()=>l,tq:()=>f,In:()=>g,Fs:()=>S,TN:()=>m,HQ:()=>C,kQ:()=>y,tz:()=>P,U1:()=>R,Oc:()=>w,F2:()=>E,$i:()=>T,NM:()=>I,ZP:()=>b});var r=i(3645),n=i.n(r)()((function(e){return e[1]}));n.push([e.id,'body {\n  margin: 0;\n  padding: 0;\n}\n/**\n  遮罩层\n*/\n.de-mask_3iq1B {\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.2);\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n.avatar-fixed-icon_1xzxT {\n  position: fixed;\n  z-index: 999;\n  right: 20px;\n  bottom: 40px;\n  width: 50px;\n  height: 50px;\n  line-height: 50px;\n  cursor: pointer;\n  border-radius: 50%;\n  background: #fff;\n  text-align: center;\n  box-shadow: 0 10px 20px 0 rgba(66, 91, 109, 0.3);\n  overflow: hidden;\n}\n.avatar-fixed-icon_1xzxT img {\n  width: 50px;\n  vertical-align: top;\n}\n.avatar-fixed-icon_1xzxT .de-close_11r4r {\n  right: 430px;\n}\n.preview-div_2bc89 {\n  position: fixed;\n  right: 20px;\n  bottom: 20px;\n  z-index: 999;\n  background: #fff;\n  transition: all 0.2s;\n  box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.16);\n  border-radius: 15px;\n  overflow: hidden;\n  user-select: none;\n  /* overflow: hidden; */\n}\n.preview-div_2bc89:hover .subtitle-switch_3jO1Y {\n  display: block;\n}\n.preview-bg_39X2g {\n  position: absolute;\n  z-index: 1;\n  height: 100%;\n}\n.iframe-container_2_qaM {\n  position: absolute;\n  z-index: 1000;\n}\n.preview-container_1iIrK {\n  position: absolute;\n  z-index: 3;\n}\n.preview-close_29hHu {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 1001;\n  border-radius: 50%;\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  line-height: 19px;\n}\n.preview-close_29hHu:hover {\n  background-color: #fff;\n}\n.preview-close_29hHu svg {\n  vertical-align: middle;\n  cursor: pointer;\n}\n.preview-content_1KWNP {\n  flex: 1;\n  background: #eff1f9;\n  /* overflow-y: auto; */\n  /* height: 600px; */\n  /* max-height: calc(100vh - 200px); */\n}\n.preview-video_RTYAv {\n  position: absolute !important;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100%;\n  height: 100%;\n}\n/*\n  卡片样式\n*/\n.card_2uUis {\n  width: 200px;\n  box-sizing: border-box;\n  position: absolute;\n  left: 243px;\n  bottom: 50px;\n  opacity: 1;\n  z-index: 999;\n}\n.card_2uUis .header_2jrC0 {\n  overflow: hidden;\n  width: 100%;\n  height: 80px;\n  border-radius: 3px;\n  background: rgba(255, 255, 255, 0.7);\n  padding: 5px;\n  vertical-align: text-top;\n  position: relative;\n}\n.card_2uUis .header_2jrC0 img {\n  width: 60px;\n  height: 60px;\n  margin-top: 5px;\n}\n.card_2uUis .header_2jrC0 .title_x2lSc {\n  display: inline-block;\n  width: 130px;\n  padding: 5px;\n  box-sizing: border-box;\n  position: absolute;\n  top: 5px;\n  font-size: 12px;\n}\n.card_2uUis .header_2jrC0 .url_1s-qU {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  cursor: pointer;\n}\n.card_2uUis .content_2qvZ4 {\n  width: 100%;\n  padding: 20px 5px;\n  margin: 5px 0 0 0;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 3px;\n}\n.card_2uUis .content_2qvZ4 p {\n  color: #fff;\n  width: 95%;\n  margin: auto;\n  background: rgba(0, 0, 0, 0.4);\n  font-size: 12px;\n  border-radius: 5px;\n  box-sizing: border-box;\n  padding: 5px 10px;\n  word-break: break-all;\n}\n/*\n  加载中的样式\n*/\n.load-div_Rllx1 {\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n}\n.load-div_Rllx1 span {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n}\n.load-div_Rllx1 span svg {\n  -webkit-animation: rotate_3K4le 1s linear infinite;\n  -moz-animation: rotate_3K4le 1s linear infinite;\n  -o-animation: rotate_3K4le 1s linear infinite;\n  animation: rotate_3K4le 1s linear infinite;\n}\n@-webkit-keyframes rotate_3K4le {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@-moz-keyframes rotate_3K4le {\n  from {\n    -moz-transform: rotate(0deg);\n  }\n  to {\n    -moz-transform: rotate(359deg);\n  }\n}\n@-o-keyframes rotate_3K4le {\n  from {\n    -o-transform: rotate(0deg);\n  }\n  to {\n    -o-transform: rotate(359deg);\n  }\n}\n@keyframes rotate_3K4le {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(359deg);\n  }\n}\n/**\n  字幕样式\n*/\n.subtitle_3pkpW {\n  position: absolute;\n  bottom: 10px;\n  right: 10%;\n  width: 80%;\n  height: 40px;\n  z-index: 2000;\n  text-align: center;\n  font-weight: 300;\n  color: white;\n  font-size: 20px;\n  -webkit-text-stroke: 0.8px #333333;\n}\n/**\n  字幕开关\n*/\n.subtitle-switch_3jO1Y {\n  display: none;\n  width: 100%;\n  height: 40px;\n  line-height: 40px;\n  text-align: right;\n  font-size: 16px;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.4);\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 2000;\n  padding-right: 10px;\n  box-sizing: border-box;\n  /* Rounded sliders */\n}\n.subtitle-switch_3jO1Y > span {\n  vertical-align: middle;\n  margin-right: 10px;\n  line-height: 40px;\n}\n.subtitle-switch_3jO1Y > label {\n  margin-right: 10px ;\n}\n.subtitle-switch_3jO1Y > label span {\n  cursor: pointer;\n}\n.subtitle-switch_3jO1Y > label span:hover {\n  color: #1890ff;\n}\n.subtitle-switch_3jO1Y .switch-label_iyupC {\n  position: relative;\n  display: inline-block;\n  width: 45px;\n  height: 18px;\n  vertical-align: middle;\n  margin-bottom: 0px;\n}\n.subtitle-switch_3jO1Y .switch-label_iyupC input {\n  display: none;\n}\n.subtitle-switch_3jO1Y .slider_1ea4S {\n  cursor: pointer;\n  height: 100%;\n  background-color: #ccc;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n.subtitle-switch_3jO1Y .slider_1ea4S:before {\n  position: absolute;\n  content: "";\n  height: 16px;\n  width: 16px;\n  left: 1px;\n  bottom: 1px;\n  background-color: white;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n.subtitle-switch_3jO1Y input:checked + .slider_1ea4S {\n  background-color: #1890ff;\n}\n.subtitle-switch_3jO1Y input:focus + .slider_1ea4S {\n  box-shadow: 0 0 1px #1890ff;\n}\n.subtitle-switch_3jO1Y input:checked + .slider_1ea4S:before {\n  -webkit-transform: translateX(26px);\n  -ms-transform: translateX(26px);\n  transform: translateX(26px);\n}\n.subtitle-switch_3jO1Y .slider_1ea4S.round_2FdAU {\n  border-radius: 34px;\n}\n.subtitle-switch_3jO1Y .slider_1ea4S.round_2FdAU:before {\n  border-radius: 50%;\n}\n',""]);const o="de-mask_3iq1B",s="avatar-fixed-icon_1xzxT",a="de-close_11r4r",c="preview-div_2bc89",p="subtitle-switch_3jO1Y",h="preview-bg_39X2g",u="iframe-container_2_qaM",d="preview-container_1iIrK",v="preview-close_29hHu",l="preview-content_1KWNP",f="preview-video_RTYAv",g="card_2uUis",S="header_2jrC0",m="title_x2lSc",C="url_1s-qU",y="content_2qvZ4",P="load-div_Rllx1",R="rotate_3K4le",w="subtitle_3pkpW",E="switch-label_iyupC",T="slider_1ea4S",I="round_2FdAU",b=n},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(n[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&n[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},3494:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActivityReceivedEventArgs:()=>le.v,AudioConfig:()=>o.rU,AudioInputStream:()=>a.yk,AudioOutputStream:()=>c.J4,AudioStreamFormat:()=>s.HT,AutoDetectSourceLanguageConfig:()=>_e,AutoDetectSourceLanguageResult:()=>Be,BaseAudioPlayer:()=>Ce,BotFrameworkConfig:()=>re,CancellationDetails:()=>$,CancellationDetailsBase:()=>G,CancellationErrorCode:()=>Q.E,CancellationReason:()=>p._,Connection:()=>ee.e,ConnectionEventArgs:()=>X.R,ConnectionMessage:()=>Pe.H,ConnectionMessageEventArgs:()=>ye.b,Conversation:()=>Ve,ConversationExpirationEventArgs:()=>Ye.i,ConversationParticipantsChangedEventArgs:()=>Ue,ConversationTranscriber:()=>tt,ConversationTranscriptionCanceledEventArgs:()=>mt.n,ConversationTranscriptionEventArgs:()=>w.d,ConversationTranslationCanceledEventArgs:()=>Ge.O,ConversationTranslationEventArgs:()=>He,ConversationTranslationResult:()=>Qe.M,ConversationTranslator:()=>Ze,CustomCommandsConfig:()=>ne,DialogServiceConfig:()=>ie.E,DialogServiceConnector:()=>de,IntentRecognitionCanceledEventArgs:()=>Y.v,IntentRecognitionEventArgs:()=>S.h,IntentRecognitionResult:()=>y.i,IntentRecognizer:()=>U,KeywordRecognitionModel:()=>v,LanguageUnderstandingModel:()=>P,NoMatchDetails:()=>j,NoMatchReason:()=>K,OutputFormat:()=>g.W,Participant:()=>We,ParticipantChangedReason:()=>Le,PhraseListGrammar:()=>te,ProfanityOption:()=>z.P,PronunciationAssessmentConfig:()=>Ct,PronunciationAssessmentGradingSystem:()=>ht,PronunciationAssessmentGranularity:()=>ut,PronunciationAssessmentResult:()=>yt,PropertyCollection:()=>M.O,PropertyId:()=>D.o,PullAudioInputStream:()=>a.kv,PullAudioInputStreamCallback:()=>h.W,PullAudioOutputStream:()=>c.Ao,PushAudioInputStream:()=>a.ZT,PushAudioOutputStream:()=>c.XO,PushAudioOutputStreamCallback:()=>u.y,RecognitionEventArgs:()=>f.J,RecognitionResult:()=>m.p,Recognizer:()=>B.c,ResultReason:()=>A.s,ServiceEventArgs:()=>Z.$,ServicePropertyChannel:()=>ve,SessionEventArgs:()=>l.$,SourceLanguageConfig:()=>Fe,SpeakerAudioDestination:()=>St.K,SpeakerIdentificationModel:()=>xe,SpeakerRecognitionCancellationDetails:()=>Me,SpeakerRecognitionResult:()=>De,SpeakerRecognitionResultType:()=>Oe,SpeakerRecognizer:()=>Ne,SpeakerVerificationModel:()=>ze,SpeechConfig:()=>k.c,SpeechConfigImpl:()=>k.z,SpeechRecognitionCanceledEventArgs:()=>E.n,SpeechRecognitionEventArgs:()=>w.m,SpeechRecognitionResult:()=>C.b,SpeechRecognizer:()=>F,SpeechSynthesisBookmarkEventArgs:()=>ft.i,SpeechSynthesisEventArgs:()=>vt.c,SpeechSynthesisOutputFormat:()=>L.Y,SpeechSynthesisResult:()=>dt.P,SpeechSynthesisVisemeEventArgs:()=>gt.w,SpeechSynthesisWordBoundaryEventArgs:()=>lt.G,SpeechSynthesizer:()=>ct,SpeechTranslationConfig:()=>N,SpeechTranslationConfigImpl:()=>_,TranslationRecognitionCanceledEventArgs:()=>J.j,TranslationRecognitionEventArgs:()=>T.s,TranslationRecognitionResult:()=>b.r,TranslationRecognizer:()=>W,TranslationSynthesisEventArgs:()=>I.v,TranslationSynthesisResult:()=>O.S,Translations:()=>V.Z,TurnStatusReceivedEventArgs:()=>fe.Q,User:()=>qe,VoiceProfile:()=>Re,VoiceProfileAuthorizationPhraseResult:()=>be,VoiceProfileCancellationDetails:()=>Ie,VoiceProfileClient:()=>ke,VoiceProfileEnrollmentCancellationDetails:()=>Ee,VoiceProfileEnrollmentResult:()=>we,VoiceProfileResult:()=>Te,VoiceProfileType:()=>H.f});var r=i(2605),n=i(3625),o=i(6e3),s=i(3895),a=i(309),c=i(1912),p=i(6550),h=i(4692),u=i(3946),d=i(9513);class v{constructor(){this.privDisposed=!1}static fromFile(e){throw d.a.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw d.a.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}var l=i(7841),f=i(9801),g=i(8530),S=i(2209),m=i(3260),C=i(8670),y=i(794);class P{constructor(){}static fromEndpoint(e){d.a.throwIfNull(e,"uri"),d.a.throwIfNullOrWhitespace(e.hostname,"uri");const t=new R,i=e.host.indexOf(".");if(-1===i)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,i);const r=e.pathname.lastIndexOf("/")+1;if(-1===r)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(r),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){d.a.throwIfNullOrWhitespace(e,"appId");const t=new R;return t.appId=e,t}static fromSubscription(e,t,i){d.a.throwIfNullOrWhitespace(e,"subscriptionKey"),d.a.throwIfNullOrWhitespace(t,"appId"),d.a.throwIfNullOrWhitespace(i,"region");const r=new R;return r.appId=t,r.region=i,r.subscriptionKey=e,r}}class R extends P{}var w=i(3383),E=i(2438),T=i(3062),I=i(5250),b=i(3465),O=i(5890),A=i(1048),k=i(843),x=i(2389),D=i(5453),M=i(2874),z=i(731),L=i(2356);class N extends k.c{constructor(){super()}static fromSubscription(e,t){d.a.throwIfNullOrWhitespace(e,"subscriptionKey"),d.a.throwIfNullOrWhitespace(t,"region");const i=new _;return i.properties.setProperty(D.o.SpeechServiceConnection_Key,e),i.properties.setProperty(D.o.SpeechServiceConnection_Region,t),i}static fromAuthorizationToken(e,t){d.a.throwIfNullOrWhitespace(e,"authorizationToken"),d.a.throwIfNullOrWhitespace(t,"region");const i=new _;return i.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e),i.properties.setProperty(D.o.SpeechServiceConnection_Region,t),i}static fromHost(e,t){d.a.throwIfNull(e,"hostName");const i=new _;return i.setProperty(D.o.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(D.o.SpeechServiceConnection_Key,t),i}static fromEndpoint(e,t){d.a.throwIfNull(e,"endpoint"),d.a.throwIfNull(t,"subscriptionKey");const i=new _;return i.properties.setProperty(D.o.SpeechServiceConnection_Endpoint,e.href),i.properties.setProperty(D.o.SpeechServiceConnection_Key,t),i}}class _ extends N{constructor(){super(),this.privSpeechProperties=new M.O,this.outputFormat=g.W.Simple}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){d.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(D.o[D.o.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(D.o[D.o.SpeechServiceConnection_Key])}get outputFormat(){return g.W[this.privSpeechProperties.getProperty(x.xv,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(x.xv,g.W[e])}get endpointId(){return this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){d.a.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_TranslationToLanguages,t.join(","))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(D.o[D.o.SpeechServiceConnection_TranslationVoice])}set voiceName(e){d.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_Region)}setProxy(e,t,i,r){this.setProperty(D.o[D.o.SpeechServiceConnection_ProxyHostName],e),this.setProperty(D.o[D.o.SpeechServiceConnection_ProxyPort],t),this.setProperty(D.o[D.o.SpeechServiceConnection_ProxyUserName],i),this.setProperty(D.o[D.o.SpeechServiceConnection_ProxyPassword],r)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t,i){const r=JSON.parse(this.privSpeechProperties.getProperty(x.XP,"{}"));r[e]=t,this.privSpeechProperties.setProperty(x.XP,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(D.o.SpeechServiceResponse_ProfanityOption,z.P[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(D.o.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(x.CI,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return L.Y[this.privSpeechProperties.getProperty(D.o.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(D.o.SpeechServiceConnection_SynthOutputFormat,L.Y[e])}}var B=i(4571);class F extends B.c{constructor(e,t){const i=e;d.a.throwIfNull(i,"speechConfig"),d.a.throwIfNullOrWhitespace(i.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage),D.o[D.o.SpeechServiceConnection_RecoLanguage]),super(t,i.properties,new x.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,t,i){const r=e;return t.properties.mergeTo(r.properties),new F(e,i)}get endpointId(){return d.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return d.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return d.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(x.xv,g.W[g.W.Simple])===g.W[g.W.Simple]?g.W.Simple:g.W.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(x.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(x.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,i){d.a.throwIfNull(e,"model"),i&&i("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){e&&e()}close(e,t){d.a.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i=this,r=void 0,o=function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(s,a)}c((o=o.apply(i,r||[])).next())}));var i,r,n,o}createRecognizerConfig(e){return new x.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,i,r){const n=i;return new x.SpeechServiceRecognizer(e,t,n,r,this)}}class U extends B.c{constructor(e,t){d.a.throwIfNullOrUndefined(e,"speechConfig");const i=e;d.a.throwIfNullOrUndefined(i,"speechConfig"),super(t,i.properties,new x.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=i.properties,d.a.throwIfNullOrWhitespace(this.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage),D.o[D.o.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return d.a.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(d.a.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(x.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(x.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,i){d.a.throwIfNull(e,"model"),i&&i("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){e&&e()}addIntent(e,t){d.a.throwIfDisposed(this.privDisposedIntentRecognizer),d.a.throwIfNullOrWhitespace(t,"intentId"),d.a.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,i){d.a.throwIfDisposed(this.privDisposedIntentRecognizer),d.a.throwIfNullOrWhitespace(e,"intentId"),d.a.throwIfNull(t,"model");const r=t;d.a.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privAddedLmIntents[e]=new x.AddedLmIntent(r,i)}addAllIntents(e,t){d.a.throwIfNull(e,"model");const i=e;d.a.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privUmbrellaIntent=new x.AddedLmIntent(i,t)}close(e,t){d.a.throwIfDisposed(this.privDisposedIntentRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}createRecognizerConfig(e){return new x.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,i,r){const n=i;return new x.IntentServiceRecognizer(e,t,n,r,this)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i=this,r=void 0,o=function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield t.dispose.call(this,e))},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(s,a)}c((o=o.apply(i,r||[])).next())}));var i,r,n,o}buildSpeechContext(){let e,t,i;const r=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,i=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const n of Object.keys(this.privAddedLmIntents)){const o=this.privAddedLmIntents[n];if(void 0===e)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===i)i=o.modelImpl.subscriptionKey;else if(i!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const s="luis/"+e+"-PRODUCTION#"+n;r.push(s)}return{Intent:{id:e,key:void 0===i?this.privProperties.getProperty(D.o[D.o.SpeechServiceConnection_Key]):i,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?r:["luis/"+e+"-PRODUCTION"]}}}var H=i(8345),q=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class W extends B.c{constructor(e,t){const i=e;d.a.throwIfNull(i,"speechConfig"),super(t,i.properties,new x.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.privProperties=i.properties.clone(),void 0!==this.properties.getProperty(D.o.SpeechServiceConnection_TranslationVoice,void 0)&&d.a.throwIfNullOrWhitespace(this.properties.getProperty(D.o.SpeechServiceConnection_TranslationVoice),D.o[D.o.SpeechServiceConnection_TranslationVoice]),d.a.throwIfNullOrWhitespace(this.properties.getProperty(D.o.SpeechServiceConnection_TranslationToLanguages),D.o[D.o.SpeechServiceConnection_TranslationToLanguages]),d.a.throwIfNullOrWhitespace(this.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage),D.o[D.o.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return d.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return d.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return d.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_TranslationVoice,void 0)}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){d.a.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(x.RecognitionMode.Conversation),e,t)}startContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(x.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){d.a.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}onConnection(){}onDisconnection(){return q(this,void 0,void 0,(function*(){}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return q(this,void 0,void 0,(function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield t.dispose.call(this,e)))}))}createRecognizerConfig(e){return new x.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,i,r){const n=i;return new x.TranslationServiceRecognizer(e,t,n,r,this)}}var K,V=i(649);!function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(K||(K={}));class j{constructor(e){this.privReason=e}static fromResult(e){const t=x.SimpleSpeechPhrase.fromJSON(e.json);let i=K.NotRecognized;switch(t.RecognitionStatus){case x.RecognitionStatus.BabbleTimeout:i=K.InitialBabbleTimeout;break;case x.RecognitionStatus.InitialSilenceTimeout:i=K.InitialSilenceTimeout;break;default:i=K.NotRecognized}return new j(i)}get reason(){return this.privReason}}var J=i(7762),Y=i(2821);class G{constructor(e,t,i){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}var Q=i(8563);class $ extends G{constructor(e,t,i){super(e,t,i)}static fromResult(e){let t=p._.Error,i=Q.E.NoError;if(e instanceof m.p&&e.json){const i=x.SimpleSpeechPhrase.fromJSON(e.json);t=x.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(i=Q.E[e.properties.getProperty(x.oo,Q.E[Q.E.NoError])]),new $(t,e.errorDetails,i)}}var X=i(9338),Z=i(9033),ee=i(3333);class te{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new te(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}var ie=i(4751);class re extends ie.I{constructor(){super()}static fromSubscription(e,t,i){d.a.throwIfNullOrWhitespace(e,"subscription"),d.a.throwIfNullOrWhitespace(t,"region");const r=new ie.I;return r.setProperty(D.o.Conversation_DialogType,ie.E.DialogTypes.BotFramework),r.setProperty(D.o.SpeechServiceConnection_Key,e),r.setProperty(D.o.SpeechServiceConnection_Region,t),i&&r.setProperty(D.o.Conversation_ApplicationId,i),r}static fromAuthorizationToken(e,t,i){d.a.throwIfNullOrWhitespace(e,"authorizationToken"),d.a.throwIfNullOrWhitespace(t,"region");const r=new ie.I;return r.setProperty(D.o.Conversation_DialogType,ie.E.DialogTypes.BotFramework),r.setProperty(D.o.SpeechServiceAuthorization_Token,e),r.setProperty(D.o.SpeechServiceConnection_Region,t),i&&r.setProperty(D.o.Conversation_ApplicationId,i),r}static fromHost(e,t,i){d.a.throwIfNullOrUndefined(e,"host");const r=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);d.a.throwIfNullOrUndefined(r,"resolvedHost");const n=new ie.I;return n.setProperty(D.o.Conversation_DialogType,ie.E.DialogTypes.BotFramework),n.setProperty(D.o.SpeechServiceConnection_Host,r.toString()),void 0!==t&&n.setProperty(D.o.SpeechServiceConnection_Key,t),n}static fromEndpoint(e,t){d.a.throwIfNull(e,"endpoint");const i=new ie.I;return i.setProperty(D.o.Conversation_DialogType,ie.E.DialogTypes.BotFramework),i.setProperty(D.o.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&i.setProperty(D.o.SpeechServiceConnection_Key,t),i}}class ne extends ie.I{constructor(){super()}static fromSubscription(e,t,i){d.a.throwIfNullOrWhitespace(e,"applicationId"),d.a.throwIfNullOrWhitespace(t,"subscription"),d.a.throwIfNullOrWhitespace(i,"region");const r=new ie.I;return r.setProperty(D.o.Conversation_DialogType,ie.E.DialogTypes.CustomCommands),r.setProperty(D.o.Conversation_ApplicationId,e),r.setProperty(D.o.SpeechServiceConnection_Key,t),r.setProperty(D.o.SpeechServiceConnection_Region,i),r}static fromAuthorizationToken(e,t,i){d.a.throwIfNullOrWhitespace(e,"applicationId"),d.a.throwIfNullOrWhitespace(t,"authorizationToken"),d.a.throwIfNullOrWhitespace(i,"region");const r=new ie.I;return r.setProperty(D.o.Conversation_DialogType,ie.E.DialogTypes.CustomCommands),r.setProperty(D.o.Conversation_ApplicationId,e),r.setProperty(D.o.SpeechServiceAuthorization_Token,t),r.setProperty(D.o.SpeechServiceConnection_Region,i),r}set applicationId(e){d.a.throwIfNullOrWhitespace(e,"value"),this.setProperty(D.o.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(D.o.Conversation_ApplicationId)}}var oe,se=i(4067),ae=i(92),ce=i(4257),pe=i(9906);class he extends ae._{constructor(){super(...arguments),this.create=(e,t,i)=>{const r=e.parameters.getProperty(D.o.Conversation_ApplicationId,""),n=e.parameters.getProperty(D.o.Conversation_DialogType),o=e.parameters.getProperty(D.o.SpeechServiceConnection_Region),s=e.parameters.getProperty(D.o.SpeechServiceConnection_RecoLanguage,"en-US"),a=e.parameters.getProperty(D.o.Conversation_Request_Bot_Status_Messages,"true"),c={};c[ce.S.ConnectionId]=i,c[pe.o.Format]=e.parameters.getProperty(x.xv,g.W[g.W.Simple]).toLowerCase(),c[pe.o.Language]=s,c[pe.o.RequestBotStatusMessages]=a,r&&(c[pe.o.BotId]=r,n===ie.E.DialogTypes.CustomCommands&&(c[ce.S.CustomCommandsAppId]=r));const p=n===ie.E.DialogTypes.CustomCommands?"commands/":"",h=n===ie.E.DialogTypes.CustomCommands?"v1":n===ie.E.DialogTypes.BotFramework?"v3":"v0",u={};null!=t.token&&""!==t.token&&(u[t.headerName]=t.token);let d=e.parameters.getProperty(D.o.SpeechServiceConnection_Endpoint,"");if(!d){const t=o&&o.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",i=e.parameters.getProperty(D.o.SpeechServiceConnection_Host,`wss://${o}.${he.Constants.BaseUrl}${t}`);d=`${i.endsWith("/")?i:i+"/"}${p}${he.Constants.ApiKey}/${h}`}this.setCommonUrlParams(e,c,d);const v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new se.WebsocketConnection(d,c,u,new x.WebsocketMessageFormatter,se.ProxyInfo.fromRecognizerConfig(e),v,i)}}}he.Constants=((oe=class{}).ApiKey="api",oe.BaseUrl="convai.speech",oe);var ue=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class de extends B.c{constructor(e,t){const i=e;d.a.throwIfNull(e,"dialogConfig"),super(t,i.properties,new he),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=i.properties.clone();const r=this.buildAgentConfig();this.privReco.agentConfig.set(r)}connect(e,t){(0,r.marshalPromiseToCallbacks)(this.privReco.connect(),e,t)}disconnect(e,t){(0,r.marshalPromiseToCallbacks)(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(D.o.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(D.o.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){d.a.throwIfDisposed(this.privIsDisposed);const i=(()=>ue(this,void 0,void 0,(function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const e=new r.Deferred;yield this.privReco.recognize(x.RecognitionMode.Conversation,e.resolve,e.reject);const t=yield e.promise;return yield this.implRecognizerStop(),t})))();i.catch((()=>{this.dispose(!0).catch((()=>{}))})),(0,r.marshalPromiseToCallbacks)(i.finally((()=>{this.isTurnComplete=!0})),e,t)}}sendActivityAsync(e,t,i){(0,r.marshalPromiseToCallbacks)(this.privReco.sendMessage(e),t,i)}close(e,t){d.a.throwIfDisposed(this.privIsDisposed),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return ue(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new x.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,r){const n=i;return new x.DialogServiceAdapter(e,t,n,r,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(D.o.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(D.o.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(D.o.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(D.o.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}var ve,le=i(3428),fe=i(576);!function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(ve||(ve={}));var ge=i(491),Se=i(3182),me=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Ce{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=s.HT.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,i){(0,Se.Kb)((()=>me(this,void 0,void 0,(function*(){this.ensureInitializedContext();const t=this.formatAudioData(e),i=new Float32Array(this.samples.length+t.length);i.set(this.samples,0),i.set(t,this.samples.length),this.samples=i})))(),t,i)}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval((()=>{this.updateAudioBuffer()}),e)}}createAudioContext(){this.audioContext=s.Bm.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new ge.$2("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const i=new Float32Array(e.length);for(let r=0;r<e.length;r++)i[r]=e[r]/t;return i}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),i=this.samples.length/e,r=this.audioContext.createBuffer(e,i,this.audioFormat.samplesPerSec);for(let t=0;t<e;t++){let i=t;const n=r.getChannelData(t);for(let t=0;t<this.samples.length;t++,i+=e)n[t]=this.samples[i]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=r,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=r.duration,this.samples=new Float32Array}playAudio(e){return me(this,void 0,void 0,(function*(){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),i=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,(e=>{t.buffer=e,t.connect(i),t.start(0)}))}))}}var ye=i(9342),Pe=i(8433);class Re{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}class we{constructor(e,t,i){this.privReason=e,this.privProperties=new M.O,this.privReason!==A.s.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=A.s.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(x.oo,Q.E[Q.E.ServiceError]))}static FromIdentificationProfileList(e){const t=[];for(const i of e.profiles){const e="enrolling"===i.enrollmentStatus.toLowerCase()?A.s.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?A.s.EnrolledVoiceProfile:A.s.Canceled,r=new we(e,null,null);r.privDetails=this.getIdentificationDetails(i),t.push(r)}return t}static FromVerificationProfileList(e){const t=[];for(const i of e.profiles){const e="enrolling"===i.enrollmentStatus.toLowerCase()?A.s.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?A.s.EnrolledVoiceProfile:A.s.Canceled,r=new we(e,null,null);r.privDetails=this.getVerificationDetails(i),t.push(r)}return t}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static getIdentificationDetails(e){return{audioSpeechLength:e.speechTime?parseFloat(e.speechTime):0,enrollmentStatus:e.enrollmentStatus,enrollmentsLength:e.enrollmentSpeechTime?parseFloat(e.enrollmentSpeechTime):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentSpeechLength:e.remainingEnrollmentSpeechTime?parseFloat(e.remainingEnrollmentSpeechTime):0}}static getVerificationDetails(e){return{enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentSpeechLength:e.remainingEnrollmentSpeechLength?parseFloat(e.remainingEnrollmentSpeechLength):0,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount}}}class Ee extends G{constructor(e,t,i){super(e,t,i)}static fromResult(e){const t=p._.Error;let i=Q.E.NoError;return e.properties&&(i=Q.E[e.properties.getProperty(x.oo,Q.E[Q.E.NoError])]),new Ee(t,e.errorDetails,i)}}class Te{constructor(e,t){this.privReason=e,this.privProperties=new M.O,e===A.s.Canceled&&(d.a.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(x.oo,Q.E[Q.E.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}}class Ie extends G{constructor(e,t,i){super(e,t,i)}static fromResult(e){const t=p._.Error;let i=Q.E.NoError;return e.properties&&(i=Q.E[e.properties.getProperty(x.oo,Q.E[Q.E.NoError])]),new Ie(t,e.errorDetails,i)}}class be extends Te{constructor(e,t,i){super(e,t),this.privPhrases=[],d.a.throwIfNullOrUndefined(i,"phrases array");for(const e of i)this.privPhrases.push(e.passPhrase)}get phrases(){return this.privPhrases}}var Oe,Ae=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class ke{constructor(e){const t=e;d.a.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.implClientSetup()}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}createProfileAsync(e,t,i,n){(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const i=(yield this.privAdapter.createProfile(e,t)).json();return new Re(i.profileId,e)})))(),i,n)}retrieveEnrollmentResultAsync(e,t,i){(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getProfileStatus(e);return new we(t.ok?A.s.EnrolledVoiceProfile:A.s.Canceled,t.data,t.statusText)})))(),t,i)}getAllProfilesAsync(e,t,i){(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getProfiles(e);return e===H.f.TextIndependentIdentification?we.FromIdentificationProfileList(t.json()):we.FromVerificationProfileList(t.json())})))(),t,i)}getAuthorizationPhrasesAsync(e,t,i){(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getAuthorizationPhrases(e);return new be(t.ok?A.s.EnrollingVoiceProfile:A.s.Canceled,t.statusText,t.json())})))(),t,i)}enrollProfileAsync(e,t,i,n){const o=t;d.a.throwIfNullOrUndefined(o,"audioConfig"),(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const t=yield this.privAdapter.createEnrollment(e,o);return new we(t.ok?A.s.EnrolledVoiceProfile:A.s.Canceled,t.data,t.statusText)})))(),i,n)}deleteProfileAsync(e,t,i){(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const t=yield this.privAdapter.deleteProfile(e);return this.getResult(t,A.s.DeletedVoiceProfile)})))(),t,i)}resetProfileAsync(e,t,i){(0,r.marshalPromiseToCallbacks)((()=>Ae(this,void 0,void 0,(function*(){const t=yield this.privAdapter.resetProfile(e);return this.getResult(t,A.s.ResetVoiceProfile)})))(),t,i)}close(){}implClientSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const r=new x.SpeakerRecognitionConfig(new x.Context(new x.OS(e,t,i)),this.privProperties);this.privAdapter=new x.SpeakerIdMessageAdapter(r)}getResult(e,t,i){return new Te(e.ok?t:A.s.Canceled,e.statusText)}}class xe{constructor(e){if(this.privVoiceProfiles=[],d.a.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");e.forEach((e=>{if(e.profileType!==H.f.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);this.privVoiceProfiles.push(e)}))}static fromProfiles(e){return new xe(e)}get voiceProfileIds(){return this.privVoiceProfiles.map((e=>e.profileId)).join(",")}}!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(Oe||(Oe={}));class De{constructor(e,t,i,r=A.s.RecognizedSpeaker){if(this.privProperties=new M.O,this.privReason=r,this.privReason!==A.s.Canceled)if(e===Oe.Identify){const e=JSON.parse(t);d.a.throwIfNullOrUndefined(e,"JSON"),this.privProfileId=e.identifiedProfile.profileId,this.privScore=e.identifiedProfile.score}else{const e=JSON.parse(t);d.a.throwIfNullOrUndefined(e,"JSON"),this.privScore=e.score,"accept"!==e.recognitionResult.toLowerCase()&&(this.privReason=A.s.NoMatch),void 0!==i&&""!==i&&(this.privProfileId=i)}else{const e=JSON.parse(t);d.a.throwIfNullOrUndefined(e,"JSON"),this.privErrorDetails=e.statusText,this.privProperties.setProperty(x.oo,Q.E[Q.E.ServiceError])}this.privProperties.setProperty(D.o.SpeechServiceResponse_JsonResult,t)}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}class Me extends G{constructor(e,t,i){super(e,t,i)}static fromResult(e){const t=p._.Error;let i=Q.E.NoError;return e.properties&&(i=Q.E[e.properties.getProperty(x.oo,Q.E[Q.E.NoError])]),new Me(t,e.errorDetails,i)}}class ze{constructor(e){if(d.a.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===H.f.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new ze(e)}get voiceProfile(){return this.privVoiceProfile}}var Le;class Ne{constructor(e,t){const i=e;d.a.throwIfNull(i,"speechConfig"),this.privAudioConfigImpl=t,d.a.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privProperties=i.properties.clone(),this.implSRSetup()}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t,i){if(e instanceof xe){const n=this.privAdapter.identifySpeaker(e,this.privAudioConfigImpl);(0,r.marshalPromiseToCallbacks)(this.getResult(n,Oe.Identify,void 0),t,i)}else{if(!(e instanceof ze))throw new Error("SpeakerRecognizer.recognizeOnce: Unexpected model type");{const n=this.privAdapter.verifySpeaker(e,this.privAudioConfigImpl);(0,r.marshalPromiseToCallbacks)(this.getResult(n,Oe.Verify,e.voiceProfile.profileId),t,i)}}}close(){}implSRSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const r=new x.SpeakerRecognitionConfig(new x.Context(new x.OS(e,t,i)),this.privProperties);this.privAdapter=new x.SpeakerIdMessageAdapter(r)}getResult(e,t,i){return r=this,n=void 0,s=function*(){const r=yield e;return new De(t,r.data,i,r.ok?A.s.RecognizedSpeaker:A.s.Canceled)},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(i,a)}c((s=s.apply(r,n||[])).next())}));var r,n,o,s}}class _e{constructor(){this.privProperties=new M.O}static fromOpenRange(){const e=new _e;return e.properties.setProperty(D.o.SpeechServiceConnection_AutoDetectSourceLanguages,x.y0),e}static fromLanguages(e){d.a.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new _e;return t.properties.setProperty(D.o.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new _e,i=[];return e.forEach((e=>{if(i.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const i=e.language+D.o.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(i,e.endpointId)}})),t.properties.setProperty(D.o.SpeechServiceConnection_AutoDetectSourceLanguages,i.join()),t}get properties(){return this.privProperties}}class Be{constructor(e,t){d.a.throwIfNullOrUndefined(e,"language"),d.a.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new Be(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}class Fe{constructor(e,t){d.a.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new Fe(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}class Ue extends l.${constructor(e,t,i){super(i),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}}!function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(Le||(Le={}));class He extends f.J{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}}class qe{constructor(e){this.privUserId=e}get userId(){return this.privUserId}}class We{constructor(e,t,i,r,n,o,s,a){this.privId=e,this.privAvatar=t,this.privDisplayName=i,this.privIsHost=r,this.privIsMuted=n,this.privIsUsingTts=o,this.privPreferredLanguage=s,this.privVoice=a,this.privProperties=new M.O}static From(e,t,i){return new We(e,"",e,!1,!1,!1,t,i)}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}}var Ke=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Ve{constructor(){}static createConversationAsync(e,t,i,n){if(d.a.throwIfNullOrUndefined(e,x.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),d.a.throwIfNullOrUndefined(e.region,x.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(D.o[D.o.SpeechServiceAuthorization_Token])||d.a.throwIfNullOrUndefined(e.subscriptionKey,x.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t){const o=new je(e,t);return(0,r.marshalPromiseToCallbacks)((()=>Ke(this,void 0,void 0,(function*(){})))(),i,n),o}{const r=new je(e),n=t,o=i;return r.createConversationAsync((()=>{n&&n()}),(e=>{o&&o(e)})),r}}}class je extends Ve{constructor(e,t){if(super(),this.privIsDisposed=!1,this.privIsConnected=!1,this.privErrors=x.ConversationConnectionConfig.restErrors,this.privConversationId="",this.onConnected=e=>{this.privIsConnected=!0;try{this.privConversationTranslator.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>Ke(this,void 0,void 0,(function*(){yield this.close(!1);try{this.privConversationTranslator.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}})),this.onCanceled=(e,t)=>Ke(this,void 0,void 0,(function*(){yield this.close(!1);try{this.privConversationTranslator.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(e){}})),this.onParticipantUpdateCommandReceived=(e,t)=>{var i,r;try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case x.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case x.ConversationTranslatorCommandTypes.setUseTTS:e.useTts=t.value;break;case x.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case x.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case x.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.participantsChanged)&&(null===(r=this.privConversationTranslator)||void 0===r||r.participantsChanged(this.privConversationTranslator,new Ue(Le.Updated,[this.toParticipant(e)],t.sessionId)))}}catch(t){}},this.onLockRoomCommandReceived=(e,t)=>{},this.onMuteAllCommandReceived=(e,t)=>{var i,r;try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.participantsChanged)&&(null===(r=this.privConversationTranslator)||void 0===r||r.participantsChanged(this.privConversationTranslator,new Ue(Le.Updated,this.toParticipants(!1),t.sessionId)))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{var i,r;try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.participantsChanged)&&(null===(r=this.privConversationTranslator)||void 0===r||r.participantsChanged(this.privConversationTranslator,new Ue(Le.JoinedConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{var i,r;try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.participantsChanged)&&(null===(r=this.privConversationTranslator)||void 0===r||r.participantsChanged(this.privConversationTranslator,new Ue(Le.LeftConversation,[this.toParticipant(e)],t.sessionId))))}catch(t){}},this.onTranslationReceived=(e,t)=>{var i,r,n,o,s,a;try{switch(t.command){case x.ConversationTranslatorMessageTypes.final:(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.transcribed)&&(null===(r=this.privConversationTranslator)||void 0===r||r.transcribed(this.privConversationTranslator,new He(t.payload,void 0,t.sessionId)));break;case x.ConversationTranslatorMessageTypes.partial:(null===(n=this.privConversationTranslator)||void 0===n?void 0:n.transcribing)&&(null===(o=this.privConversationTranslator)||void 0===o||o.transcribing(this.privConversationTranslator,new He(t.payload,void 0,t.sessionId)));break;case x.ConversationTranslatorMessageTypes.instantMessage:(null===(s=this.privConversationTranslator)||void 0===s?void 0:s.textMessageReceived)&&(null===(a=this.privConversationTranslator)||void 0===a||a.textMessageReceived(this.privConversationTranslator,new He(t.payload,void 0,t.sessionId)))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{var i,r,n;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.participantsChanged)&&(null===(r=this.privConversationTranslator)||void 0===r||r.participantsChanged(this.privConversationTranslator,new Ue(Le.JoinedConversation,this.toParticipants(!0),t.sessionId))),this.me.isHost){const e=null===(n=this.privConversationTranslator)||void 0===n?void 0:n.properties.getProperty(D.o.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{var i,r;try{(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.conversationExpiration)&&(null===(r=this.privConversationTranslator)||void 0===r||r.conversationExpiration(this.privConversationTranslator,t))}catch(t){}},this.privProperties=new M.O,this.privManager=new x.ConversationManager,e.getProperty(D.o[D.o.SpeechServiceConnection_RecoLanguage])||e.setProperty(D.o[D.o.SpeechServiceConnection_RecoLanguage],x.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(D.o[D.o.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage),e.getProperty(D.o[D.o.SpeechServiceResponse_ProfanityOption])||e.setProfanity(z.P.Masked);let t=e.getProperty(D.o[D.o.ConversationTranslator_Name]);(null==t||t.length<=1||t.length>50)&&(t="Host"),e.setProperty(D.o[D.o.ConversationTranslator_Name],t)}this.privConfig=e;const i=e;d.a.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new x.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}set conversationTranslator(e){this.privConversationTranslator=e}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get authorizationToken(){return this.privToken}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(i=>{i||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=i,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=x.ConversationRecognizerFactory.fromConfig(this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}addParticipantAsync(e,t,i){d.a.throwIfNullOrUndefined(e,"Participant"),(0,r.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),t,i)}joinConversationAsync(e,t,i,r,n){try{d.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),d.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),d.a.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{d.a.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,r&&r(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,n)}))}catch(e){this.handleError(e,n)}}deleteConversationAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),e,t)}deleteConversationImplAsync(){return Ke(this,void 0,void 0,(function*(){d.a.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),d.a.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endConversationAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){var i;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),null===(i=this.privConversationRecognizer)||void 0===i||i.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}muteAllParticipantsAsync(e,t){var i;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),null===(i=this.privConversationRecognizer)||void 0===i||i.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}muteParticipantAsync(e,t,i){var r;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,i)}),(e=>{this.handleError(e,i)}))}catch(e){this.handleError(e,i)}}removeParticipantAsync(e,t,i){var n;try{if(d.a.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,r.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),t,i);else{d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let r="";"string"==typeof e?r=e:e.hasOwnProperty("id")?r=e.id:e.hasOwnProperty("userId")&&(r=e.userId),d.a.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex((e=>e.id===r))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getEjectCommand(r),(()=>{this.handleCallback(t,i)}),(e=>{this.handleError(e,i)}))}}catch(e){this.handleError(e,i)}}unlockConversationAsync(e,t){var i;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),null===(i=this.privConversationRecognizer)||void 0===i||i.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}unmuteAllParticipantsAsync(e,t){var i;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),null===(i=this.privConversationRecognizer)||void 0===i||i.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}unmuteParticipantAsync(e,t,i){var r;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,i)}),(e=>{this.handleError(e,i)}))}catch(e){this.handleError(e,i)}}sendTextMessageAsync(e,t,i){var r;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),i),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,i)}),(e=>{this.handleError(e,i)}))}catch(e){this.handleError(e,i)}}changeNicknameAsync(e,t,i){var r;try{d.a.throwIfDisposed(this.privIsDisposed),d.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),d.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),d.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,i)}),(e=>{this.handleError(e,i)}))}catch(e){this.handleError(e,i)}}isDisposed(){return this.privIsDisposed}dispose(e){var t;this.isDisposed||(this.privIsDisposed=!0,null===(t=this.config)||void 0===t||t.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privConversationRecognizer=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}get transcriberRecognizer(){return this.privTranscriberRecognizer}connectTranscriberRecognizer(e){return Ke(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}))}get conversationInfo(){const e=this.conversationId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),i={};for(const e of x.ConversationConnectionConfig.transcriptionEventKeys){const t=this.properties.getProperty(e,"");""!==t&&(i[e]=t)}return{id:e,participants:t,conversationProperties:i}}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){var t,i;return Ke(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer.close(),yield null===(t=this.privTranscriberRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,null===(i=this.privConversationTranslator)||void 0===i||i.dispose()}catch(e){}e&&this.dispose()}))}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const i=e;t(i.name+": "+i.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new We(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return d.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),d.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:x.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:x.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return d.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),d.a.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:x.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:x.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return d.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),d.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:x.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:x.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return d.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),d.a.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:x.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:x.ConversationTranslatorMessageTypes.participantCommand})}getChangeNicknameCommand(e){return d.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),d.a.throwIfNullOrWhitespace(e,"nickname"),d.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:x.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:x.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return d.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),d.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),d.a.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:x.ConversationTranslatorMessageTypes.instantMessage})}}var Je,Ye=i(454),Ge=i(7469),Qe=i(6523),$e=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(Je||(Je={}));class Xe extends W{constructor(e,t,i){super(e,t),this.privSpeechState=Je.Inactive,i&&(this.privTranslator=i,this.sessionStarted=()=>{this.privSpeechState=Je.Connected},this.sessionStopped=()=>{this.privSpeechState=Je.Inactive},this.recognized=(e,t)=>$e(this,void 0,void 0,(function*(){var e;(null===(e=t.result)||void 0===e?void 0:e.errorDetails)&&(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails))})),this.canceled=(e,t)=>$e(this,void 0,void 0,(function*(){if(this.privSpeechState!==Je.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=Je.Inactive}})))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}onConnection(){this.privSpeechState=Je.Connected}onDisconnection(){return $e(this,void 0,void 0,(function*(){this.privSpeechState=Je.Inactive,yield this.cancelSpeech()}))}fireCancelEvent(e){var t,i,r;try{if(this.privTranslator.canceled){const n=new Ge.O(null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:p._.Error,null!==(i=null==e?void 0:e.errorDetails)&&void 0!==i?i:e,null!==(r=null==e?void 0:e.errorCode)&&void 0!==r?r:Q.E.RuntimeError,void 0,null==e?void 0:e.sessionId);this.privTranslator.canceled(this.privTranslator,n)}}catch(e){}}cancelSpeech(){var e;return $e(this,void 0,void 0,(function*(){try{this.stopContinuousRecognitionAsync(),yield null===(e=this.privReco)||void 0===e?void 0:e.disconnect(),this.privSpeechState=Je.Inactive}catch(e){}}))}}class Ze extends class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const i=e;t(i.name+": "+i.message)}else t(e)}}{constructor(e){super(e),this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privErrors=x.ConversationConnectionConfig.restErrors,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new M.O}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}joinConversationAsync(e,t,i,r,n){try{if("string"==typeof e){d.a.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),d.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n);let o=i;null!=o&&""!==o||(o=x.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=N.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(z.P.Masked),this.privSpeechTranslationConfig.addTargetLanguage(o),this.privSpeechTranslationConfig.setProperty(D.o[D.o.SpeechServiceConnection_RecoLanguage],o),this.privSpeechTranslationConfig.setProperty(D.o[D.o.ConversationTranslator_Name],t);const s=this.privProperties.getProperty(D.o.ConversationTranslator_Host);s&&this.privSpeechTranslationConfig.setProperty(D.o[D.o.ConversationTranslator_Host],s);const a=this.privProperties.getProperty(D.o.SpeechServiceConnection_Host);a&&this.privSpeechTranslationConfig.setProperty(D.o[D.o.SpeechServiceConnection_Host],a),this.privConversation=new je(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,o,(e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),n),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.startConversationAsync((()=>{this.handleCallback(r,n)}),(e=>{this.handleError(e,n)}))}),(e=>{this.handleError(e,n)}))}else"object"==typeof e?(d.a.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),d.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(D.o.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,d.a.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),d.a.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(i,r)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),r)}catch(e){this.handleError(e,"string"==typeof i?n:r)}}leaveConversationAsync(e,t){(0,r.marshalPromiseToCallbacks)((()=>$e(this,void 0,void 0,(function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()})))(),e,t)}sendTextMessageAsync(e,t,i){var r;try{d.a.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),d.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),null===(r=this.privConversation)||void 0===r||r.sendTextMessageAsync(e,t,i)}catch(e){this.handleError(e,i)}}startTranscribingAsync(e,t){(0,r.marshalPromiseToCallbacks)((()=>$e(this,void 0,void 0,(function*(){try{d.a.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),d.a.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),d.a.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}})))(),e,t)}stopTranscribingAsync(e,t){(0,r.marshalPromiseToCallbacks)((()=>$e(this,void 0,void 0,(function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise(((e,t)=>{var i;null===(i=this.privCTRecognizer)||void 0===i||i.stopContinuousRecognitionAsync(e,t)}))}catch(e){yield this.cancelSpeech()}})))(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,i){(0,r.marshalPromiseToCallbacks)((()=>$e(this,void 0,void 0,(function*(){var e,t;this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,null===(e=this.privSpeechTranslationConfig)||void 0===e||e.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,null===(t=this.privConversation)||void 0===t||t.dispose(),this.privConversation=void 0)})))(),t,i)}cancelSpeech(){var e;return $e(this,void 0,void 0,(function*(){try{this.privIsSpeaking=!1,yield null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onDisconnection(),this.privCTRecognizer=void 0}catch(e){}}))}connectTranslatorRecognizer(){return $e(this,void 0,void 0,(function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=o.rU.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(D.o[D.o.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(D.o[D.o.SpeechServiceConnection_Key],"");const e=encodeURIComponent(this.privConversation.room.token);let t=this.privSpeechTranslationConfig.getProperty(D.o[D.o.SpeechServiceConnection_Host],x.ConversationConnectionConfig.speechHost);t=t.replace("{region}",this.privConversation.room.cognitiveSpeechRegion);const i=`wss://${t}${x.ConversationConnectionConfig.speechPath}?${x.ConversationConnectionConfig.configParams.token}=${e}`;this.privSpeechTranslationConfig.setProperty(D.o[D.o.SpeechServiceConnection_Endpoint],i),this.privCTRecognizer=new Xe(this.privSpeechTranslationConfig,this.privAudioConfig,this)}catch(e){throw yield this.cancelSpeech(),e}}))}startContinuousRecognition(){return new Promise(((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)}))}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===Je.Connected||this.privCTRecognizer.state===Je.Connecting||this.privConversation.isMutedByHost)}}var et=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class tt{constructor(e){this.privAudioConfig=e,this.privProperties=new M.O,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}joinConversationAsync(e,t,i){const n=e;d.a.throwIfNullOrUndefined(n,"Conversation"),this.privRecognizer=new x.TranscriberRecognizer(e.config,this.privAudioConfig),d.a.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectCallbacks(this),(0,r.marshalPromiseToCallbacks)(n.connectTranscriberRecognizer(this.privRecognizer),t,i)}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return d.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(D.o.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveConversationAsync(e,t){this.privRecognizer.disconnectCallbacks(),(0,r.marshalPromiseToCallbacks)((()=>et(this,void 0,void 0,(function*(){})))(),e,t)}close(e,t){d.a.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return et(this,void 0,void 0,(function*(){this.privDisposedRecognizer||e&&(this.privDisposedRecognizer=!0)}))}}var it=i(512),rt=i(4825),nt=i(5487),ot=i(1298),st=i(5904),at=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class ct{constructor(e,t){const i=e;d.a.throwIfNull(i,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:o.rU.fromDefaultSpeakerOutput():t),this.privProperties=i.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new x.SpeechSynthesisConnectionFactory,this.synthesisRequestQueue=new r.Queue,this.implCommonSynthesizeSetup()}get authorizationToken(){return this.properties.getProperty(D.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){d.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(D.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(D.o.SpeechServiceConnection_AutoDetectSourceLanguages)===x.y0}static FromConfig(e,t,i){const r=e;return t.properties.mergeTo(r.properties),new ct(e,i)}buildSsml(e){let t=this.properties.getProperty(D.o.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(D.o.SpeechServiceConnection_SynthVoice,""),r=ct.XMLEncode(e);return this.autoDetectSourceLanguage?t="en-US":i=i||{"ar-EG":"Microsoft Server Speech Text to Speech Voice (ar-EG, Hoda)","ar-SA":"Microsoft Server Speech Text to Speech Voice (ar-SA, Naayf)","bg-BG":"Microsoft Server Speech Text to Speech Voice (bg-BG, Ivan)","ca-ES":"Microsoft Server Speech Text to Speech Voice (ca-ES, HerenaRUS)","cs-CZ":"Microsoft Server Speech Text to Speech Voice (cs-CZ, Jakub)","da-DK":"Microsoft Server Speech Text to Speech Voice (da-DK, HelleRUS)","de-AT":"Microsoft Server Speech Text to Speech Voice (de-AT, Michael)","de-CH":"Microsoft Server Speech Text to Speech Voice (de-CH, Karsten)","de-DE":"Microsoft Server Speech Text to Speech Voice (de-DE, HeddaRUS)","el-GR":"Microsoft Server Speech Text to Speech Voice (el-GR, Stefanos)","en-AU":"Microsoft Server Speech Text to Speech Voice (en-AU, HayleyRUS)","en-CA":"Microsoft Server Speech Text to Speech Voice (en-CA, HeatherRUS)","en-GB":"Microsoft Server Speech Text to Speech Voice (en-GB, HazelRUS)","en-IE":"Microsoft Server Speech Text to Speech Voice (en-IE, Sean)","en-IN":"Microsoft Server Speech Text to Speech Voice (en-IN, PriyaRUS)","en-US":"Microsoft Server Speech Text to Speech Voice (en-US, AriaRUS)","es-ES":"Microsoft Server Speech Text to Speech Voice (es-ES, HelenaRUS)","es-MX":"Microsoft Server Speech Text to Speech Voice (es-MX, HildaRUS)","fi-FI":"Microsoft Server Speech Text to Speech Voice (fi-FI, HeidiRUS)","fr-CA":"Microsoft Server Speech Text to Speech Voice (fr-CA, HarmonieRUS)","fr-CH":"Microsoft Server Speech Text to Speech Voice (fr-CH, Guillaume)","fr-FR":"Microsoft Server Speech Text to Speech Voice (fr-FR, HortenseRUS)","he-IL":"Microsoft Server Speech Text to Speech Voice (he-IL, Asaf)","hi-IN":"Microsoft Server Speech Text to Speech Voice (hi-IN, Kalpana)","hr-HR":"Microsoft Server Speech Text to Speech Voice (hr-HR, Matej)","hu-HU":"Microsoft Server Speech Text to Speech Voice (hu-HU, Szabolcs)","id-ID":"Microsoft Server Speech Text to Speech Voice (id-ID, Andika)","it-IT":"Microsoft Server Speech Text to Speech Voice (it-IT, LuciaRUS)","ja-JP":"Microsoft Server Speech Text to Speech Voice (ja-JP, HarukaRUS)","ko-KR":"Microsoft Server Speech Text to Speech Voice (ko-KR, HeamiRUS)","ms-MY":"Microsoft Server Speech Text to Speech Voice (ms-MY, Rizwan)","nb-NO":"Microsoft Server Speech Text to Speech Voice (nb-NO, HuldaRUS)","nl-NL":"Microsoft Server Speech Text to Speech Voice (nl-NL, HannaRUS)","pl-PL":"Microsoft Server Speech Text to Speech Voice (pl-PL, PaulinaRUS)","pt-BR":"Microsoft Server Speech Text to Speech Voice (pt-BR, HeloisaRUS)","pt-PT":"Microsoft Server Speech Text to Speech Voice (pt-PT, HeliaRUS)","ro-RO":"Microsoft Server Speech Text to Speech Voice (ro-RO, Andrei)","ru-RU":"Microsoft Server Speech Text to Speech Voice (ru-RU, EkaterinaRUS)","sk-SK":"Microsoft Server Speech Text to Speech Voice (sk-SK, Filip)","sl-SI":"Microsoft Server Speech Text to Speech Voice (sl-SI, Lado)","sv-SE":"Microsoft Server Speech Text to Speech Voice (sv-SE, HedvigRUS)","ta-IN":"Microsoft Server Speech Text to Speech Voice (ta-IN, Valluvar)","te-IN":"Microsoft Server Speech Text to Speech Voice (te-IN, Chitra)","th-TH":"Microsoft Server Speech Text to Speech Voice (th-TH, Pattara)","tr-TR":"Microsoft Server Speech Text to Speech Voice (tr-TR, SedaRUS)","vi-VN":"Microsoft Server Speech Text to Speech Voice (vi-VN, An)","zh-CN":"Microsoft Server Speech Text to Speech Voice (zh-CN, HuihuiRUS)","zh-HK":"Microsoft Server Speech Text to Speech Voice (zh-HK, TracyRUS)","zh-TW":"Microsoft Server Speech Text to Speech Voice (zh-TW, HanHanRUS)"}[t],i&&(r=`<voice name='${i}'>${r}</voice>`),r=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${t}'>${r}</speak>`,r}speakTextAsync(e,t,i,r){this.speakImpl(e,!1,t,i,r)}speakSsmlAsync(e,t,i,r){this.speakImpl(e,!0,t,i,r)}close(e,t){d.a.throwIfDisposed(this.privDisposed),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}dispose(e){return at(this,void 0,void 0,(function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}createSynthesizerConfig(e){return new x.SynthesizerConfig(e,this.privProperties)}createSynthesisAdapter(e,t,i,r){return new x.SynthesisAdapterBase(e,t,r,this,this.audioConfig)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const r=this.createSynthesizerConfig(new x.SpeechServiceConfig(new x.Context(new x.OS(e,t,i)))),n=this.privProperties.getProperty(D.o.SpeechServiceConnection_Key,void 0),o=n&&""!==n?new it.U(n):new rt.w((e=>{const t=this.privProperties.getProperty(D.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}),(e=>{const t=this.privProperties.getProperty(D.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}));this.privAdapter=this.createSynthesisAdapter(o,this.privConnectionFactory,this.audioConfig,r),this.privAdapter.audioOutputFormat=st.d.fromSpeechSynthesisOutputFormat(L.Y[this.properties.getProperty(D.o.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,i,r,n){try{d.a.throwIfDisposed(this.privDisposed);const o=(0,nt.Q)();let s;s=n instanceof u.y?new c.KS(n):n instanceof c.Ao?n:void 0!==n?new ot.O(n):void 0,this.synthesisRequestQueue.enqueue(new pt(o,e,t,(e=>{if(this.privSynthesizing=!1,i)try{i(e)}catch(e){r&&r(e)}i=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{r&&r(e)}),s)),this.adapterSpeak().catch((()=>{}))}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e);this.dispose(!0).catch((()=>{}))}}adapterSpeak(){return at(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}))}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class pt{constructor(e,t,i,r,n,o){this.requestId=e,this.text=t,this.isSSML=i,this.cb=r,this.err=n,this.dataStream=o}}var ht,ut,dt=i(1211),vt=i(4974),lt=i(3491),ft=i(3733),gt=i(2),St=i(9576),mt=i(6362);!function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(ht||(ht={})),function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(ut||(ut={}));class Ct{constructor(e,t=ht.FivePoint,i=ut.Phoneme,r=!1){d.a.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new M.O,this.privProperties.setProperty(D.o.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(D.o.PronunciationAssessment_GradingSystem,ht[t]),this.privProperties.setProperty(D.o.PronunciationAssessment_Granularity,ut[i]),this.privProperties.setProperty(D.o.PronunciationAssessment_EnableMiscue,String(r))}static fromJSON(e){d.a.throwIfNullOrUndefined(e,"json");const t=new Ct("");return t.privProperties=new M.O,t.properties.setProperty(D.o.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(D.o.PronunciationAssessment_Params)}applyTo(e){this.updateJson(),e.internalData.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(D.o.PronunciationAssessment_Params))}get referenceText(){return this.properties.getProperty(D.o.PronunciationAssessment_ReferenceText)}set referenceText(e){d.a.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(D.o.PronunciationAssessment_ReferenceText,e)}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(D.o.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),i=this.privProperties.getProperty(D.o.PronunciationAssessment_ReferenceText);i&&(t.referenceText=i);const r=this.privProperties.getProperty(D.o.PronunciationAssessment_GradingSystem);r&&(t.gradingSystem=r);const n=this.privProperties.getProperty(D.o.PronunciationAssessment_Granularity);n&&(t.granularity=n),t.dimension="Comprehensive";const o=this.privProperties.getProperty(D.o.PronunciationAssessment_EnableMiscue);"true"===o?t.enableMiscue=!0:"false"===o&&(t.enableMiscue=!1),this.privProperties.setProperty(D.o.PronunciationAssessment_Params,JSON.stringify(t))}}class yt{constructor(e){const t=JSON.parse(e);d.a.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){d.a.throwIfNullOrUndefined(e,"result");const t=e.properties.getProperty(D.o.SpeechServiceResponse_JsonResult);return d.a.throwIfNullOrUndefined(t,"json"),new yt(t)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment.FluencyScore}}n.z.instance.attachListener(new class{constructor(e=r.EventType.Warning){this.onEvent=e=>{if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);switch(e.eventType){case r.EventType.Debug:console.debug(t);break;case r.EventType.Info:console.info(t);break;case r.EventType.Warning:console.warn(t);break;case r.EventType.Error:console.error(t);break;default:console.log(t)}}},this.toString=e=>{const t=[""+e.EventTime,""+e.Name];for(const i in e)if(i&&e.hasOwnProperty(i)&&"eventTime"!==i&&"eventType"!==i&&"eventId"!==i&&"name"!==i&&"constructor"!==i){const r=e[i];let n="<NULL>";null!=r&&(n="number"==typeof r||"string"==typeof r?r.toString():JSON.stringify(r)),t.push(`${i}: ${n}`)}return t.join(" | ")},this.privLogLevelFilter=e}})},4067:(e,t,i)=>{"use strict";i.d(t,{MicAudioSource:()=>n.I,FileAudioSource:()=>o.z,PcmRecorder:()=>s.s,WebsocketConnection:()=>a.i,ReplayableAudioNode:()=>c.C,ProxyInfo:()=>p.i,RestMessageAdapter:()=>h.c,RestRequestType:()=>h.b,RestConfigBase:()=>u.o});var r=i(6083);i.o(r,"FileAudioSource")&&i.d(t,{FileAudioSource:function(){return r.FileAudioSource}}),i.o(r,"MicAudioSource")&&i.d(t,{MicAudioSource:function(){return r.MicAudioSource}}),i.o(r,"PcmRecorder")&&i.d(t,{PcmRecorder:function(){return r.PcmRecorder}}),i.o(r,"ProxyInfo")&&i.d(t,{ProxyInfo:function(){return r.ProxyInfo}}),i.o(r,"ReplayableAudioNode")&&i.d(t,{ReplayableAudioNode:function(){return r.ReplayableAudioNode}}),i.o(r,"RestConfigBase")&&i.d(t,{RestConfigBase:function(){return r.RestConfigBase}}),i.o(r,"RestMessageAdapter")&&i.d(t,{RestMessageAdapter:function(){return r.RestMessageAdapter}}),i.o(r,"RestRequestType")&&i.d(t,{RestRequestType:function(){return r.RestRequestType}}),i.o(r,"WebsocketConnection")&&i.d(t,{WebsocketConnection:function(){return r.WebsocketConnection}});var n=i(5599),o=i(5706),s=i(9300),a=i(1061),c=i(8673),p=i(8717),h=i(3565),u=i(5840)},5706:(e,t,i)=>{"use strict";i.d(t,{z:()=>u});var r=i(2389),n=i(6582),o=i(3625),s=i(5487),a=i(8232),c=i(2605),p=i(3895),h=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t,i){this.privStreams={},this.privHeaderEnd=44,this.turnOn=()=>{if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new n.n0(e,"")),Promise.reject(e)}this.onEvent(new n.QZ(this.privId)),this.onEvent(new n.Jl(this.privId))},this.id=()=>this.privId,this.attach=e=>h(this,void 0,void 0,(function*(){this.onEvent(new n.i5(this.privId,e));const t=yield this.upload(e);return this.onEvent(new n.sQ(this.privId,e)),Promise.resolve({detach:()=>h(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new n.He(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})})),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new n.He(this.privId,e)))},this.turnOff=()=>{for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new n.ls(this.privId)),Promise.resolve()},this.onEvent=e=>{this.privEvents.onEvent(e),o.z.instance.onEvent(e)},this.privId=i||(0,s.Q)(),this.privEvents=new a.n,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}get blob(){return Promise.resolve(this.privSource)}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:r.type.File})))}readHeader(){const e=this.privSource.slice(0,512),t=new c.Deferred,i=e=>{const i=new DataView(e),r=e=>String.fromCharCode(i.getUint8(e),i.getUint8(e+1),i.getUint8(e+2),i.getUint8(e+3));if("RIFF"!==r(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==r(8)||"fmt "!==r(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const n=i.getInt32(16,!0),o=i.getUint16(22,!0),s=i.getUint32(24,!0),a=i.getUint16(34,!0);let c=36+Math.max(n-16,0);for(;"data"!==r(c);c+=2)if(c>504)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,t.resolve(p.HT.getWaveFormatPCM(s,a,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;i(t)},t.readAsArrayBuffer(e)}else{const t=e;i(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}upload(e){return h(this,void 0,void 0,(function*(){const t=t=>{const i=`Error occurred while processing '${this.privFilename}'. ${t}`;throw this.onEvent(new n.hA(this.privId,e,i)),new Error(i)};try{yield this.turnOn();const i=yield this.privAudioFormatPromise,r=new c.ChunkedArrayBufferStream(i.avgBytesPerSec/10,e);this.privStreams[e]=r;const n=this.privSource.slice(this.privHeaderEnd),o=e=>{r.isClosed||(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),r.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&n instanceof Blob){const e=new FileReader;e.onerror=e=>{t(e.toString())},e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(n)}else{const e=n;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return r}catch(e){t(e)}}))}}},6083:()=>{},5599:(e,t,i)=>{"use strict";i.d(t,{I:()=>u});var r=i(2389),n=i(2605),o=i(6582),s=i(3625),a=i(5487),c=i(8232),p=i(3895),h=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t,i,r){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.turnOn=()=>{if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(e){if(e instanceof Error){const t=e;this.privInitializeDeferral.reject(t.name+": "+t.message)}else this.privInitializeDeferral.reject(e);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,i,r)=>{e.mediaDevices.getUserMedia(t).then(i).catch(r)}),t){const e=()=>{this.onEvent(new o.QZ(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new o.Jl(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new o.Jl(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t="Error occurred during microphone initialization: "+e;this.privInitializeDeferral.reject(t),this.onEvent(new o.n0(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: "+e)})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new o.n0(e,""))}return this.privInitializeDeferral.promise},this.id=()=>this.privId,this.attach=e=>(this.onEvent(new o.i5(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new o.sQ(this.privId,e)),{detach:()=>h(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new o.He(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()})))),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new o.He(this.privId,e)))},this.listen=e=>h(this,void 0,void 0,(function*(){yield this.turnOn();const t=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new o.hA(this.privId,e,t)),t}return t})),this.onEvent=e=>{this.privEvents.onEvent(e),s.z.instance.onEvent(e)},this.createAudioContext=()=>{this.privContext||(this.privContext=p.Bm.getAudioContext(u.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=u.AUDIOFORMAT.avgBytesPerSec/10,this.privId=i||(0,a.Q)(),this.privEvents=new c.n,this.privMediaStream=r||null}get format(){return Promise.resolve(u.AUDIOFORMAT)}get blob(){return Promise.reject("Not implemented for Mic input")}turnOff(){return h(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new o.ls(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:u.AUDIOFORMAT.bitsPerSample,channelcount:u.AUDIOFORMAT.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:u.AUDIOFORMAT.samplesPerSec,type:r.type.Microphones})))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const i=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const i of e)if(i.deviceId===t){this.privMicrophoneLabel=i.label;break}i.resolve(this.privMicrophoneLabel)}),(()=>i.resolve(this.privMicrophoneLabel))),i.promise}destroyAudioContext(){return h(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?(yield this.privContext.close(),this.privContext=null):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}u.AUDIOFORMAT=p.HT.getDefaultInputFormat()},9300:(e,t,i)=>{"use strict";i.d(t,{s:()=>n});var r=i(2605);class n{constructor(){this.record=(e,t,i)=>{const n=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(i){t=2048;let r=e.sampleRate;for(;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}})(),o=new r.RiffPcmEncoder(e.sampleRate,16e3);let s=!0;n.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(i&&!i.isClosed){const e=o.encode(t);e&&(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),s=!1)}};const a=e.createMediaStreamSource(t);this.privSpeechProcessorScript&&e.audioWorklet?e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const r=new AudioWorkletNode(e,"speech-processor");r.port.onmessage=e=>{const t=e.data;if(i&&!i.isClosed){const e=o.encode(t);e&&(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),s=!1)}},a.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:a,stream:t}})).catch((()=>{a.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:a,stream:t}})):(a.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:a,stream:t})},this.releaseMediaResources=e=>{this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}}setWorkletUrl(e){this.privSpeechProcessorScript=e}}},8717:(e,t,i)=>{"use strict";i.d(t,{i:()=>n});var r=i(5453);class n{constructor(e,t,i,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=i,this.privProxyPassword=r}static fromParameters(e){return new n(e.getProperty(r.o.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(r.o.SpeechServiceConnection_ProxyPort),10),e.getProperty(r.o.SpeechServiceConnection_ProxyUserName),e.getProperty(r.o.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}},8673:(e,t,i)=>{"use strict";i.d(t,{C:()=>r});class r{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=()=>this.privAudioNode.id(),this.privAudioNode=e,this.privBytesPerSecond=t}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let i=0;for(;i<this.privBuffers.length&&t>=this.privBuffers[i].chunk.buffer.byteLength;)t-=this.privBuffers[i++].chunk.buffer.byteLength;if(i<this.privBuffers.length){const e=this.privBuffers[i].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,i===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[i].chunk.timeReceived})}}return this.privAudioNode.read().then((e=>(e&&e.buffer&&(this.privBuffers.push(new n(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let i=Math.round(t*this.privBytesPerSecond*1e-7),r=0;for(;r<this.privBuffers.length&&i>=this.privBuffers[r].chunk.buffer.byteLength;)i-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-i/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const i=t.byteOffset/this.privBytesPerSecond*1e7,r=i+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=r)return t.chunk.timeReceived}return 0}}class n{constructor(e,t,i){this.chunk=e,this.serial=t,this.byteOffset=i}}},5840:(e,t,i)=>{"use strict";i.d(t,{o:()=>r});class r{static get requestOptions(){return r.privDefaultRequestOptions}static get configParams(){return r.privDefaultParams}static get restErrors(){return r.privRestErrors}}r.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},r.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},r.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},3565:(e,t,i)=>{"use strict";i.d(t,{b:()=>r,c:()=>a});var r,n=i(491),o=i(2605),s=i(1063);!function(e){e.Get="get",e.Post="post",e.Delete="delete",e.File="file"}(r||(r={}));class a{constructor(e,t){if(!e)throw new n.Do("configParams");this.privHeaders=e.headers,this.privTimeout=e.timeout,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,i={},n=null,a=null){const c=new o.Deferred;let p;p="undefined"==typeof XMLHttpRequest?new s.XMLHttpRequest:new XMLHttpRequest;const h=e===r.File?"post":e;return p.open(h,this.withQuery(t,i),!0),this.privHeaders&&Object.keys(this.privHeaders).forEach((e=>p.setRequestHeader(e,this.privHeaders[e]))),this.privIgnoreCache&&p.setRequestHeader("Cache-Control","no-cache"),p.timeout=this.privTimeout,p.onload=()=>{c.resolve(this.parseXHRResult(p))},p.onerror=()=>{c.resolve(this.errorResponse(p,"Failed to make request."))},p.ontimeout=()=>{c.resolve(this.errorResponse(p,"Request took longer than expected."))},e===r.File&&a?(p.setRequestHeader("Content-Type","multipart/form-data"),p.send(a)):e===r.Post&&n?(p.setRequestHeader("Content-Type","application/json"),p.send(JSON.stringify(n))):p.send(),c.promise}parseXHRResult(e){return{data:e.responseText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(e.responseText),ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText}}errorResponse(e,t=null){return{data:t||e.statusText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(t||'"'+e.statusText+'"'),ok:!1,status:e.status,statusText:e.statusText}}withQuery(e,t={}){const i=this.queryParams(t);return i?e+(-1===e.indexOf("?")?"?":"&")+i:e}queryParams(e={}){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}}},1061:(e,t,i)=>{"use strict";i.d(t,{i:()=>k});var r=i(491),n=i(5487),o=i(4257),s=i(2605),a=i(3625);class c{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}var p=i(1945),h=i(6645),u=i(8232),d=i(418),v=i.n(d),l=i(7928),f=i(4564),g=i.n(f),S=i(3959),m=i(4024),C=i.n(m),y=i(5711),P=i.n(y),R=i(1578),w=i.n(R),E=i(7694),T=i(3451),I=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class b{constructor(e){e&&(this.privProxyInfo=e),b.privDiskCache||(b.privDiskCache=new(P())("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:"undefined"!=typeof process&&process.env.SPEECH_OCSP_CACHE_ROOT?process.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}static forceReinitDiskCache(){b.privDiskCache=void 0,b.privMemCache={}}GetAgent(e){const t=new(C().Agent)(this.CreateConnection);return void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0&&(t.privProxyInfo=this.privProxyInfo),t}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(e.UserName+":"+(void 0===e.Password)?"":e.Password).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new(w())(t)}static OCSPCheck(e,t){return I(this,void 0,void 0,(function*(){let i,r,n=!1;const o=yield e;o.cork();const a=o;return new Promise(((e,c)=>{o.on("OCSPResponse",(e=>{e&&(this.onEvent(new s.OCSPStapleReceivedEvent),r=e)})),o.on("error",(e=>{n||(n=!0,o.destroy(),c(e))})),a.on("secure",(()=>I(this,void 0,void 0,(function*(){const s=a.getPeerCertificate(!0);try{const a=yield this.GetIssuer(s);i=S.request.generate(s.raw,a.raw);const c=i.id.toString("hex");if(!r){const e=yield b.GetResponseFromCache(c,i,t);r=e}yield this.VerifyOCSPResponse(r,i,t),o.uncork(),n=!0,e(o)}catch(e){o.destroy(),n=!0,c(e)}}))))}))}))}static GetIssuer(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise(((t,i)=>{new S.Agent({}).fetchIssuer(e,null,((e,r)=>{e?i(e):t(r)}))}))}static GetResponseFromCache(e,t,i){return I(this,void 0,void 0,(function*(){let r=b.privMemCache[e];if(r&&this.onEvent(new s.OCSPMemoryCacheHitEvent(e)),!r)try{const t=yield b.privDiskCache.get(e);t.isCached&&(b.onEvent(new s.OCSPDiskCacheHitEvent(e)),b.StoreMemoryCacheEntry(e,t.value),r=t.value)}catch(e){r=null}if(!r)return r;try{const n=S.utils.parseResponse(r).value.tbsResponseData;if(n.responses.length<1)return void this.onEvent(new s.OCSPCacheFetchErrorEvent(e,"Not enough data in cached response"));const o=n.responses[0].thisUpdate,a=n.responses[0].nextUpdate;if(a<Date.now()+this.testTimeOffset-6e4)this.onEvent(new s.OCSPCacheEntryExpiredEvent(e,a)),r=null;else{const r=Math.min(864e5,(a-o)/2);a-(Date.now()+this.testTimeOffset)<r?(this.onEvent(new s.OCSPCacheEntryNeedsRefreshEvent(e,o,a)),this.UpdateCache(t,i).catch((t=>{this.onEvent(new T.ut(e,t.toString()))}))):this.onEvent(new s.OCSPCacheHitEvent(e,o,a))}}catch(t){this.onEvent(new s.OCSPCacheFetchErrorEvent(e,t)),r=null}return r||this.onEvent(new s.OCSPCacheMissEvent(e)),r}))}static VerifyOCSPResponse(e,t,i){return I(this,void 0,void 0,(function*(){let r=e;return t.certID.toString("hex"),r||(r=yield b.GetOCSPResponse(t,i)),new Promise(((n,o)=>{S.verify({request:t,response:r},((a,c)=>{a?(b.onEvent(new s.OCSPVerificationFailedEvent(t.id.toString("hex"),a)),e?this.VerifyOCSPResponse(null,t,i).then((()=>{n()}),(e=>{o(e)})):o(a)):(e||b.StoreCacheEntry(t.id.toString("hex"),r),n())}))}))}))}static UpdateCache(e,t){return I(this,void 0,void 0,(function*(){const i=e.id.toString("hex");this.onEvent(new s.OCSPCacheUpdateNeededEvent(i));const r=yield this.GetOCSPResponse(e,t);this.StoreCacheEntry(i,r),this.onEvent(new s.OCSPCacheUpdatehCompleteEvent(e.id.toString("hex")))}))}static StoreCacheEntry(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}static StoreMemoryCacheEntry(e,t){this.privMemCache[e]=t,this.onEvent(new s.OCSPMemoryCacheStoreEvent(e))}static StoreDiskCacheEntry(e,t){this.privDiskCache.set(e,t).then((()=>{this.onEvent(new s.OCSPDiskCacheStoreEvent(e))}))}static GetOCSPResponse(e,t){let i={};if(t){const e=b.GetProxyAgent(t);i.agent=e}return new Promise(((t,r)=>{S.utils.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",((n,o)=>{if(n)return void r(n);const a=g()(o);a.path=a.pathname,i=Object.assign(Object.assign({},i),a),S.utils.getResponse(i,e.data,((i,n)=>{i?r(i):(this.onEvent(new s.OCSPResponseRetrievedEvent(e.certID.toString("hex"))),t(n))}))}))}))}CreateConnection(e,t){const i="undefined"!=typeof process&&"0"!==process.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==process.env.SPEECH_CONDUCT_OCSP_CHECK&&t.secureEndpoint;let r;if(t=Object.assign(Object.assign({},t),{requestOCSP:!b.forceDisableOCSPStapling,servername:t.host}),this.privProxyInfo){const i=b.GetProxyAgent(this.privProxyInfo);r=new Promise(((r,n)=>{i.callback(e,t,((e,t)=>{e?n(e):r(t)}))}))}else r=t.secureEndpoint?Promise.resolve(l.connect(t)):Promise.resolve(E.connect(t));return i?b.OCSPCheck(r,this.privProxyInfo):r}}b.testTimeOffset=0,b.forceDisableOCSPStapling=!1,b.privMemCache={},b.onEvent=e=>{a.z.instance.onEvent(e)};var O=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class A{constructor(e,t,i,n,d,l){if(this.open=()=>{if(this.privConnectionState===s.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new s.Deferred,this.privCertificateValidatedDeferral=new s.Deferred,this.privConnectionState=s.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||A.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve();const t=new b(this.proxyInfo);e.agent=t.GetAgent(),this.privWebsocketClient=new(v())(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new s.Queue,this.privDisconnectDeferral=new s.Deferred,this.privSendMessageQueue=new s.Queue,this.processSendQueue().catch((e=>{a.z.instance.onEvent(new s.BackgroundEvent(e))}))}catch(e){return this.privConnectionEstablishDeferral.resolve(new c(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new p.YF(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=e=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=s.ConnectionState.Connected,this.onEvent(new p.Zk(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new c(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new p.K4(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===s.ConnectionState.Connecting?(this.privConnectionState=s.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new c(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=s.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new p.PE(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{a.z.instance.onEvent(new s.BackgroundEvent(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===s.ConnectionState.Connected){const i=new s.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(i.promise),e.data instanceof ArrayBuffer){const r=new s.RawWebsocketMessage(h.C.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then((e=>{this.onEvent(new p.Qz(this.privConnectionId,t,e)),i.resolve(e)}),(e=>{i.reject("Invalid binary message format. Error: "+e)}))}else{const r=new s.RawWebsocketMessage(h.C.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then((e=>{this.onEvent(new p.Qz(this.privConnectionId,t,e)),i.resolve(e)}),(e=>{i.reject("Invalid text message format. Error: "+e)}))}}},this.privConnectionEstablishDeferral.promise},this.send=e=>{if(this.privConnectionState!==s.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${s.ConnectionState[this.privConnectionState]} state`);const t=new s.Deferred,i=new s.Deferred;return this.privSendMessageQueue.enqueueFromPromise(i.promise),this.privMessageFormatter.fromConnectionMessage(e).then((r=>{i.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})}),(e=>{i.reject("Error formatting the message. "+e)})),t.promise},this.read=()=>this.privConnectionState!==s.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue(),this.close=e=>this.privWebsocketClient?(this.privConnectionState!==s.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve(),this.sendRawMessage=e=>{try{return e?(this.onEvent(new p.w2(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject("websocket send error: "+e)}},this.onEvent=e=>{this.privConnectionEvents.onEvent(e),a.z.instance.onEvent(e)},!e)throw new r.Do("uri");if(!i)throw new r.Do("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new u.n,this.privConnectionId=t,this.privMessageFormatter=i,this.privConnectionState=s.ConnectionState.None,this.privUri=e,this.privHeaders=d,this.privEnableCompression=l,this.privHeaders[o.S.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}get events(){return this.privConnectionEvents}onClose(e,t){return O(this,void 0,void 0,(function*(){const i=`Connection closed. ${e}: ${t}`;this.privConnectionState=s.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose((e=>{}),i),yield this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(i)}),i)}))}processSendQueue(){return O(this,void 0,void 0,(function*(){for(;;){const e=this.privSendMessageQueue.dequeue(),t=yield e;if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}}}))}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}A.forceNpmWebSocket=!1;class k{constructor(e,t,i,o,s,a=!1,c){if(this.privIsDisposed=!1,this.isDisposed=()=>this.privIsDisposed,this.state=()=>this.privConnectionMessageAdapter.state,this.open=()=>this.privConnectionMessageAdapter.open(),this.send=e=>this.privConnectionMessageAdapter.send(e),this.read=()=>this.privConnectionMessageAdapter.read(),!e)throw new r.Do("uri");if(!o)throw new r.Do("messageFormatter");this.privMessageFormatter=o;let p="",h=0;if(t)for(const i in t)i&&(p+=0===h&&-1===e.indexOf("?")?"?":"&",p+=`${i}=${encodeURIComponent(t[i])}`,h++);if(i)for(const t in i)t&&(p+=0===h&&-1===e.indexOf("?")?"?":"&",p+=`${t}=${encodeURIComponent(i[t])}`,h++);this.privUri=e+p,this.privId=c||(0,n.Q)(),this.privConnectionMessageAdapter=new A(this.privUri,this.id,this.privMessageFormatter,s,i,a)}dispose(){return e=this,t=void 0,r=function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())},new((i=void 0)||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,i,r}get id(){return this.privId}get events(){return this.privConnectionMessageAdapter.events}}},358:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});class r{constructor(e,t){this.modelImpl=e,this.intentName=t}}},2802:(e,t,i)=>{"use strict";i.d(t,{H:()=>r});class r{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},512:(e,t,i)=>{"use strict";i.d(t,{U:()=>s});var r=i(491),n=i(4257),o=i(7410);class s{constructor(e){if(this.fetch=e=>Promise.resolve(this.privAuthInfo),this.fetchOnExpiry=e=>Promise.resolve(this.privAuthInfo),!e)throw new r.Do("subscriptionKey");this.privAuthInfo=new o.G(n.S.AuthKey,e)}}},4825:(e,t,i)=>{"use strict";i.d(t,{w:()=>s});var r=i(491),n=i(7410);const o="Authorization";class s{constructor(e,t){if(this.fetch=e=>this.privFetchCallback(e).then((e=>new n.G(o,e))),this.fetchOnExpiry=e=>this.privFetchOnExpiryCallback(e).then((e=>new n.G(o,e))),!e)throw new r.Do("fetchCallback");if(!t)throw new r.Do("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}}},92:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var r=i(2389),n=i(5453),o=i(9906);class s{setCommonUrlParams(e,t,i){this.setUrlParameter(n.o.SpeechServiceConnection_EnableAudioLogging,o.o.EnableAudioLogging,e,t,i),this.setUrlParameter(n.o.SpeechServiceResponse_RequestWordLevelTimestamps,o.o.EnableWordLevelTimestamps,e,t,i),this.setUrlParameter(n.o.SpeechServiceResponse_ProfanityOption,o.o.Profanity,e,t,i),this.setUrlParameter(n.o.SpeechServiceConnection_InitialSilenceTimeoutMs,o.o.InitialSilenceTimeoutMs,e,t,i),this.setUrlParameter(n.o.SpeechServiceConnection_EndSilenceTimeoutMs,o.o.EndSilenceTimeoutMs,e,t,i),this.setUrlParameter(n.o.SpeechServiceResponse_StablePartialResultThreshold,o.o.StableIntermediateThreshold,e,t,i);const s=JSON.parse(e.parameters.getProperty(r.XP,"{}"));Object.keys(s).forEach(((e,i,r)=>{t[e]=s[e]}))}setUrlParameter(e,t,i,r,n){const o=i.parameters.getProperty(e,void 0);!o||n&&-1!==n.search(t)||(r[t]=o.toLocaleLowerCase())}}},7006:(e,t,i)=>{"use strict";i.d(t,{C:()=>N});var r=i(4067),n=i(4300);class o extends n.A{constructor(e,t=n.t.Info){super(e,t)}}class s extends o{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}var a,c=i(2605),p=i(6645),h=i(5487),u=i(3625),d=i(8232),v=i(1945),l=i(5904),f=i(5453),g=i(4751),S=i(3428),m=i(576),C=i(6550),y=i(8563),P=i(2874),R=i(8670),w=i(1048),E=i(3383),T=i(2438),I=i(7841),b=i(9801),O=i(491),A=i(1912);class k{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new k(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}!function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(a||(a={}));class x{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===a.TextToSpeechAudio&&(this.privAudioStream=A.J4.createPullStream(),this.privAudioStream.format=void 0!==t?t:l.d.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((()=>{this.privTurnManager.CompleteTurn(this.privRequestId)}),2e3)}}class D{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new O.$2("Service error: There is already a turn with id:"+e);const t=new x(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new O.$2("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}var M=i(2389),z=i(3504),L=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class N extends M.ServiceRecognizerBase{constructor(e,t,i,r,n){super(e,t,i,r,n),this.sendAgentConfig=e=>{if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(f.o.Conversation_DialogType)===g.E.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(f.o.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new s(this.agentConfig));const t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new z.r(p.C.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}},this.sendAgentContext=e=>{const t=(0,h.c)(),i=this.privDialogServiceConnector.properties.getProperty(f.o.Conversation_Speech_Activity_Template),r={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof i?void 0:i,version:.5},n=JSON.stringify(r);return e.send(new z.r(p.C.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",n))},this.handleResponseMessage=e=>{const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const i=e.requestId.toUpperCase(),r=k.fromJSON(e.textBody),n=this.privTurnStateManager.GetTurn(i);if(r.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=r.conversationId,this.agentConfig.set(e)}const o=n.processActivityPayload(r,l.d.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(f.o.SpeechServiceConnection_SynthOutputFormat,void 0))),s=new S.v(r.messagePayload,o);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,s)}catch(e){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new m.Q(e.textBody))}catch(e){}break;default:u.z.instance.onEvent(new c.BackgroundEvent(`Unexpected response of type ${t.messageType}. Ignoring.`))}},this.privEvents=new d.n,this.privDialogServiceConnector=n,this.receiveMessageOverride=this.receiveDialogMessageOverride,this.privTurnStateManager=new D,this.recognizeOverride=this.listenOnce,this.postConnectImplOverride=this.dialogConnectImpl,this.configConnectionOverride=this.configConnection,this.disconnectOverride=this.privDisconnect,this.privDialogAudioSource=i,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach((e=>L(this,void 0,void 0,(function*(){"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)}))))}sendMessage(e){return L(this,void 0,void 0,(function*(){const t=(0,h.c)(),i=(0,h.Q)(),r={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},n=JSON.stringify(r),o=yield this.fetchConnection();yield o.send(new z.r(p.C.Text,"agent",i,"application/json",n))}))}privDisconnect(){return L(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,C._.Error,y.E.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}))}processTypeSpecificMessages(e){return L(this,void 0,void 0,(function*(){const t=new P.O;let i,r;switch(e.messageType===p.C.Text&&t.setProperty(f.o.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const n=M.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus!==M.RecognitionStatus.TooManyRequests&&n.RecognitionStatus!==M.RecognitionStatus.Error){const e=this.fireEventForResult(n,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(e){}}r=!0;break;case"speech.hypothesis":const o=M.SpeechHypothesis.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;i=new R.b(this.privRequestSession.requestId,w.s.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(s);const a=new E.m(i,o.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,a)}catch(e){}r=!0;break;case"speech.keyword":const c=M.SpeechKeyword.fromJSON(e.textBody);i=new R.b(this.privRequestSession.requestId,"Accepted"===c.Status?w.s.RecognizedKeyword:w.s.NoMatch,c.Text,c.Duration,c.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==c.Status&&(this.privLastResult=i);const p=new E.m(i,i.duration,i.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,p)}catch(e){}r=!0;break;case"audio":{const t=e.requestId.toUpperCase(),i=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?i.audioStream.write(e.binaryBody):i.endAudioStream()}catch(e){}}r=!0;break;case"response":this.handleResponseMessage(e),r=!0}return r}))}cancelRecognition(e,t,i,r,n){return L(this,void 0,void 0,(function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const t=new P.O;t.setProperty(M.oo,y.E[r]);const o=new T.n(i,n,r,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o)}catch(e){}if(this.privSuccessCallback){const e=new R.b(void 0,w.s.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,n,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}))}listenOnce(e,t,i){return L(this,void 0,void 0,(function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(f.o.Speech_SessionId,this.privRequestSession.sessionId);const n=this.connectImpl(),o=this.sendPreAudioMessages(),s=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,p=new r.ReplayableAudioNode(s,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield n,yield o}catch(e){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,C._.Error,y.E.ConnectionFailure,e),Promise.resolve()}const h=new I.$(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,h),this.sendAudio(p).then((()=>{}),(e=>L(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,C._.Error,y.E.RuntimeError,e)}))))}))}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new c.Deferred,t=()=>L(this,void 0,void 0,(function*(){try{const i=this.isDisposed(),r=!this.isDisposed()&&this.terminateMessageLoop;if(i||r)return void e.resolve(void 0);const n=yield this.fetchConnection(),o=yield n.read();if(!o)return t();const s=z.r.fromConnectionMessage(o);switch(s.path.toLowerCase()){case"turn.start":{const e=s.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=M.SpeechDetected.fromJSON(s.textBody),t=new b.J(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let i;i=s.textBody.length>0?s.textBody:"{ Offset: 0 }";const r=M.SpeechDetected.fromJSON(i);this.privRequestSession.onServiceRecognized(r.Offset+this.privRequestSession.currentTurnAudioOffset);const n=new b.J(r.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,n);break;case"turn.end":{const e=s.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new I.$(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:this.processTypeSpecificMessages(s)||this.serviceEvents&&this.serviceEvents.onEvent(new v.e2(s.path.toLowerCase(),s.textBody))}return t()}catch(t){this.terminateMessageLoop=!0,e.resolve()}}));return t().catch((e=>{u.z.instance.onEvent(new c.BackgroundEvent(e))})),e.promise}startMessageLoop(){return L(this,void 0,void 0,(function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,C._.Error,y.E.RuntimeError,e)}return Promise.resolve()}))}configConnection(e){return L(this,void 0,void 0,(function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)}))}sendPreAudioMessages(){return L(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)}))}fireEventForResult(e,t){const i=M.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),r=e.Offset+this.privRequestSession.currentTurnAudioOffset,n=new R.b(this.privRequestSession.requestId,i,e.DisplayText,e.Duration,r,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new E.m(n,r,this.privRequestSession.sessionId)}onEvent(e){this.privEvents.onEvent(e),u.z.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),i=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),r=e.split(";"),n=void 0===t?[]:t.split(";"),o=void 0===i?[]:i.split(";"),s=[];for(let e=0;e<r.length;e++){const t={};t.text=r[e],e<n.length&&(t.offset=Number(n[e])),e<o.length&&(t.duration=Number(o[e])),s.push(t)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}},5374:(e,t,i)=>{"use strict";i.d(t,{u:()=>r});class r{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(((e,i,r)=>{t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}},8750:()=>{},1054:(e,t,i)=>{"use strict";i.d(t,{o:()=>a});var r=i(1048),n=i(6550),o=i(8563),s=i(2389);class a{static implTranslateRecognitionResult(e){let t=r.s.Canceled;switch(e){case s.RecognitionStatus.Success:t=r.s.RecognizedSpeech;break;case s.RecognitionStatus.NoMatch:case s.RecognitionStatus.InitialSilenceTimeout:case s.RecognitionStatus.BabbleTimeout:case s.RecognitionStatus.EndOfDictation:t=r.s.NoMatch;break;case s.RecognitionStatus.Error:default:t=r.s.Canceled}return t}static implTranslateCancelResult(e){let t=n._.EndOfStream;switch(e){case s.RecognitionStatus.Success:case s.RecognitionStatus.EndOfDictation:case s.RecognitionStatus.NoMatch:t=n._.EndOfStream;break;case s.RecognitionStatus.InitialSilenceTimeout:case s.RecognitionStatus.BabbleTimeout:case s.RecognitionStatus.Error:default:t=n._.Error}return t}static implTranslateCancelErrorCode(e){let t=o.E.NoError;switch(e){case s.RecognitionStatus.Error:t=o.E.ServiceError;break;case s.RecognitionStatus.TooManyRequests:t=o.E.TooManyRequests;break;default:t=o.E.NoError}return t}}},2389:(e,t,i)=>{"use strict";i.d(t,{IntentConnectionFactory:()=>o.b,ServiceRecognizerBase:()=>s.q,Context:()=>a._y,OS:()=>a.OS,RecognitionMode:()=>a.jf,RecognizerConfig:()=>a.Xj,SpeechServiceConfig:()=>a.pu,connectivity:()=>a.wF,type:()=>a.dt,WebsocketMessageFormatter:()=>p.D,SpeechConnectionFactory:()=>h.i,TranscriberConnectionFactory:()=>u.l,TranslationConnectionFactory:()=>d.x,SpeechSynthesisConnectionFactory:()=>v.i,EnumTranslation:()=>l.o,RecognitionStatus:()=>f.T,SynthesisStatus:()=>f.g,TranslationSynthesisEnd:()=>g.Z,TranslationHypothesis:()=>S.v,TranslationPhrase:()=>m.Y,TranslationServiceRecognizer:()=>C.h,SpeechDetected:()=>y.s,SpeechHypothesis:()=>P.r,SpeechKeyword:()=>R.y,SpeechServiceRecognizer:()=>w.h,TranscriptionServiceRecognizer:()=>E.X,DetailedSpeechPhrase:()=>T.u,SimpleSpeechPhrase:()=>I.n,AddedLmIntent:()=>b.w,IntentServiceRecognizer:()=>O.O,IntentResponse:()=>A.T,RequestSession:()=>k.G,SpeechContext:()=>x.o,DynamicGrammarBuilder:()=>D.u,DialogServiceAdapter:()=>z.C,AgentConfig:()=>L.H,ConversationConnectionConfig:()=>N.mK,ConversationManager:()=>N.Nw,ConversationRecognizerFactory:()=>N.ab,ConversationTranslatorCommandTypes:()=>N.L7,ConversationTranslatorMessageTypes:()=>N.li,InternalParticipants:()=>N.h$,TranscriberRecognizer:()=>N.Sz,MetadataType:()=>_.p,SynthesisAudioMetadata:()=>_.W,SynthesisTurn:()=>B.a,SynthesisAdapterBase:()=>F.E,SynthesizerConfig:()=>U.E,SynthesisContext:()=>H.V,SpeakerRecognitionConfig:()=>q.D,SpeakerIdMessageAdapter:()=>W.S,xv:()=>K,oo:()=>V,XP:()=>j,CI:()=>J,y0:()=>Y});var r=i(7554);i.o(r,"AddedLmIntent")&&i.d(t,{AddedLmIntent:function(){return r.AddedLmIntent}}),i.o(r,"AgentConfig")&&i.d(t,{AgentConfig:function(){return r.AgentConfig}}),i.o(r,"Context")&&i.d(t,{Context:function(){return r.Context}}),i.o(r,"ConversationConnectionConfig")&&i.d(t,{ConversationConnectionConfig:function(){return r.ConversationConnectionConfig}}),i.o(r,"ConversationManager")&&i.d(t,{ConversationManager:function(){return r.ConversationManager}}),i.o(r,"ConversationRecognizerFactory")&&i.d(t,{ConversationRecognizerFactory:function(){return r.ConversationRecognizerFactory}}),i.o(r,"ConversationTranslatorCommandTypes")&&i.d(t,{ConversationTranslatorCommandTypes:function(){return r.ConversationTranslatorCommandTypes}}),i.o(r,"ConversationTranslatorMessageTypes")&&i.d(t,{ConversationTranslatorMessageTypes:function(){return r.ConversationTranslatorMessageTypes}}),i.o(r,"DetailedSpeechPhrase")&&i.d(t,{DetailedSpeechPhrase:function(){return r.DetailedSpeechPhrase}}),i.o(r,"DialogServiceAdapter")&&i.d(t,{DialogServiceAdapter:function(){return r.DialogServiceAdapter}}),i.o(r,"DynamicGrammarBuilder")&&i.d(t,{DynamicGrammarBuilder:function(){return r.DynamicGrammarBuilder}}),i.o(r,"EnumTranslation")&&i.d(t,{EnumTranslation:function(){return r.EnumTranslation}}),i.o(r,"IntentConnectionFactory")&&i.d(t,{IntentConnectionFactory:function(){return r.IntentConnectionFactory}}),i.o(r,"IntentResponse")&&i.d(t,{IntentResponse:function(){return r.IntentResponse}}),i.o(r,"IntentServiceRecognizer")&&i.d(t,{IntentServiceRecognizer:function(){return r.IntentServiceRecognizer}}),i.o(r,"InternalParticipants")&&i.d(t,{InternalParticipants:function(){return r.InternalParticipants}}),i.o(r,"MetadataType")&&i.d(t,{MetadataType:function(){return r.MetadataType}}),i.o(r,"OS")&&i.d(t,{OS:function(){return r.OS}}),i.o(r,"RecognitionMode")&&i.d(t,{RecognitionMode:function(){return r.RecognitionMode}}),i.o(r,"RecognitionStatus")&&i.d(t,{RecognitionStatus:function(){return r.RecognitionStatus}}),i.o(r,"RecognizerConfig")&&i.d(t,{RecognizerConfig:function(){return r.RecognizerConfig}}),i.o(r,"RequestSession")&&i.d(t,{RequestSession:function(){return r.RequestSession}}),i.o(r,"ServiceRecognizerBase")&&i.d(t,{ServiceRecognizerBase:function(){return r.ServiceRecognizerBase}}),i.o(r,"SimpleSpeechPhrase")&&i.d(t,{SimpleSpeechPhrase:function(){return r.SimpleSpeechPhrase}}),i.o(r,"SpeakerIdMessageAdapter")&&i.d(t,{SpeakerIdMessageAdapter:function(){return r.SpeakerIdMessageAdapter}}),i.o(r,"SpeakerRecognitionConfig")&&i.d(t,{SpeakerRecognitionConfig:function(){return r.SpeakerRecognitionConfig}}),i.o(r,"SpeechConnectionFactory")&&i.d(t,{SpeechConnectionFactory:function(){return r.SpeechConnectionFactory}}),i.o(r,"SpeechContext")&&i.d(t,{SpeechContext:function(){return r.SpeechContext}}),i.o(r,"SpeechDetected")&&i.d(t,{SpeechDetected:function(){return r.SpeechDetected}}),i.o(r,"SpeechHypothesis")&&i.d(t,{SpeechHypothesis:function(){return r.SpeechHypothesis}}),i.o(r,"SpeechKeyword")&&i.d(t,{SpeechKeyword:function(){return r.SpeechKeyword}}),i.o(r,"SpeechServiceConfig")&&i.d(t,{SpeechServiceConfig:function(){return r.SpeechServiceConfig}}),i.o(r,"SpeechServiceRecognizer")&&i.d(t,{SpeechServiceRecognizer:function(){return r.SpeechServiceRecognizer}}),i.o(r,"SpeechSynthesisConnectionFactory")&&i.d(t,{SpeechSynthesisConnectionFactory:function(){return r.SpeechSynthesisConnectionFactory}}),i.o(r,"SynthesisAdapterBase")&&i.d(t,{SynthesisAdapterBase:function(){return r.SynthesisAdapterBase}}),i.o(r,"SynthesisAudioMetadata")&&i.d(t,{SynthesisAudioMetadata:function(){return r.SynthesisAudioMetadata}}),i.o(r,"SynthesisContext")&&i.d(t,{SynthesisContext:function(){return r.SynthesisContext}}),i.o(r,"SynthesisStatus")&&i.d(t,{SynthesisStatus:function(){return r.SynthesisStatus}}),i.o(r,"SynthesisTurn")&&i.d(t,{SynthesisTurn:function(){return r.SynthesisTurn}}),i.o(r,"SynthesizerConfig")&&i.d(t,{SynthesizerConfig:function(){return r.SynthesizerConfig}}),i.o(r,"TranscriberConnectionFactory")&&i.d(t,{TranscriberConnectionFactory:function(){return r.TranscriberConnectionFactory}}),i.o(r,"TranscriberRecognizer")&&i.d(t,{TranscriberRecognizer:function(){return r.TranscriberRecognizer}}),i.o(r,"TranscriptionServiceRecognizer")&&i.d(t,{TranscriptionServiceRecognizer:function(){return r.TranscriptionServiceRecognizer}}),i.o(r,"TranslationConnectionFactory")&&i.d(t,{TranslationConnectionFactory:function(){return r.TranslationConnectionFactory}}),i.o(r,"TranslationHypothesis")&&i.d(t,{TranslationHypothesis:function(){return r.TranslationHypothesis}}),i.o(r,"TranslationPhrase")&&i.d(t,{TranslationPhrase:function(){return r.TranslationPhrase}}),i.o(r,"TranslationServiceRecognizer")&&i.d(t,{TranslationServiceRecognizer:function(){return r.TranslationServiceRecognizer}}),i.o(r,"TranslationSynthesisEnd")&&i.d(t,{TranslationSynthesisEnd:function(){return r.TranslationSynthesisEnd}}),i.o(r,"WebsocketMessageFormatter")&&i.d(t,{WebsocketMessageFormatter:function(){return r.WebsocketMessageFormatter}}),i.o(r,"connectivity")&&i.d(t,{connectivity:function(){return r.connectivity}}),i.o(r,"type")&&i.d(t,{type:function(){return r.type}});var n=i(1813);i.o(n,"AddedLmIntent")&&i.d(t,{AddedLmIntent:function(){return n.AddedLmIntent}}),i.o(n,"AgentConfig")&&i.d(t,{AgentConfig:function(){return n.AgentConfig}}),i.o(n,"Context")&&i.d(t,{Context:function(){return n.Context}}),i.o(n,"ConversationConnectionConfig")&&i.d(t,{ConversationConnectionConfig:function(){return n.ConversationConnectionConfig}}),i.o(n,"ConversationManager")&&i.d(t,{ConversationManager:function(){return n.ConversationManager}}),i.o(n,"ConversationRecognizerFactory")&&i.d(t,{ConversationRecognizerFactory:function(){return n.ConversationRecognizerFactory}}),i.o(n,"ConversationTranslatorCommandTypes")&&i.d(t,{ConversationTranslatorCommandTypes:function(){return n.ConversationTranslatorCommandTypes}}),i.o(n,"ConversationTranslatorMessageTypes")&&i.d(t,{ConversationTranslatorMessageTypes:function(){return n.ConversationTranslatorMessageTypes}}),i.o(n,"DetailedSpeechPhrase")&&i.d(t,{DetailedSpeechPhrase:function(){return n.DetailedSpeechPhrase}}),i.o(n,"DialogServiceAdapter")&&i.d(t,{DialogServiceAdapter:function(){return n.DialogServiceAdapter}}),i.o(n,"DynamicGrammarBuilder")&&i.d(t,{DynamicGrammarBuilder:function(){return n.DynamicGrammarBuilder}}),i.o(n,"EnumTranslation")&&i.d(t,{EnumTranslation:function(){return n.EnumTranslation}}),i.o(n,"IntentConnectionFactory")&&i.d(t,{IntentConnectionFactory:function(){return n.IntentConnectionFactory}}),i.o(n,"IntentResponse")&&i.d(t,{IntentResponse:function(){return n.IntentResponse}}),i.o(n,"IntentServiceRecognizer")&&i.d(t,{IntentServiceRecognizer:function(){return n.IntentServiceRecognizer}}),i.o(n,"InternalParticipants")&&i.d(t,{InternalParticipants:function(){return n.InternalParticipants}}),i.o(n,"MetadataType")&&i.d(t,{MetadataType:function(){return n.MetadataType}}),i.o(n,"OS")&&i.d(t,{OS:function(){return n.OS}}),i.o(n,"RecognitionMode")&&i.d(t,{RecognitionMode:function(){return n.RecognitionMode}}),i.o(n,"RecognitionStatus")&&i.d(t,{RecognitionStatus:function(){return n.RecognitionStatus}}),i.o(n,"RecognizerConfig")&&i.d(t,{RecognizerConfig:function(){return n.RecognizerConfig}}),i.o(n,"RequestSession")&&i.d(t,{RequestSession:function(){return n.RequestSession}}),i.o(n,"ServiceRecognizerBase")&&i.d(t,{ServiceRecognizerBase:function(){return n.ServiceRecognizerBase}}),i.o(n,"SimpleSpeechPhrase")&&i.d(t,{SimpleSpeechPhrase:function(){return n.SimpleSpeechPhrase}}),i.o(n,"SpeakerIdMessageAdapter")&&i.d(t,{SpeakerIdMessageAdapter:function(){return n.SpeakerIdMessageAdapter}}),i.o(n,"SpeakerRecognitionConfig")&&i.d(t,{SpeakerRecognitionConfig:function(){return n.SpeakerRecognitionConfig}}),i.o(n,"SpeechConnectionFactory")&&i.d(t,{SpeechConnectionFactory:function(){return n.SpeechConnectionFactory}}),i.o(n,"SpeechContext")&&i.d(t,{SpeechContext:function(){return n.SpeechContext}}),i.o(n,"SpeechDetected")&&i.d(t,{SpeechDetected:function(){return n.SpeechDetected}}),i.o(n,"SpeechHypothesis")&&i.d(t,{SpeechHypothesis:function(){return n.SpeechHypothesis}}),i.o(n,"SpeechKeyword")&&i.d(t,{SpeechKeyword:function(){return n.SpeechKeyword}}),i.o(n,"SpeechServiceConfig")&&i.d(t,{SpeechServiceConfig:function(){return n.SpeechServiceConfig}}),i.o(n,"SpeechServiceRecognizer")&&i.d(t,{SpeechServiceRecognizer:function(){return n.SpeechServiceRecognizer}}),i.o(n,"SpeechSynthesisConnectionFactory")&&i.d(t,{SpeechSynthesisConnectionFactory:function(){return n.SpeechSynthesisConnectionFactory}}),i.o(n,"SynthesisAdapterBase")&&i.d(t,{SynthesisAdapterBase:function(){return n.SynthesisAdapterBase}}),i.o(n,"SynthesisAudioMetadata")&&i.d(t,{SynthesisAudioMetadata:function(){return n.SynthesisAudioMetadata}}),i.o(n,"SynthesisContext")&&i.d(t,{SynthesisContext:function(){return n.SynthesisContext}}),i.o(n,"SynthesisStatus")&&i.d(t,{SynthesisStatus:function(){return n.SynthesisStatus}}),i.o(n,"SynthesisTurn")&&i.d(t,{SynthesisTurn:function(){return n.SynthesisTurn}}),i.o(n,"SynthesizerConfig")&&i.d(t,{SynthesizerConfig:function(){return n.SynthesizerConfig}}),i.o(n,"TranscriberConnectionFactory")&&i.d(t,{TranscriberConnectionFactory:function(){return n.TranscriberConnectionFactory}}),i.o(n,"TranscriberRecognizer")&&i.d(t,{TranscriberRecognizer:function(){return n.TranscriberRecognizer}}),i.o(n,"TranscriptionServiceRecognizer")&&i.d(t,{TranscriptionServiceRecognizer:function(){return n.TranscriptionServiceRecognizer}}),i.o(n,"TranslationConnectionFactory")&&i.d(t,{TranslationConnectionFactory:function(){return n.TranslationConnectionFactory}}),i.o(n,"TranslationHypothesis")&&i.d(t,{TranslationHypothesis:function(){return n.TranslationHypothesis}}),i.o(n,"TranslationPhrase")&&i.d(t,{TranslationPhrase:function(){return n.TranslationPhrase}}),i.o(n,"TranslationServiceRecognizer")&&i.d(t,{TranslationServiceRecognizer:function(){return n.TranslationServiceRecognizer}}),i.o(n,"TranslationSynthesisEnd")&&i.d(t,{TranslationSynthesisEnd:function(){return n.TranslationSynthesisEnd}}),i.o(n,"WebsocketMessageFormatter")&&i.d(t,{WebsocketMessageFormatter:function(){return n.WebsocketMessageFormatter}}),i.o(n,"connectivity")&&i.d(t,{connectivity:function(){return n.connectivity}}),i.o(n,"type")&&i.d(t,{type:function(){return n.type}});var o=i(9638),s=i(2417),a=i(2029),c=i(2709);i.o(c,"AddedLmIntent")&&i.d(t,{AddedLmIntent:function(){return c.AddedLmIntent}}),i.o(c,"AgentConfig")&&i.d(t,{AgentConfig:function(){return c.AgentConfig}}),i.o(c,"ConversationConnectionConfig")&&i.d(t,{ConversationConnectionConfig:function(){return c.ConversationConnectionConfig}}),i.o(c,"ConversationManager")&&i.d(t,{ConversationManager:function(){return c.ConversationManager}}),i.o(c,"ConversationRecognizerFactory")&&i.d(t,{ConversationRecognizerFactory:function(){return c.ConversationRecognizerFactory}}),i.o(c,"ConversationTranslatorCommandTypes")&&i.d(t,{ConversationTranslatorCommandTypes:function(){return c.ConversationTranslatorCommandTypes}}),i.o(c,"ConversationTranslatorMessageTypes")&&i.d(t,{ConversationTranslatorMessageTypes:function(){return c.ConversationTranslatorMessageTypes}}),i.o(c,"DetailedSpeechPhrase")&&i.d(t,{DetailedSpeechPhrase:function(){return c.DetailedSpeechPhrase}}),i.o(c,"DialogServiceAdapter")&&i.d(t,{DialogServiceAdapter:function(){return c.DialogServiceAdapter}}),i.o(c,"DynamicGrammarBuilder")&&i.d(t,{DynamicGrammarBuilder:function(){return c.DynamicGrammarBuilder}}),i.o(c,"EnumTranslation")&&i.d(t,{EnumTranslation:function(){return c.EnumTranslation}}),i.o(c,"IntentResponse")&&i.d(t,{IntentResponse:function(){return c.IntentResponse}}),i.o(c,"IntentServiceRecognizer")&&i.d(t,{IntentServiceRecognizer:function(){return c.IntentServiceRecognizer}}),i.o(c,"InternalParticipants")&&i.d(t,{InternalParticipants:function(){return c.InternalParticipants}}),i.o(c,"MetadataType")&&i.d(t,{MetadataType:function(){return c.MetadataType}}),i.o(c,"RecognitionStatus")&&i.d(t,{RecognitionStatus:function(){return c.RecognitionStatus}}),i.o(c,"RequestSession")&&i.d(t,{RequestSession:function(){return c.RequestSession}}),i.o(c,"SimpleSpeechPhrase")&&i.d(t,{SimpleSpeechPhrase:function(){return c.SimpleSpeechPhrase}}),i.o(c,"SpeakerIdMessageAdapter")&&i.d(t,{SpeakerIdMessageAdapter:function(){return c.SpeakerIdMessageAdapter}}),i.o(c,"SpeakerRecognitionConfig")&&i.d(t,{SpeakerRecognitionConfig:function(){return c.SpeakerRecognitionConfig}}),i.o(c,"SpeechConnectionFactory")&&i.d(t,{SpeechConnectionFactory:function(){return c.SpeechConnectionFactory}}),i.o(c,"SpeechContext")&&i.d(t,{SpeechContext:function(){return c.SpeechContext}}),i.o(c,"SpeechDetected")&&i.d(t,{SpeechDetected:function(){return c.SpeechDetected}}),i.o(c,"SpeechHypothesis")&&i.d(t,{SpeechHypothesis:function(){return c.SpeechHypothesis}}),i.o(c,"SpeechKeyword")&&i.d(t,{SpeechKeyword:function(){return c.SpeechKeyword}}),i.o(c,"SpeechServiceRecognizer")&&i.d(t,{SpeechServiceRecognizer:function(){return c.SpeechServiceRecognizer}}),i.o(c,"SpeechSynthesisConnectionFactory")&&i.d(t,{SpeechSynthesisConnectionFactory:function(){return c.SpeechSynthesisConnectionFactory}}),i.o(c,"SynthesisAdapterBase")&&i.d(t,{SynthesisAdapterBase:function(){return c.SynthesisAdapterBase}}),i.o(c,"SynthesisAudioMetadata")&&i.d(t,{SynthesisAudioMetadata:function(){return c.SynthesisAudioMetadata}}),i.o(c,"SynthesisContext")&&i.d(t,{SynthesisContext:function(){return c.SynthesisContext}}),i.o(c,"SynthesisStatus")&&i.d(t,{SynthesisStatus:function(){return c.SynthesisStatus}}),i.o(c,"SynthesisTurn")&&i.d(t,{SynthesisTurn:function(){return c.SynthesisTurn}}),i.o(c,"SynthesizerConfig")&&i.d(t,{SynthesizerConfig:function(){return c.SynthesizerConfig}}),i.o(c,"TranscriberConnectionFactory")&&i.d(t,{TranscriberConnectionFactory:function(){return c.TranscriberConnectionFactory}}),i.o(c,"TranscriberRecognizer")&&i.d(t,{TranscriberRecognizer:function(){return c.TranscriberRecognizer}}),i.o(c,"TranscriptionServiceRecognizer")&&i.d(t,{TranscriptionServiceRecognizer:function(){return c.TranscriptionServiceRecognizer}}),i.o(c,"TranslationConnectionFactory")&&i.d(t,{TranslationConnectionFactory:function(){return c.TranslationConnectionFactory}}),i.o(c,"TranslationHypothesis")&&i.d(t,{TranslationHypothesis:function(){return c.TranslationHypothesis}}),i.o(c,"TranslationPhrase")&&i.d(t,{TranslationPhrase:function(){return c.TranslationPhrase}}),i.o(c,"TranslationServiceRecognizer")&&i.d(t,{TranslationServiceRecognizer:function(){return c.TranslationServiceRecognizer}}),i.o(c,"TranslationSynthesisEnd")&&i.d(t,{TranslationSynthesisEnd:function(){return c.TranslationSynthesisEnd}}),i.o(c,"WebsocketMessageFormatter")&&i.d(t,{WebsocketMessageFormatter:function(){return c.WebsocketMessageFormatter}});var p=i(5610),h=i(3955),u=i(8430),d=i(6477),v=i(3697),l=i(1054),f=i(7297),g=i(8436),S=i(1346),m=i(5163),C=i(3326),y=i(2559),P=i(556),R=i(1297),w=i(5091),E=i(7070),T=i(5984),I=i(2436),b=i(358),O=i(1687),A=i(9340),k=i(6347),x=i(3495),D=i(5374),M=i(8750);i.o(M,"AgentConfig")&&i.d(t,{AgentConfig:function(){return M.AgentConfig}}),i.o(M,"ConversationConnectionConfig")&&i.d(t,{ConversationConnectionConfig:function(){return M.ConversationConnectionConfig}}),i.o(M,"ConversationManager")&&i.d(t,{ConversationManager:function(){return M.ConversationManager}}),i.o(M,"ConversationRecognizerFactory")&&i.d(t,{ConversationRecognizerFactory:function(){return M.ConversationRecognizerFactory}}),i.o(M,"ConversationTranslatorCommandTypes")&&i.d(t,{ConversationTranslatorCommandTypes:function(){return M.ConversationTranslatorCommandTypes}}),i.o(M,"ConversationTranslatorMessageTypes")&&i.d(t,{ConversationTranslatorMessageTypes:function(){return M.ConversationTranslatorMessageTypes}}),i.o(M,"DialogServiceAdapter")&&i.d(t,{DialogServiceAdapter:function(){return M.DialogServiceAdapter}}),i.o(M,"InternalParticipants")&&i.d(t,{InternalParticipants:function(){return M.InternalParticipants}}),i.o(M,"MetadataType")&&i.d(t,{MetadataType:function(){return M.MetadataType}}),i.o(M,"SpeakerIdMessageAdapter")&&i.d(t,{SpeakerIdMessageAdapter:function(){return M.SpeakerIdMessageAdapter}}),i.o(M,"SpeakerRecognitionConfig")&&i.d(t,{SpeakerRecognitionConfig:function(){return M.SpeakerRecognitionConfig}}),i.o(M,"SynthesisAdapterBase")&&i.d(t,{SynthesisAdapterBase:function(){return M.SynthesisAdapterBase}}),i.o(M,"SynthesisAudioMetadata")&&i.d(t,{SynthesisAudioMetadata:function(){return M.SynthesisAudioMetadata}}),i.o(M,"SynthesisContext")&&i.d(t,{SynthesisContext:function(){return M.SynthesisContext}}),i.o(M,"SynthesisTurn")&&i.d(t,{SynthesisTurn:function(){return M.SynthesisTurn}}),i.o(M,"SynthesizerConfig")&&i.d(t,{SynthesizerConfig:function(){return M.SynthesizerConfig}}),i.o(M,"TranscriberRecognizer")&&i.d(t,{TranscriberRecognizer:function(){return M.TranscriberRecognizer}});var z=i(7006),L=i(2802),N=i(7619),_=i(3500),B=i(5969),F=i(9660),U=i(1190),H=i(6230),q=i(2627),W=i(4095);const K="OutputFormat",V="CancellationErrorCode",j="ServiceProperties",J="ForceDictation",Y="OpenRange"},4257:(e,t,i)=>{"use strict";i.d(t,{S:()=>r});class r{}r.AuthKey="Ocp-Apim-Subscription-Key",r.ConnectionId="X-ConnectionId",r.ContentType="Content-Type",r.CustomCommandsAppId="X-CommandsAppId",r.Path="Path",r.RequestId="X-RequestId",r.RequestStreamId="X-StreamId",r.RequestTimestamp="X-Timestamp"},7410:(e,t,i)=>{"use strict";i.d(t,{G:()=>r});class r{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},7554:()=>{},1813:()=>{},9638:(e,t,i)=>{"use strict";i.d(t,{b:()=>c});var r=i(4067),n=i(5453),o=i(92),s=i(2389),a=i(4257);class c extends o._{constructor(){super(...arguments),this.create=(e,t,i)=>{let o=e.parameters.getProperty(n.o.SpeechServiceConnection_Endpoint);if(!o){const t=e.parameters.getProperty(n.o.SpeechServiceConnection_IntentRegion),i=t&&t.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";o=e.parameters.getProperty(n.o.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+i)+"/speech/recognition/interactive/cognitiveservices/v1"}const c={format:"simple",language:e.parameters.getProperty(n.o.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,c,o);const p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[a.S.ConnectionId]=i,e.parameters.setProperty(n.o.SpeechServiceConnection_Url,o);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(o,c,p,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),h,i)}}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}},1687:(e,t,i)=>{"use strict";i.d(t,{O:()=>d});var r=i(6645),n=i(2874),o=i(5453),s=i(794),a=i(1048),c=i(2209),p=i(8563),h=i(2821),u=i(2389);class d extends u.ServiceRecognizerBase{constructor(e,t,i,r,n){super(e,t,i,r,n),this.privIntentRecognizer=n,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){return t=this,i=void 0,h=function*(){let t,i,p=!1;const h=new n.O;switch(e.messageType===r.C.Text&&h.setProperty(o.o.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":const r=u.SpeechHypothesis.fromJSON(e.textBody);if(t=new s.i(void 0,this.privRequestSession.requestId,a.s.RecognizingIntent,r.Text,r.Duration,r.Offset+this.privRequestSession.currentTurnAudioOffset,r.Language,r.LanguageDetectionConfidence,void 0,e.textBody,h),this.privRequestSession.onHypothesis(t.offset),i=new c.h(t,r.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,i)}catch(e){}p=!0;break;case"speech.phrase":const d=u.SimpleSpeechPhrase.fromJSON(e.textBody);t=new s.i(void 0,this.privRequestSession.requestId,u.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,e.textBody,h),i=new c.h(t,t.offset,this.privRequestSession.sessionId);const v=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||a.s.NoMatch===i.result.reason?(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),v()):this.privPendingIntentArgs=i,p=!0;break;case"response":if(i=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===i){if(""===e.textBody)return;i=new c.h(new s.i,0,this.privRequestSession.sessionId)}const l=u.IntentResponse.fromJSON(e.textBody);let f=this.privAddedLmIntents[l.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(f=this.privUmbrellaIntent),null!==l&&void 0!==f){const t=void 0===f.intentName?l.topScoringIntent.intent:f.intentName;let r=i.result.reason;void 0!==t&&(r=a.s.RecognizedIntent);const p=void 0!==i.result.properties?i.result.properties:new n.O;p.setProperty(o.o.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),i=new c.h(new s.i(t,i.result.resultId,r,i.result.text,i.result.duration,i.result.offset,void 0,void 0,i.result.errorDetails,i.result.json,p),i.offset,i.sessionId)}if(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(i.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}p=!0}return p},new((p=void 0)||(p=Promise))((function(e,r){function n(e){try{s(h.next(e))}catch(e){r(e)}}function o(e){try{s(h.throw(e))}catch(e){r(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof p?i:new p((function(e){e(i)}))).then(n,o)}s((h=h.apply(t,i||[])).next())}));var t,i,p,h}cancelRecognition(e,t,i,r,o){const c=new n.O;if(c.setProperty(u.oo,p.E[r]),this.privIntentRecognizer.canceled){const t=new h.v(i,o,r,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new s.i(void 0,t,a.s.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,c);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}},9906:(e,t,i)=>{"use strict";i.d(t,{o:()=>r});class r{}r.BotId="botid",r.CustomSpeechDeploymentId="cid",r.CustomVoiceDeploymentId="deploymentId",r.EnableAudioLogging="storeAudio",r.EnableLanguageId="lidEnabled",r.EnableWordLevelTimestamps="wordLevelTimestamps",r.EndSilenceTimeoutMs="endSilenceTimeoutMs",r.Format="format",r.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",r.Language="language",r.Profanity="profanity",r.RequestBotStatusMessages="enableBotMessageStatus",r.StableIntermediateThreshold="stableIntermediateThreshold",r.StableTranslation="stableTranslation",r.TestHooks="testhooks"},2029:(e,t,i)=>{"use strict";i.d(t,{jf:()=>r,Xj:()=>c,pu:()=>p,_y:()=>h,OS:()=>d,wF:()=>o,dt:()=>s});var r,n,o,s,a=i(5453);!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(r||(r={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(n||(n={}));class c{constructor(e,t){this.privRecognitionMode=r.Interactive,this.privSpeechServiceConfig=e||new p(new h(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10)}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get autoDetectSourceLanguages(){return this.parameters.getProperty(a.o.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get maxRetryCount(){return this.privMaxRetryCount}}class p{constructor(e){this.serialize=()=>JSON.stringify(this,((e,t)=>{if(t&&"object"==typeof t){const e={};for(const i in t)Object.hasOwnProperty.call(t,i)&&(e[i&&i.charAt(0).toLowerCase()+i.substring(1)]=t[i]);return e}return t})),this.context=e}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class h{constructor(e){this.system=new u,this.os=e}}class u{constructor(){this.name="SpeechSDK",this.version="1.17.0",this.build="JavaScript",this.lang="JavaScript"}}class d{constructor(e,t,i){this.platform=e,this.name=t,this.version=i}}!function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(o||(o={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(s||(s={}))},6347:(e,t,i)=>{"use strict";i.d(t,{G:()=>g});var r,n=i(2605),o=i(3625),s=i(5487);class a extends n.PlatformEvent{constructor(e,t,i,r=n.EventType.Info){super(e,r),this.privRequestId=t,this.privSessionId=i}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}class c extends a{constructor(e,t,i,r){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class p extends a{constructor(e,t,i,r){super("ListeningStartedEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class h extends a{constructor(e,t,i){super("ConnectingToServiceEvent",e,i),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}}class u extends a{constructor(e,t,i,r,n){super("RecognitionStartedEvent",e,n),this.privAudioSourceId=t,this.privAudioNodeId=i,this.privAuthFetchEventId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}!function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(r||(r={}));var d=i(6582),v=i(1945);class l{constructor(e,t,i){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=e=>{this.privIsDisposed||(e instanceof c&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof d.i5&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof d.sQ&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof d.n0&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof d.hA&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof d.He&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof h&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof v.YF&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof v.Zk&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof v.xz&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof v.Qz&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))},this.getTelemetry=()=>{const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},i=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],i},this.dispose=()=>{this.privIsDisposed=!0},this.getConnectionError=e=>{switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=i,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}}var f=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class g{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new h(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new n.Deferred},this.getTelemetry=()=>this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null,this.onEvent=e=>{this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),o.z.instance.onEvent(e)},this.privAudioSourceId=e,this.privRequestId=(0,s.Q)(),this.privAudioNodeId=(0,s.Q)(),this.privTurnDeferral=new n.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRequestId=(0,s.Q)(),this.privRecogNumber++,this.privServiceTelemetryListener=new l(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new c(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t,i){return f(this,void 0,void 0,(function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new p(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onAuthCompleted(e,t){return f(this,void 0,void 0,(function*(){e&&(yield this.onComplete())}))}onConnectionEstablishCompleted(e,t){return f(this,void 0,void 0,(function*(){if(200===e)return this.onEvent(new u(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())}))}onServiceTurnEndResponse(e){return f(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privRequestId=(0,s.Q)(),this.privAudioNode.replay())}))}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(e){return f(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}))}onStopRecognizing(){return f(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onComplete(){return f(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return f(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}},5984:(e,t,i)=>{"use strict";i.d(t,{u:()=>n});var r=i(2389);class n{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new n(e)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}}},7297:(e,t,i)=>{"use strict";var r,n;i.d(t,{g:()=>r,T:()=>n}),function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(r||(r={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests"}(n||(n={}))},9340:(e,t,i)=>{"use strict";i.d(t,{T:()=>r});class r{constructor(e){this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}},2436:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});var r=i(2389);class n{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new n(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}},2559:(e,t,i)=>{"use strict";i.d(t,{s:()=>r});class r{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new r(e)}get Offset(){return this.privSpeechStartDetected.Offset}}},556:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});class r{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new r(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}},1297:(e,t,i)=>{"use strict";i.d(t,{y:()=>r});class r{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new r(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}},3500:(e,t,i)=>{"use strict";var r;i.d(t,{p:()=>r,W:()=>n}),function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme"}(r||(r={}));class n{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new n(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}},1346:(e,t,i)=>{"use strict";i.d(t,{v:()=>n});var r=i(3133);class n{constructor(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=r.Y[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new n(e)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}}},5163:(e,t,i)=>{"use strict";i.d(t,{Y:()=>o});var r=i(2389),n=i(3133);class o{constructor(e){this.privTranslationPhrase=JSON.parse(e),this.privTranslationPhrase.RecognitionStatus=r.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=n.Y[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new o(e)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Translation(){return this.privTranslationPhrase.Translation}}},8436:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(2389);class n{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]}static fromJSON(e){return new n(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}},2417:(e,t,i)=>{"use strict";i.d(t,{q:()=>m});var r=i(4067),n=i(6645),o=i(491),s=i(8232),a=i(2605),c=i(1945),p=i(5487),h=i(6550),u=i(8563),d=i(5453),v=i(7841),l=i(9801),f=i(2389),g=i(3504),S=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class m{constructor(e,t,i,r,c){if(this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=e=>{const t=this.speechContext.toJSON();if(t)return e.send(new g.r(n.C.Text,"speech.context",this.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=(e,t,i)=>{if(!0!==m.telemetryDataEnabled){const e={context:{system:JSON.parse(i).context.system}};i=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("TranscriptionService_SingleChannel","false").toLowerCase()){const e=JSON.parse(i);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",i=JSON.stringify(e)}if(i)return e.send(new g.r(n.C.Text,"speech.config",t.requestId,"application/json",i))},!e)throw new o.Do("authentication");if(!t)throw new o.Do("connectionFactory");if(!i)throw new o.Do("audioSource");if(!r)throw new o.Do("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=i,this.privRecognizerConfig=r,this.privIsDisposed=!1,this.privRecognizer=c,this.privRequestSession=new f.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new s.n,this.privServiceEvents=new s.n,this.privDynamicGrammar=new f.DynamicGrammarBuilder,this.privSpeechContext=new f.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new f.AgentConfig,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=a.Timeout.setTimeout),this.connectionEvents.attach((e=>S(this,void 0,void 0,(function*(){if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&(yield this.cancelRecognitionLocal(h._.Error,1007===t.statusCode?u.E.BadRequestParameters:u.E.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode))}}))))}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(d.o.ConversationTranslator_Token,e)}set authentication(e){this.privAuthentication=this.authentication}isDisposed(){return this.privIsDisposed}dispose(e){return S(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(e){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,i){return S(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return this.recognizeOverride(e,t,i);this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const n=this.connectImpl();let o;try{const e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,i=yield this.audioSource.deviceInfo;this.privIsLiveAudio=i.type&&i.type===f.type.Microphones,o=new r.ReplayableAudioNode(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(o,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:i}}catch(e){throw yield this.privRequestSession.onStopRecognizing(),e}try{yield n}catch(e){return void(yield this.cancelRecognitionLocal(h._.Error,u.E.ConnectionFailure,e))}const s=new v.$(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,s),this.receiveMessage(),this.sendAudio(o).catch((e=>S(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(h._.Error,u.E.RuntimeError,e)}))))}))}stopRecognizing(){return S(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}}))}connect(){return S(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(e,t){this.connectImpl().then((i=>{try{e&&e()}catch(e){t&&t(e)}}),(e=>{try{t&&t(e)}catch(e){}}))}disconnect(){return S(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(h._.Error,u.E.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride());try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=null}))}sendMessage(e){}sendNetworkMessage(e,t){return S(this,void 0,void 0,(function*(){const i="string"==typeof t?n.C.Text:n.C.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new g.r(i,e,this.privRequestSession.requestId,r,t))}))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}sendTelemetryData(){return S(this,void 0,void 0,(function*(){const e=this.privRequestSession.getTelemetry();if(!0!==m.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(m.telemetryData)try{m.telemetryData(e)}catch(e){}const t=yield this.fetchConnection();yield t.send(new g.r(n.C.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}))}cancelRecognitionLocal(e,t,i){return S(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,i))}))}receiveMessage(){return S(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.privRequestSession.isRecognizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const i=g.r.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=f.SpeechDetected.fromJSON(i.textBody),r=new l.J(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,r);break;case"speech.enddetected":let n;n=i.textBody.length>0?i.textBody:"{ Offset: 0 }";const o=f.SpeechDetected.fromJSON(n);this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(o.Offset+this.privRequestSession.currentTurnAudioOffset);const s=new l.J(o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,s);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(h._.EndOfStream,u.E.NoError,void 0));const a=new v.$(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,a));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(i))||this.privServiceEvents&&this.serviceEvents.onEvent(new c.e2(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){return null}}))}sendPrePayloadJSON(e){return S(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e),yield this.sendWaveHeader(e)}))}sendWaveHeader(e){return S(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;return e.send(new g.r(n.C.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}))}connectImpl(){return this.privConnectionPromise?this.privConnectionPromise.then((e=>e.state()===a.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()))):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}fetchConnection(){return S(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===a.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(e){return S(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;let i=Date.now();const r=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),o=t.avgBytesPerSec/1e3*parseInt(r,10),s=this.privRequestSession.recogNumber,a=()=>S(this,void 0,void 0,(function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){const r=yield this.fetchConnection(),c=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let p,h;if(!c||c.isEnd?(p=null,h=0):(p=c.buffer,this.privRequestSession.onAudioSent(p.byteLength),h=o>=this.privRequestSession.bytesSent?0:Math.max(0,i-Date.now())),0!==h&&(yield this.delay(h)),null!==p&&(i=Date.now()+1e3*p.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){if(r.send(new g.r(n.C.Binary,"audio",this.privRequestSession.requestId,null,p)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),!(null==c?void 0:c.isEnd))return a();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}}));return a()}))}retryableConnect(){return S(this,void 0,void 0,(function*(){let e=!1;this.privAuthFetchEventId=(0,p.Q)();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:(0,p.Q)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let i=0,r="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),n=yield t;yield this.privRequestSession.onAuthCompleted(!1);const o=this.privConnectionFactory.create(this.privRecognizerConfig,n,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(o.events),o.events.attach((e=>{this.connectionEvents.onEvent(e)}));const s=yield o.open();if(200===s.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(o);1006===s.statusCode&&(e=!0),i=s.statusCode,r=s.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(i,r),Promise.reject(`Unable to contact server. StatusCode: ${i}, ${this.privRecognizerConfig.parameters.getProperty(d.o.SpeechServiceConnection_Endpoint)} Reason: ${r}`)}))}delay(e){return new Promise(((t,i)=>{this.privSetTimeout(t,e)}))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const i=new Uint8Array(e);t+=e.byteLength+"\r\n";for(let r=0;r<e.byteLength;r++)t+=i[r].toString(16).padStart(2,"0")+" "}console.info(t)}sendFinalAudio(){return S(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();yield e.send(new g.r(n.C.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return S(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e),e)}))}}m.telemetryDataEnabled=!0},4095:(e,t,i)=>{"use strict";i.d(t,{S:()=>a});var r=i(4067),n=i(5453),o=i(8345),s=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e){let t=e.parameters.getProperty(n.o.SpeechServiceConnection_Endpoint,void 0);if(!t){const i=e.parameters.getProperty(n.o.SpeechServiceConnection_Region,"westus"),r=i&&i.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";t=e.parameters.getProperty(n.o.SpeechServiceConnection_Host,"https://"+i+".api.cognitive"+r+"/speaker/{mode}/v2.0/{dependency}")+"/profiles"}this.privUri=t;const i=r.RestConfigBase.requestOptions;i.headers[r.RestConfigBase.configParams.subscriptionKey]=e.parameters.getProperty(n.o.SpeechServiceConnection_Key,void 0),this.privRestAdapter=new r.RestMessageAdapter(i)}createProfile(e,t){const i=this.getOperationUri(e);return this.privRestAdapter.setHeaders(r.RestConfigBase.configParams.contentTypeKey,"application/json"),this.privRestAdapter.request(r.RestRequestType.Post,i,{},{locale:t})}createEnrollment(e,t){this.privRestAdapter.setHeaders(r.RestConfigBase.configParams.contentTypeKey,"multipart/form-data");const i=this.getOperationUri(e.profileType)+"/"+e.profileId+"/enrollments";return t.blob.then((e=>this.privRestAdapter.request(r.RestRequestType.File,i,{ignoreMinLength:"true"},null,e)))}verifySpeaker(e,t){return s(this,void 0,void 0,(function*(){this.privRestAdapter.setHeaders(r.RestConfigBase.configParams.contentTypeKey,"multipart/form-data");const i=this.getOperationUri(e.voiceProfile.profileType)+"/"+e.voiceProfile.profileId+"/verify";try{const e=yield t.blob;return this.privRestAdapter.request(r.RestRequestType.File,i,{ignoreMinLength:"true"},null,e)}catch(e){return Promise.resolve({data:e})}}))}identifySpeaker(e,t){return s(this,void 0,void 0,(function*(){this.privRestAdapter.setHeaders(r.RestConfigBase.configParams.contentTypeKey,"multipart/form-data");const i=this.getOperationUri(o.f.TextIndependentIdentification)+"/identifySingleSpeaker";try{const n=yield t.blob;return this.privRestAdapter.request(r.RestRequestType.File,i,{profileIds:e.voiceProfileIds,ignoreMinLength:"true"},null,n)}catch(e){return Promise.resolve({data:e})}}))}getProfileStatus(e){const t=`${this.getOperationUri(e.profileType)}/${e.profileId}`;return this.privRestAdapter.request(r.RestRequestType.Get,t,{})}getProfiles(e){const t=this.getOperationUri(e);return this.privRestAdapter.request(r.RestRequestType.Get,t,{})}getAuthorizationPhrases(e){const t=(""+this.getOperationUri(o.f.TextDependentVerification)).replace("profiles","phrases")+"/"+e;return this.privRestAdapter.request(r.RestRequestType.Get,t,{})}deleteProfile(e){const t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(r.RestRequestType.Delete,t,{})}resetProfile(e){const t=this.getOperationUri(e.profileType)+"/"+e.profileId+"/reset";return this.privRestAdapter.request(r.RestRequestType.Post,t,{})}getOperationUri(e){const t=e===o.f.TextIndependentIdentification?"identification":"verification",i=e===o.f.TextDependentVerification?"text-dependent":"text-independent";return this.privUri.replace("{mode}",t).replace("{dependency}",i)}}},2627:(e,t,i)=>{"use strict";i.d(t,{D:()=>n});var r=i(2389);class n{constructor(e,t){this.privContext=e||new r.Context(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}}},3955:(e,t,i)=>{"use strict";i.d(t,{i:()=>h});var r=i(4067),n=i(2389),o=i(5453),s=i(8530),a=i(92),c=i(4257),p=i(9906);class h extends a._{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.create=(e,t,i)=>{let a=e.parameters.getProperty(o.o.SpeechServiceConnection_Endpoint,void 0);const h=e.parameters.getProperty(o.o.SpeechServiceConnection_Region,void 0),u=h&&h.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",d=e.parameters.getProperty(o.o.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+u),v={},l=e.parameters.getProperty(o.o.SpeechServiceConnection_EndpointId,void 0),f=e.parameters.getProperty(o.o.SpeechServiceConnection_RecoLanguage,void 0);if(l?a&&-1!==a.search(p.o.CustomSpeechDeploymentId)||(v[p.o.CustomSpeechDeploymentId]=l):f&&(a&&-1!==a.search(p.o.Language)||(v[p.o.Language]=f)),a&&-1!==a.search(p.o.Format)||(v[p.o.Format]=e.parameters.getProperty(n.xv,s.W[s.W.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(v[p.o.EnableLanguageId]="true"),this.setCommonUrlParams(e,v,a),!a)switch(e.recognitionMode){case n.RecognitionMode.Conversation:a="true"===e.parameters.getProperty(n.CI,"false")?d+this.dictationRelativeUri:d+this.conversationRelativeUri;break;case n.RecognitionMode.Dictation:a=d+this.dictationRelativeUri;break;default:a=d+this.interactiveRelativeUri}const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[c.S.ConnectionId]=i,e.parameters.setProperty(o.o.SpeechServiceConnection_Url,a);const S="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(a,v,g,new n.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),S,i)}}}},3504:(e,t,i)=>{"use strict";i.d(t,{r:()=>s});var r=i(6645),n=i(491),o=i(4257);class s extends r.H{constructor(e,t,i,r,s,a,c,p){if(!t)throw new n.Do("path");if(!i)throw new n.Do("requestId");const h={};if(h[o.S.Path]=t,h[o.S.RequestId]=i,h[o.S.RequestTimestamp]=(new Date).toISOString(),r&&(h[o.S.ContentType]=r),a&&(h[o.S.RequestStreamId]=a),c)for(const e in c)e&&(h[e]=c[e]);p?super(e,s,h,p):super(e,s,h),this.privPath=t,this.privRequestId=i,this.privContentType=r,this.privStreamId=a,this.privAdditionalHeaders=c}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}}s.fromConnectionMessage=e=>{let t=null,i=null,r=null,n=null,a=null;const c={};if(e.headers)for(const s in e.headers)s&&(s.toLowerCase()===o.S.Path.toLowerCase()?t=e.headers[s]:s.toLowerCase()===o.S.RequestId.toLowerCase()?i=e.headers[s]:s.toLowerCase()===o.S.RequestTimestamp.toLowerCase()?n=e.headers[s]:s.toLowerCase()===o.S.ContentType.toLowerCase()?r=e.headers[s]:s.toLowerCase()===o.S.RequestStreamId.toLowerCase()?a=e.headers[s]:c[s]=e.headers[s]);return new s(e.messageType,t,i,r,e.body,a,c,e.id)}},3495:(e,t,i)=>{"use strict";i.d(t,{o:()=>r});class r{constructor(e){this.privContext={},this.privDynamicGrammar=e}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}},2709:()=>{},5091:(e,t,i)=>{"use strict";i.d(t,{h:()=>d});var r=i(2874),n=i(5453),o=i(8670),s=i(1048),a=i(3383),c=i(8530),p=i(8563),h=i(2438),u=i(2389);class d extends u.ServiceRecognizerBase{constructor(e,t,i,r,n){if(super(e,t,i,r,n),this.privSpeechRecognizer=n,void 0!==r.autoDetectSourceLanguages){const e=r.autoDetectSourceLanguages.split(",");this.privSpeechContext.setSection("languageId",{languages:e,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}})}}processTypeSpecificMessages(e){return t=this,i=void 0,h=function*(){let t;const i=new r.O;i.setProperty(n.o.SpeechServiceResponse_JsonResult,e.textBody);let p=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const r=u.SpeechHypothesis.fromJSON(e.textBody),n=r.Offset+this.privRequestSession.currentTurnAudioOffset;t=new o.b(this.privRequestSession.requestId,s.s.RecognizingSpeech,r.Text,r.Duration,n,r.Language,r.LanguageDetectionConfidence,void 0,void 0,e.textBody,i),this.privRequestSession.onHypothesis(n);const h=new a.m(t,r.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,h)}catch(e){}p=!0;break;case"speech.phrase":const d=u.SimpleSpeechPhrase.fromJSON(e.textBody),v=u.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+d.Offset+d.Duration),s.s.Canceled===v){const e=u.EnumTranslation.implTranslateCancelResult(d.RecognitionStatus);yield this.cancelRecognitionLocal(e,u.EnumTranslation.implTranslateCancelErrorCode(d.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||v!==s.s.NoMatch||d.RecognitionStatus===u.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(u.xv)===c.W[c.W.Simple])t=new o.b(this.privRequestSession.requestId,v,d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,void 0,e.textBody,i);else{const r=u.DetailedSpeechPhrase.fromJSON(e.textBody);t=new o.b(this.privRequestSession.requestId,v,r.RecognitionStatus===u.RecognitionStatus.Success?r.NBest[0].Display:void 0,r.Duration,r.Offset+this.privRequestSession.currentTurnAudioOffset,r.Language,r.LanguageDetectionConfidence,void 0,void 0,e.textBody,i)}const r=new a.m(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,r)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}p=!0}return p},new((p=void 0)||(p=Promise))((function(e,r){function n(e){try{s(h.next(e))}catch(e){r(e)}}function o(e){try{s(h.throw(e))}catch(e){r(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof p?i:new p((function(e){e(i)}))).then(n,o)}s((h=h.apply(t,i||[])).next())}));var t,i,p,h}cancelRecognition(e,t,i,n,a){const c=new r.O;if(c.setProperty(u.oo,p.E[n]),this.privSpeechRecognizer.canceled){const t=new h.n(i,a,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new o.b(t,s.s.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,c);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}},3697:(e,t,i)=>{"use strict";i.d(t,{i:()=>c});var r=i(4067),n=i(5453),o=i(2389),s=i(4257),a=i(9906);class c{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1",this.create=(e,t,i)=>{let c=e.parameters.getProperty(n.o.SpeechServiceConnection_Endpoint,void 0);const p=e.parameters.getProperty(n.o.SpeechServiceConnection_Region,void 0),h=p&&p.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",u=e.parameters.getProperty(n.o.SpeechServiceConnection_EndpointId,void 0),d=void 0===u?"tts":"voice",v=e.parameters.getProperty(n.o.SpeechServiceConnection_Host,"wss://"+p+"."+d+".speech"+h);c||(c=v+this.synthesisUri);const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[s.S.ConnectionId]=i,void 0!==u&&(l[a.o.CustomVoiceDeploymentId]=u),e.parameters.setProperty(n.o.SpeechServiceConnection_Url,c);const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(c,{},l,new o.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(e.parameters),f,i)}}}},9660:(e,t,i)=>{"use strict";i.d(t,{E:()=>R});var r=i(6645),n=i(491),o=i(8232),s=i(1945),a=i(2605),c=i(5487),p=i(6550),h=i(8563),u=i(4974),d=i(1211),v=i(1048),l=i(2874),f=i(3491),g=i(3733),S=i(2),m=i(5453),C=i(2389),y=i(3504),P=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class R{constructor(e,t,i,s,a){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=e=>{const t=this.synthesisContext.toJSON();if(t)return e.send(new y.r(r.C.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=(e,t)=>{if(t)return e.send(new y.r(r.C.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=(e,t,i)=>e.send(new y.r(r.C.Text,"ssml",i,"application/ssml+xml",t)),!e)throw new n.Do("authentication");if(!t)throw new n.Do("connectionFactory");if(!i)throw new n.Do("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=i,this.privIsDisposed=!1,this.privSpeechSynthesizer=s,this.privSessionAudioDestination=a,this.privSynthesisTurn=new C.SynthesisTurn,this.privConnectionEvents=new o.n,this.privServiceEvents=new o.n,this.privSynthesisContext=new C.SynthesisContext(this.privSpeechSynthesizer),this.privAgentConfig=new C.AgentConfig,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(p._.Error,1007===t.statusCode?h.E.BadRequestParameters:h.E.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const i=new Uint8Array(e.byteLength+t.header.byteLength);return i.set(new Uint8Array(t.header),0),i.set(new Uint8Array(e),t.header.byteLength),i.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return P(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return P(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return P(this,void 0,void 0,(function*(){const i="string"==typeof t?r.C.Text:r.C.Binary,n="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new y.r(i,e,this.privSynthesisTurn.requestId,n,t))}))}Speak(e,t,i,r,n,o){return P(this,void 0,void 0,(function*(){let s;if(s=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(s,i,r,n);this.privSuccessCallback=r,this.privErrorCallback=n,this.privSynthesisTurn.startNewSynthesis(i,e,t,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,s,i);const t=new u.c(new d.P(i,v.s.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t),this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(p._.Error,h.E.ConnectionFailure,e),Promise.reject(e)}}))}cancelSynthesis(e,t,i,r){const n=new l.O;n.setProperty(C.oo,h.E[i]);const o=new d.P(e,v.s.Canceled,void 0,r,n);if(this.privSpeechSynthesizer.SynthesisCanceled){const e=new u.c(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,e)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}}cancelSynthesisLocal(e,t,i){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,i))}processTypeSpecificMessages(e,t,i){return!0}receiveMessage(){return P(this,void 0,void 0,(function*(){try{const e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const i=y.r.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(i.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===i.streamId.toLowerCase()&&i.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(i.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const e=R.addHeader(i.binaryBody,this.privSynthesisTurn.audioOutputFormat),t=new u.c(new d.P(this.privSynthesisTurn.requestId,v.s.SynthesizingAudio,e));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,t)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(i.binaryBody)}break;case"audio.metadata":const e=C.SynthesisAudioMetadata.fromJSON(i.textBody).Metadata;for(const t of e)switch(t.Type){case C.MetadataType.WordBoundary:this.privSynthesisTurn.onWordBoundaryEvent(t.Data.text.Text);const e=new f.G(t.Data.Offset,t.Data.text.Text,t.Data.text.Length,this.privSynthesisTurn.currentTextOffset);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}break;case C.MetadataType.Bookmark:const i=new g.i(t.Data.Offset,t.Data.Bookmark);if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch(e){}break;case C.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(t),t.Data.IsLastAnimation){const e=new S.w(t.Data.Offset,t.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(e){}}}break;case"turn.end":let t;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();t=new d.P(this.privSynthesisTurn.requestId,v.s.SynthesizingAudioCompleted,e),this.privSuccessCallback&&this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new u.c(t))}catch(e){}break;default:this.processTypeSpecificMessages(i)||this.privServiceEvents&&this.serviceEvents.onEvent(new s.e2(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){}}))}connectImpl(e=!1){if(this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===a.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl())));this.privAuthFetchEventId=(0,c.Q)(),this.privConnectionId=(0,c.Q)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((t=>P(this,void 0,void 0,(function*(){yield this.privSynthesisTurn.onAuthCompleted(!1);const i=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);i.events.attach((e=>{this.connectionEvents.onEvent(e)}));const r=yield i.open();return 200===r.statusCode?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(i)):403!==r.statusCode||e?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode,r.reason),Promise.reject(`Unable to contact server. StatusCode: ${r.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(m.o.SpeechServiceConnection_Endpoint)} Reason: ${r.reason}`)):this.connectImpl(!0)}))),(e=>P(this,void 0,void 0,(function*(){throw yield this.privSynthesisTurn.onAuthCompleted(!0,e),new Error(e)})))),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}fetchConnection(){return P(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===a.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return P(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}}R.telemetryDataEnabled=!0},6230:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});class r{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,sentenceBoundaryEnabled:!1,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}},5969:(e,t,i)=>{"use strict";i.d(t,{a:()=>v});var r=i(2605),n=i(3625),o=i(5487),s=i(1912),a=i(9660);class c extends r.PlatformEvent{constructor(e,t,i=r.EventType.Info){super(e,i),this.privRequestId=t}get requestId(){return this.privRequestId}}class p extends c{constructor(e,t,i){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=i}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class h extends c{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class u extends c{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var d=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class v{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.onEvent(new h(this.privRequestId,this.privAuthFetchEventId))},this.onAuthCompleted=(e,t)=>{e&&this.onComplete()},this.onConnectionEstablishCompleted=(e,t)=>{if(200===e)return this.onEvent(new u(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()},this.onServiceResponseMessage=e=>{const t=JSON.parse(e);this.streamId=t.audio.streamId},this.onServiceTurnEndResponse=()=>{this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred},this.dispose=e=>{this.privIsDisposed||(this.privIsDisposed=!0)},this.onEvent=e=>{n.z.instance.onEvent(e)},this.onComplete=()=>{this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))},this.privRequestId=(0,o.Q)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get bytesReceived(){return this.privBytesReceived}getAllReceivedAudio(){return d(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return d(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=a.E.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,i,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=i,this.privAudioOutputStream=new s.NO,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privPartialVisemeAnimation="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new p(this.requestId,void 0,void 0===r?void 0:r.id()))}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onWordBoundaryEvent(e){this.updateTextOffset(e)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}updateTextOffset(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))}readAllAudioFromStream(){return d(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}}},1190:(e,t,i)=>{"use strict";i.d(t,{E:()=>o});var r,n=i(2389);!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(r||(r={}));class o{constructor(e,t){this.privSynthesisServiceType=r.Standard,this.privSpeechServiceConfig=e||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},8430:(e,t,i)=>{"use strict";i.d(t,{l:()=>p});var r=i(4067),n=i(5453),o=i(92),s=i(2389),a=i(4257),c=i(9906);class p extends o._{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio",this.create=(e,t,i)=>{let o=e.parameters.getProperty(n.o.SpeechServiceConnection_Endpoint,void 0);const p=e.parameters.getProperty(n.o.SpeechServiceConnection_Region,"centralus"),h=p&&p.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",u="wss://transcribe."+p+".cts.speech"+h+this.multiaudioRelativeUri,d=e.parameters.getProperty(n.o.SpeechServiceConnection_Host,u),v={},l=e.parameters.getProperty(n.o.SpeechServiceConnection_EndpointId,void 0),f=e.parameters.getProperty(n.o.SpeechServiceConnection_RecoLanguage,void 0);l?o&&-1!==o.search(c.o.CustomSpeechDeploymentId)||(v[c.o.CustomSpeechDeploymentId]=l):f&&(o&&-1!==o.search(c.o.Language)||(v[c.o.Language]=f)),this.setCommonUrlParams(e,v,o),o||(o=d);const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[a.S.ConnectionId]=i,e.parameters.setProperty(n.o.SpeechServiceConnection_Url,o);const S="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(o,v,g,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),S,i)}}}},7070:(e,t,i)=>{"use strict";i.d(t,{X:()=>f});var r=i(6645),n=i(2874),o=i(5453),s=i(8670),a=i(1048),c=i(3383),p=i(8530),h=i(8563),u=i(6362),d=i(2389),v=i(3504),l=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class f extends d.ServiceRecognizerBase{constructor(e,t,i,n,o){super(e,t,i,n,o),this.sendSpeechEvent=(e,t)=>{const i=JSON.stringify(t);if(i)return e.send(new v.r(r.C.Text,"speech.event",this.privRequestSession.requestId,"application/json",i))},this.privTranscriberRecognizer=o,this.sendPrePayloadJSONOverride=this.sendTranscriptionStartJSON}sendSpeechEventAsync(e,t){return l(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const i=yield this.fetchConnection();yield this.sendSpeechEvent(i,this.createSpeechEventPayload(e,t))}}))}processTypeSpecificMessages(e){return l(this,void 0,void 0,(function*(){let t;const i=new n.O;i.setProperty(o.o.SpeechServiceResponse_JsonResult,e.textBody);let r=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const n=d.SpeechHypothesis.fromJSON(e.textBody),o=n.Offset+this.privRequestSession.currentTurnAudioOffset;t=new s.b(this.privRequestSession.requestId,a.s.RecognizingSpeech,n.Text,n.Duration,o,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,e.textBody,i),this.privRequestSession.onHypothesis(o);const h=new c.m(t,n.Duration,this.privRequestSession.sessionId);if(this.privTranscriberRecognizer.recognizing)try{this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,h)}catch(e){}r=!0;break;case"speech.phrase":const u=d.SimpleSpeechPhrase.fromJSON(e.textBody),v=d.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+u.Offset+u.Duration),a.s.Canceled===v){const e=d.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus);yield this.cancelRecognitionLocal(e,d.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||v!==a.s.NoMatch||u.RecognitionStatus===d.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(d.xv)===p.W[p.W.Simple])t=new s.b(this.privRequestSession.requestId,v,u.DisplayText,u.Duration,u.Offset+this.privRequestSession.currentTurnAudioOffset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,e.textBody,i);else{const r=d.DetailedSpeechPhrase.fromJSON(e.textBody);t=new s.b(this.privRequestSession.requestId,v,r.RecognitionStatus===d.RecognitionStatus.Success?r.NBest[0].Display:void 0,r.Duration,r.Offset+this.privRequestSession.currentTurnAudioOffset,r.Language,r.LanguageDetectionConfidence,void 0,void 0,e.textBody,i)}const r=new c.m(t,t.offset,this.privRequestSession.sessionId);if(this.privTranscriberRecognizer.recognized)try{this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,r)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}return r}))}cancelRecognition(e,t,i,r,o){const c=new n.O;if(c.setProperty(d.oo,h.E[r]),this.privTranscriberRecognizer.canceled){const t=new u.n(i,o,r,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new s.b(t,a.s.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,c);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}sendTranscriptionStartJSON(e){return l(this,void 0,void 0,(function*(){yield this.sendSpeechContext(e);const t=this.privTranscriberRecognizer.getConversationInfo(),i=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,i),yield this.sendWaveHeader(e)}))}createSpeechEventPayload(e,t){const i={id:"meeting",name:t,meeting:e.conversationProperties};return i.meeting.id=e.id,i.meeting.attendees=e.participants,i.meeting.record="on"===e.conversationProperties.audiorecording?"true":"false",i}}},7619:(e,t,i)=>{"use strict";i.d(t,{mK:()=>s,Nw:()=>h,ab:()=>Y,L7:()=>F,li:()=>B,h$:()=>_,Sz:()=>$});var r=i(9513),n=i(5453),o=i(5840);class s extends o.o{static get host(){return s.privHost}static get apiVersion(){return s.privApiVersion}static get clientAppId(){return s.privClientAppId}static get defaultLanguageCode(){return s.privDefaultLanguageCode}static get restPath(){return s.privRestPath}static get webSocketPath(){return s.privWebSocketPath}static get speechHost(){return s.privSpeechHost}static get speechPath(){return s.privSpeechPath}static get transcriptionEventKeys(){return s.privTranscriptionEventKeys}}s.privHost="dev.microsofttranslator.com",s.privRestPath="/capito/room",s.privApiVersion="2.0",s.privDefaultLanguageCode="en-US",s.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",s.privWebSocketPath="/capito/translate",s.privSpeechHost="{region}.s2s.speech.microsoft.com",s.privSpeechPath="/speech/translation/cognitiveservices/v1",s.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferenciateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var a=i(1063);function c(e,t=null){return{data:t||e.statusText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(t||'"'+e.statusText+'"'),ok:!1,status:e.status,statusText:e.statusText}}function p(e,t,i={},r=null,n={},s){const p=o.o.requestOptions,h=n.ignoreCache||p.ignoreCache,u=n.headers||p.headers,d=n.timeout||p.timeout;let v;v="undefined"==typeof window?new a.XMLHttpRequest:new XMLHttpRequest,v.open(e,function(e,t={}){const i=function(e={}){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}(t);return i?e+(-1===e.indexOf("?")?"?":"&")+i:e}(t,i),!0),u&&Object.keys(u).forEach((e=>v.setRequestHeader(e,u[e]))),h&&v.setRequestHeader("Cache-Control","no-cache"),v.timeout=d,v.onload=e=>{s(function(e){return{data:e.responseText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(e.responseText),ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText}}(v))},v.onerror=e=>{s(c(v,"Failed to make request."))},v.ontimeout=e=>{s(c(v,"Request took longer than expected."))},"post"===e&&r?(v.setRequestHeader("Content-Type","application/json"),v.send(JSON.stringify(r))):v.send()}class h{constructor(){this.privRequestParams=s.configParams,this.privErrors=s.restErrors,this.privHost=s.host,this.privApiVersion=s.apiVersion,this.privRestPath=s.restPath}createOrJoin(e,t,i,o){try{r.a.throwIfNullOrUndefined(e,"args");const a=e.getProperty(n.o.SpeechServiceConnection_RecoLanguage,s.defaultLanguageCode),c=e.getProperty(n.o.ConversationTranslator_Name),h=e.getProperty(n.o.ConversationTranslator_Host,this.privHost),u=e.getProperty(n.o.ConversationTranslator_CorrelationId),d=e.getProperty(n.o.SpeechServiceConnection_Key),v=e.getProperty(n.o.SpeechServiceConnection_Region),l=e.getProperty(n.o.SpeechServiceAuthorization_Token);r.a.throwIfNullOrWhitespace(a,"languageCode"),r.a.throwIfNullOrWhitespace(c,"nickname"),r.a.throwIfNullOrWhitespace(h,"endpointHost");const f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=a,f[this.privRequestParams.nickname]=c;const g={};u&&(g[this.privRequestParams.correlationId]=u),g[this.privRequestParams.clientAppId]=s.clientAppId,void 0!==t?f[this.privRequestParams.roomId]=t:(r.a.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=v,d?g[this.privRequestParams.subscriptionKey]=d:l?g[this.privRequestParams.authorization]="Bearer "+l:r.a.throwIfNullOrUndefined(d,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=g,p("post",`https://${h}${this.privRestPath}`,f,null,S,(e=>{const t=function(e,t){let i="";try{const r=t.trim().split(/[\r\n]+/),n={};r.forEach((e=>{const t=e.split(": "),i=t.shift().toLowerCase(),r=t.join(": ");n[i]=r})),i=n[e.toLowerCase()]}catch(e){}return i}(this.privRequestParams.requestId,e.headers);if(!e.ok){if(o){let i,r=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{i=JSON.parse(e.data),r+=` [${i.error.code}: ${i.error.message}]`}catch(t){r+=` [${e.data}]`}t&&(r+=" "+t),o(r)}return}const r=JSON.parse(e.data);if(r&&(r.requestId=t),i){try{i(r)}catch(e){o&&o(e)}i=void 0}}))}catch(e){if(o)if(e instanceof Error){const t=e;o(t.name+": "+t.message)}else o(e)}}leave(e,t){return new Promise(((i,o)=>{try{r.a.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),r.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));const o=e.getProperty(n.o.ConversationTranslator_Host,this.privHost),s=e.getProperty(n.o.ConversationTranslator_CorrelationId),a={};a[this.privRequestParams.apiVersion]=this.privApiVersion,a[this.privRequestParams.sessionToken]=t;const c={};s&&(c[this.privRequestParams.correlationId]=s);const h={};h.headers=c,p("delete",`https://${o}${this.privRestPath}`,a,null,h,(e=>{e.ok,i()}))}catch(e){if(e instanceof Error){const t=e;o(t.name+": "+t.message)}else o(e)}}))}}var u=i(2389),d=i(2605),v=i(3625),l=i(4571),f=i(3333),g=i(4067),S=i(5487),m=i(92),C=i(6645);class y extends C.H{constructor(e,t,i,r){super(e,t,i,r);const n=JSON.parse(this.textBody);void 0!==n.type&&(this.privConversationMessageType=n.type)}get conversationMessageType(){return this.privConversationMessageType}}class P{constructor(){this.toConnectionMessage=e=>{const t=new d.Deferred;try{if(e.messageType===C.C.Text){const i=new y(e.messageType,e.textContent,{},e.id);t.resolve(i)}else e.messageType===C.C.Binary&&t.resolve(new y(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},this.fromConnectionMessage=e=>{const t=new d.Deferred;try{if(e.messageType===C.C.Text){const i=""+(e.textBody?e.textBody:"");t.resolve(new d.RawWebsocketMessage(C.C.Text,i,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise}}}class R extends m._{create(e,t,i){const o=e.parameters.getProperty(n.o.ConversationTranslator_Host,s.host),a=e.parameters.getProperty(n.o.ConversationTranslator_CorrelationId,(0,S.c)()),c=`wss://${o}${s.webSocketPath}`,p=e.parameters.getProperty(n.o.ConversationTranslator_Token,void 0);r.a.throwIfNullOrUndefined(p,"token");const h={};h[s.configParams.apiVersion]=s.apiVersion,h[s.configParams.token]=p,h[s.configParams.correlationId]=a;const u="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new g.WebsocketConnection(c,h,{},new P,g.ProxyInfo.fromRecognizerConfig(e),u,i)}}var w=i(6550),E=i(8563),T=i(7469),I=i(454),b=i(6523),O=i(649);class A{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.onPreConnectionStart=(e,t)=>{this.privSessionId=t},this.onAuthCompleted=(e,t)=>{e&&this.onComplete()},this.onConnectionEstablishCompleted=(e,t)=>{200!==e&&403===e&&this.onComplete()},this.onServiceTurnEndResponse=e=>{e?this.privRequestId=(0,S.Q)():this.onComplete()},this.onComplete=()=>{},this.privSessionId=e,this.privRequestId=(0,S.Q)(),this.privRequestCompletionDeferral=new d.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}dispose(e){return t=this,i=void 0,n=function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}},new((r=void 0)||(r=Promise))((function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,a)}c((n=n.apply(t,i||[])).next())}));var t,i,r,n}}var k=i(7841);class x extends k.${constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}class D extends k.${constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}class M extends k.${constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}class z extends k.${constructor(e,t,i,r){super(r),this.privKey=t,this.privValue=i,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}class L extends k.${constructor(e,t,i,r,n,o,s,a,c){super(c),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=i,this.privProfanityFilter=r,this.privRoomProfanityFilter=n,this.privIsRoomLocked=o,this.privIsRoomLocked=s,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}class N{constructor(e,t,i){this.privPayload=t,this.privCommand=e,this.privSessionId=i}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}class _{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex((t=>t.id===e))}getParticipant(e){return this.participants.find((t=>t.id===e))}deleteParticipant(e){this.participants=this.participants.filter((t=>t.id!==e))}get host(){return this.participants.find((e=>!0===e.isHost))}get me(){return this.getParticipant(this.meId)}}const B={command:"command",final:"final",info:"info",instantMessage:"instant_message",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},F={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};class U{constructor(e){this.privCommandResponse=JSON.parse(e)}static fromJSON(e){return new U(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}}class H{constructor(e){this.privParticipantsPayloadResponse=JSON.parse(e)}static fromJSON(e){return new H(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}}class q{constructor(e){this.privParticipantPayloadResponse=JSON.parse(e)}static fromJSON(e){return new q(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}}class W{constructor(e){this.privSpeechResponse=JSON.parse(e)}static fromJSON(e){return new W(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}}class K{constructor(e){this.privTextResponse=JSON.parse(e)}static fromJSON(e){return new K(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}}var V=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class j extends u.ServiceRecognizerBase{constructor(e,t,i,r,n){super(e,t,i,r,n),this.privLastPartialUtteranceId="",this.noOp=()=>{},this.privConversationServiceConnector=n,this.privConversationAuthentication=e,this.receiveMessageOverride=this.receiveConversationMessageOverride,this.recognizeOverride=this.noOp,this.postConnectImplOverride=this.conversationConnectImpl,this.configConnectionOverride=this.configConnection,this.disconnectOverride=this.privDisconnect,this.privConversationRequestSession=new A((0,S.Q)()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return V(this,void 0,void 0,(function*(){if(this.privConversationIsDisposed=!0,this.privConnectionConfigPromise){const t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield t.dispose.call(this,e)}))}sendMessage(e){return V(this,void 0,void 0,(function*(){return(yield this.fetchConnection()).send(new y(C.C.Text,e))}))}sendMessageAsync(e){return V(this,void 0,void 0,(function*(){new d.Deferred;const t=yield this.fetchConnection();yield t.send(new y(C.C.Text,e))}))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,w._.Error,E.E.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(e,t,i){return V(this,void 0,void 0,(function*(){return!0}))}cancelRecognition(e,t,i,r,n){this.terminateMessageLoop=!0;const o=new T.O(i,n,r,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(e){}}conversationConnectImpl(e){return V(this,void 0,void 0,(function*(){return this.privConnectionLoop=this.startMessageLoop(),e}))}receiveConversationMessageOverride(){return V(this,void 0,void 0,(function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const e=new d.Deferred;try{const t=yield this.fetchConnection(),i=yield t.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();const r=this.privConversationRequestSession.sessionId;let n=!1;try{switch(i.conversationMessageType.toLowerCase()){case"info":case"participant_command":case"command":const e=U.fromJSON(i.textBody);switch(e.command.toLowerCase()){case"participantlist":const t=H.fromJSON(i.textBody),n=t.participants.map((e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale})));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new L(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,n,r));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new z(e.participantId,F.setTranslateToLanguages,e.value,r));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new z(e.participantId,F.setProfanityFiltering,e.value,r));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new z(e.participantId,F.setMute,e.value,r));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new x(e.value,r));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new I.i(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new z(e.participantId,F.setUseTTS,e.value,r));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new D(e.value,r));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new z(e.participantId,F.changeNickname,e.nickname,r));break;case"joinsession":const o=q.fromJSON(i.textBody),s={avatar:o.avatar,displayName:o.nickname,id:o.participantId,isHost:o.ishost,isMuted:o.ismuted,isUsingTts:o.usetts,preferredLanguage:o.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new M(s,r));break;case"leavesession":const a={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new M(a,r));break;case"disconnectsession":e.participantId}break;case"partial":case"final":const t=W.fromJSON(i.textBody),o=new b.M(t.participantId,this.getTranslations(t.translations),t.language,void 0,void 0,t.recognition,void 0,void 0,i.textBody,void 0);t.isFinal?((void 0!==o.text&&o.text.length>0||t.id===this.privLastPartialUtteranceId)&&(n=!0),n&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new N(B.final,o,r))):void 0!==o.text&&(this.privLastPartialUtteranceId=t.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new N(B.partial,o,r)));break;case"translated_message":const s=K.fromJSON(i.textBody),a=new b.M(s.participantId,this.getTranslations(s.translations),s.language,void 0,void 0,s.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new N(B.instantMessage,a,r))}}catch(e){}return this.receiveConversationMessageOverride()}catch(e){this.terminateMessageLoop=!0}return e.promise}))}startMessageLoop(){return V(this,void 0,void 0,(function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return yield e}catch(e){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",w._.Error,E.E.RuntimeError,e),null}}))}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((e=>e.state()===d.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=null,this.configConnection()):this.privConnectionConfigPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigPromise=null,this.configConnection()))):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((e=>e)),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e){t=new O.Z;for(const i of e)t.set(i.lang,i.translation)}return t}}var J=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Y{static fromConfig(e,t){return new G(e,t)}}class G extends l.c{constructor(e,t){const i=e;r.a.throwIfNull(i,"speechConfig"),super(t,i.properties,new R),this.privIsDisposed=!1,this.privProperties=i.properties.clone(),this.privConnection=f.e.fromRecognizer(this)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,i){try{r.a.throwIfDisposed(this.privIsDisposed),r.a.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.privReco.connectAsync(t,i)}catch(e){if(i)if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}}disconnect(e,t){try{r.a.throwIfDisposed(this.privIsDisposed),this.privReco.disconnect().then((()=>{e&&e()}),(e=>{t&&t(e)}))}catch(e){if(t)if(e instanceof Error){const i=e;t(i.name+": "+i.message)}else t(e);this.dispose(!0).catch((e=>{v.z.instance.onEvent(new d.BackgroundEvent(e))}))}}sendRequest(e,t,i){try{r.a.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,i)}catch(e){if(i)if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e);this.dispose(!0).catch((e=>{v.z.instance.onEvent(new d.BackgroundEvent(e))}))}}close(){var e,t;return J(this,void 0,void 0,(function*(){r.a.throwIfDisposed(this.privIsDisposed),null===(e=this.privConnection)||void 0===e||e.closeConnection(),null===(t=this.privConnection)||void 0===t||t.close(),this.privConnection=void 0,yield this.dispose(!0)}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return J(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new u.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,r){return new j(e,t,i,r,this)}sendMessage(e,t,i){!function(e,t,i){e?e.then((e=>{try{t&&t()}catch(e){i&&i(`'Unhandled error on promise callback: ${e}'`)}}),(e=>{try{i&&i(e)}catch(e){}})):i&&i("Null promise")}(this.privReco.sendMessageAsync(e),t,i)}}var Q=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class $ extends l.c{constructor(e,t){const i=e;r.a.throwIfNull(i,"speechTranslationConfig"),r.a.throwIfNullOrWhitespace(i.speechRecognitionLanguage,n.o[n.o.SpeechServiceConnection_RecoLanguage]),super(t,i.properties,new u.TranscriberConnectionFactory),this.privDisposedRecognizer=!1}getConversationInfo(){return r.a.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}get authorizationToken(){return this.properties.getProperty(n.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(n.o.SpeechServiceAuthorization_Token,e)}set conversation(e){r.a.throwIfNullOrUndefined(e,"Conversation"),this.privConversation=e}get speechRecognitionLanguage(){return r.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.o.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}startContinuousRecognitionAsync(e,t){(0,d.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(u.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){(0,d.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(){return Q(this,void 0,void 0,(function*(){r.a.throwIfDisposed(this.privDisposedRecognizer),yield this.dispose(!0)}))}pushConversationEvent(e,t){return Q(this,void 0,void 0,(function*(){const i=this.privReco;r.a.throwIfNullOrUndefined(i,"serviceRecognizer"),yield i.sendSpeechEventAsync(e,t)}))}connectCallbacks(e){this.canceled=(t,i)=>{e.canceled&&e.canceled(e,i)},this.recognizing=(t,i)=>{e.transcribing&&e.transcribing(e,i)},this.recognized=(t,i)=>{e.transcribed&&e.transcribed(e,i)},this.sessionStarted=(t,i)=>{e.sessionStarted&&e.sessionStarted(e,i)},this.sessionStopped=(t,i)=>{e.sessionStopped&&e.sessionStopped(e,i)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return Q(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new u.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,i,r){const n=i;return new u.TranscriptionServiceRecognizer(e,t,n,r,this)}}},6477:(e,t,i)=>{"use strict";i.d(t,{x:()=>p});var r=i(4067),n=i(5453),o=i(92),s=i(2389),a=i(4257),c=i(9906);class p extends o._{constructor(){super(...arguments),this.create=(e,t,i)=>{let o=e.parameters.getProperty(n.o.SpeechServiceConnection_Endpoint,void 0);if(!o){const t=e.parameters.getProperty(n.o.SpeechServiceConnection_Region,void 0),i=t&&t.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";o=e.parameters.getProperty(n.o.SpeechServiceConnection_Host,"wss://"+t+".s2s.speech"+i)+"/speech/translation/cognitiveservices/v1"}const p={from:e.parameters.getProperty(n.o.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(n.o.SpeechServiceConnection_TranslationToLanguages)};this.setCommonUrlParams(e,p,o),this.setUrlParameter(n.o.SpeechServiceResponse_TranslationRequestStablePartialResult,c.o.StableTranslation,e,p,o),void 0!==e.parameters.getProperty(n.o.SpeechServiceConnection_TranslationVoice,void 0)&&(p.voice=e.parameters.getProperty(n.o.SpeechServiceConnection_TranslationVoice),p.features="texttospeech");const h={};void 0!==t.token&&""!==t.token&&(h[t.headerName]=t.token),h[a.S.ConnectionId]=i,e.parameters.setProperty(n.o.SpeechServiceConnection_Url,o);const u="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(o,p,h,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),u,i)}}}},3326:(e,t,i)=>{"use strict";i.d(t,{h:()=>m});var r=i(6645),n=i(3133),o=i(2874),s=i(5453),a=i(3465),c=i(1048),p=i(3062),h=i(5890),u=i(5250),d=i(7762),v=i(6550),l=i(8563),f=i(649),g=i(2389),S=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class m extends g.ServiceRecognizerBase{constructor(e,t,i,r,n){super(e,t,i,r,n),this.privTranslationRecognizer=n,this.connectionEvents.attach((e=>S(this,void 0,void 0,(function*(){"ConnectionEstablishedEvent"===e.name?this.privTranslationRecognizer.onConnection():"ConnectionClosedEvent"===e.name&&(yield this.privTranslationRecognizer.onDisconnection())}))))}processTypeSpecificMessages(e){return S(this,void 0,void 0,(function*(){const t=new o.O;let i=!1;switch(e.messageType===r.C.Text&&t.setProperty(s.o.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":const r=this.fireEventForResult(g.TranslationHypothesis.fromJSON(e.textBody),t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+r.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,r)}catch(e){}i=!0;break;case"translation.phrase":const n=g.TranslationPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus===g.RecognitionStatus.Success){const e=this.fireEventForResult(n,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}break}{const i=g.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus),r=new a.r(void 0,this.privRequestSession.requestId,i,n.Text,n.Duration,this.privRequestSession.currentTurnAudioOffset+n.Offset,void 0,e.textBody,t);if(i===c.s.Canceled){const e=g.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus);yield this.cancelRecognitionLocal(e,g.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||i!==c.s.NoMatch||n.RecognitionStatus===g.RecognitionStatus.InitialSilenceTimeout){const e=new p.s(r,r.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(r)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}i=!0;break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"translation.synthesis.end":const o=g.TranslationSynthesisEnd.fromJSON(e.textBody);switch(o.SynthesisStatus){case g.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const e=new h.S(c.s.Canceled,void 0),t=new u.v(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(e){}}if(this.privTranslationRecognizer.canceled){const e=new d.j(this.privRequestSession.sessionId,v._.Error,o.FailureReason,l.E.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(e){}}break;case g.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}i=!0}return i}))}cancelRecognition(e,t,i,r,n){const s=new o.O;if(s.setProperty(g.oo,l.E[r]),this.privTranslationRecognizer.canceled){const t=new d.j(e,i,n,r,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new a.r(void 0,t,c.s.Canceled,void 0,void 0,void 0,n,void 0,s);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}fireEventForResult(e,t){let i,r;if(void 0!==e.Translation.Translations){i=new f.Z;for(const t of e.Translation.Translations)i.set(t.Language,t.Text)}r=e instanceof g.TranslationPhrase?e.Translation.TranslationStatus===n.Y.Success?c.s.TranslatedSpeech:c.s.RecognizedSpeech:c.s.TranslatingSpeech;const o=e.Offset+this.privRequestSession.currentTurnAudioOffset,s=new a.r(i,this.privRequestSession.requestId,r,e.Text,e.Duration,o,e.Translation.FailureReason,JSON.stringify(e),t);return new p.s(s,o,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const i=void 0===e?c.s.SynthesizingAudioCompleted:c.s.SynthesizingAudio,r=new h.S(i,e),n=new u.v(r,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,n)}catch(e){}}}},3133:(e,t,i)=>{"use strict";var r;i.d(t,{Y:()=>r}),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={}))},5610:(e,t,i)=>{"use strict";i.d(t,{D:()=>o});var r=i(2605),n=i(6645);class o{constructor(){this.toConnectionMessage=e=>{const t=new r.Deferred;try{if(e.messageType===n.C.Text){const i=e.textContent;let r={},o=null;if(i){const e=i.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(o=e[1]))}t.resolve(new n.H(e.messageType,o,r,e.id))}else if(e.messageType===n.C.Binary){const i=e.binaryContent;let r={},o=null;if(!i||i.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const s=new DataView(i),a=s.getInt16(0);if(i.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(s.getInt8(e+2));r=this.parseHeaders(c),i.byteLength>a+2&&(o=i.slice(2+a)),t.resolve(new n.H(e.messageType,o,r,e.id))}}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},this.fromConnectionMessage=e=>{const t=new r.Deferred;try{if(e.messageType===n.C.Text){const i=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new r.RawWebsocketMessage(n.C.Text,i,e.id))}else if(e.messageType===n.C.Binary){const i=this.makeHeaders(e),o=e.binaryBody,s=this.stringToArrayBuffer(i),a=new Int8Array(s),c=a.byteLength,p=new Int8Array(2+c+(o?o.byteLength:0));if(p[0]=c>>8&255,p[1]=255&c,p.set(a,2),o){const e=new Int8Array(o);p.set(e,2+c)}const h=p.buffer;t.resolve(new r.RawWebsocketMessage(n.C.Binary,h,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise},this.makeHeaders=e=>{let t="";if(e.headers)for(const i in e.headers)i&&(t+=`${i}: ${e.headers[i]}\r\n`);return t},this.parseHeaders=e=>{const t={};if(e){const i=e.match(/[^\r\n]+/g);if(t)for(const e of i)if(e){const i=e.indexOf(":"),r=i>0?e.substr(0,i).trim().toLowerCase():e,n=i>0&&e.length>i+1?e.substr(i+1).trim():"";t[r]=n}}return t},this.stringToArrayBuffer=e=>{const t=new ArrayBuffer(e.length),i=new DataView(t);for(let t=0;t<e.length;t++)i.setUint8(t,e.charCodeAt(t));return t}}}},6582:(e,t,i)=>{"use strict";i.d(t,{QZ:()=>o,Jl:()=>s,ls:()=>a,n0:()=>c,i5:()=>h,sQ:()=>u,He:()=>d,hA:()=>v});var r=i(4300);class n extends r.A{constructor(e,t,i=r.t.Info){super(e,i),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class o extends n{constructor(e){super("AudioSourceInitializingEvent",e)}}class s extends n{constructor(e){super("AudioSourceReadyEvent",e)}}class a extends n{constructor(e){super("AudioSourceOffEvent",e)}}class c extends n{constructor(e,t){super("AudioSourceErrorEvent",e,r.t.Error),this.privError=t}get error(){return this.privError}}class p extends n{constructor(e,t,i){super(e,t),this.privAudioNodeId=i}get audioNodeId(){return this.privAudioNodeId}}class h extends p{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class u extends p{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class d extends p{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class v extends p{constructor(e,t,i){super("AudioStreamNodeErrorEvent",e,t),this.privError=i}get error(){return this.privError}}},9187:(e,t,i)=>{"use strict";i.d(t,{u:()=>n});var r=i(2605);class n extends r.PlatformEvent{constructor(e){super("BackgroundEvent",r.EventType.Error),this.privError=e}get error(){return this.privError}}},5038:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});var r=i(2605);class n extends r.Stream{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const i=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),n=new Uint8Array(e.buffer.slice(t,i+t));r.set(n,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=i,t+=i,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}},1945:(e,t,i)=>{"use strict";i.d(t,{e2:()=>n,YF:()=>s,Zk:()=>a,PE:()=>c,K4:()=>p,xz:()=>h,Qz:()=>u,w2:()=>d});var r=i(4300);class n extends r.A{constructor(e,t,i=r.t.Info){super(e,i),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class o extends r.A{constructor(e,t,i=r.t.Info){super(e,i),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class s extends o{constructor(e,t,i){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=i}get uri(){return this.privUri}get headers(){return this.privHeaders}}class a extends o{constructor(e,t){super("ConnectionEstablishedEvent",e)}}class c extends o{constructor(e,t,i){super("ConnectionClosedEvent",e,r.t.Debug),this.privReason=i,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class p extends o{constructor(e,t,i){super("ConnectionErrorEvent",e,r.t.Debug),this.privMessage=t,this.privType=i}get message(){return this.privMessage}get type(){return this.privType}}class h extends o{constructor(e,t,i){super("ConnectionEstablishErrorEvent",e,r.t.Error),this.privStatusCode=t,this.privReason=i}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class u extends o{constructor(e,t,i){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=i}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class d extends o{constructor(e,t,i){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=i}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},6645:(e,t,i)=>{"use strict";i.d(t,{C:()=>r,H:()=>s});var r,n=i(491),o=i(5487);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(r||(r={}));class s{constructor(e,t,i,s){if(this.privBody=null,e===r.Text&&t&&"string"!=typeof t)throw new n.$2("Payload must be a string");if(e===r.Binary&&t&&!(t instanceof ArrayBuffer))throw new n.$2("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=i||{},this.privId=s||(0,o.Q)(),this.messageType){case r.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new n.$2("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new n.$2("Not supported for text message");return this.privBody}get id(){return this.privId}}},491:(e,t,i)=>{"use strict";i.d(t,{Do:()=>r,$2:()=>n,IV:()=>o});class r extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class n extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class o extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}},8232:(e,t,i)=>{"use strict";i.d(t,{n:()=>o});var r=i(491),n=i(5487);class o{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=e=>{if(this.isDisposed())throw new r.IV("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)},this.attach=e=>{const t=(0,n.Q)();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}},this.attachListener=e=>this.attach(e.onEvent),this.isDisposed=()=>this.privIsDisposed,this.dispose=()=>{this.privEventListeners=null,this.privIsDisposed=!0},this.privMetadata=e}get metadata(){return this.privMetadata}}},3625:(e,t,i)=>{"use strict";i.d(t,{z:()=>o});var r=i(491),n=i(8232);class o{static get instance(){return o.privInstance}}o.privInstance=new n.n,o.setEventSource=e=>{if(!e)throw new r.Do("eventSource");o.privInstance=e}},2605:(e,t,i)=>{"use strict";i.d(t,{ConnectionState:()=>n.e,EventType:()=>d.t,PlatformEvent:()=>d.A,Deferred:()=>v.BH,marshalPromiseToCallbacks:()=>v.Kb,Queue:()=>l.c,RawWebsocketMessage:()=>f.S,RiffPcmEncoder:()=>g.S,Stream:()=>S.F,ChunkedArrayBufferStream:()=>m.L,Timeout:()=>y.V,OCSPCacheEntryExpiredEvent:()=>P.Be,OCSPCacheEntryNeedsRefreshEvent:()=>P.fH,OCSPCacheFetchErrorEvent:()=>P.su,OCSPCacheHitEvent:()=>P.YS,OCSPCacheMissEvent:()=>P.cs,OCSPCacheUpdateNeededEvent:()=>P.v,OCSPCacheUpdatehCompleteEvent:()=>P.Yk,OCSPDiskCacheHitEvent:()=>P.HP,OCSPDiskCacheStoreEvent:()=>P._G,OCSPMemoryCacheHitEvent:()=>P.L9,OCSPMemoryCacheStoreEvent:()=>P.PT,OCSPResponseRetrievedEvent:()=>P.bY,OCSPStapleReceivedEvent:()=>P.Qj,OCSPVerificationFailedEvent:()=>P.sp,BackgroundEvent:()=>R.u});var r=i(4947);i.o(r,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return r.BackgroundEvent}}),i.o(r,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return r.ChunkedArrayBufferStream}}),i.o(r,"ConnectionState")&&i.d(t,{ConnectionState:function(){return r.ConnectionState}}),i.o(r,"Deferred")&&i.d(t,{Deferred:function(){return r.Deferred}}),i.o(r,"EventType")&&i.d(t,{EventType:function(){return r.EventType}}),i.o(r,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return r.OCSPCacheEntryExpiredEvent}}),i.o(r,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return r.OCSPCacheEntryNeedsRefreshEvent}}),i.o(r,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return r.OCSPCacheFetchErrorEvent}}),i.o(r,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return r.OCSPCacheHitEvent}}),i.o(r,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return r.OCSPCacheMissEvent}}),i.o(r,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return r.OCSPCacheUpdateNeededEvent}}),i.o(r,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return r.OCSPCacheUpdatehCompleteEvent}}),i.o(r,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return r.OCSPDiskCacheHitEvent}}),i.o(r,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return r.OCSPDiskCacheStoreEvent}}),i.o(r,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return r.OCSPMemoryCacheHitEvent}}),i.o(r,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return r.OCSPMemoryCacheStoreEvent}}),i.o(r,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return r.OCSPResponseRetrievedEvent}}),i.o(r,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return r.OCSPStapleReceivedEvent}}),i.o(r,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return r.OCSPVerificationFailedEvent}}),i.o(r,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return r.PlatformEvent}}),i.o(r,"Queue")&&i.d(t,{Queue:function(){return r.Queue}}),i.o(r,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return r.RawWebsocketMessage}}),i.o(r,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return r.RiffPcmEncoder}}),i.o(r,"Stream")&&i.d(t,{Stream:function(){return r.Stream}}),i.o(r,"Timeout")&&i.d(t,{Timeout:function(){return r.Timeout}}),i.o(r,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return r.marshalPromiseToCallbacks}});var n=i(3842),o=i(4503);i.o(o,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return o.BackgroundEvent}}),i.o(o,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return o.ChunkedArrayBufferStream}}),i.o(o,"Deferred")&&i.d(t,{Deferred:function(){return o.Deferred}}),i.o(o,"EventType")&&i.d(t,{EventType:function(){return o.EventType}}),i.o(o,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return o.OCSPCacheEntryExpiredEvent}}),i.o(o,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return o.OCSPCacheEntryNeedsRefreshEvent}}),i.o(o,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return o.OCSPCacheFetchErrorEvent}}),i.o(o,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return o.OCSPCacheHitEvent}}),i.o(o,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return o.OCSPCacheMissEvent}}),i.o(o,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return o.OCSPCacheUpdateNeededEvent}}),i.o(o,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return o.OCSPCacheUpdatehCompleteEvent}}),i.o(o,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return o.OCSPDiskCacheHitEvent}}),i.o(o,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return o.OCSPDiskCacheStoreEvent}}),i.o(o,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return o.OCSPMemoryCacheHitEvent}}),i.o(o,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return o.OCSPMemoryCacheStoreEvent}}),i.o(o,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return o.OCSPResponseRetrievedEvent}}),i.o(o,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return o.OCSPStapleReceivedEvent}}),i.o(o,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return o.OCSPVerificationFailedEvent}}),i.o(o,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return o.PlatformEvent}}),i.o(o,"Queue")&&i.d(t,{Queue:function(){return o.Queue}}),i.o(o,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return o.RawWebsocketMessage}}),i.o(o,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return o.RiffPcmEncoder}}),i.o(o,"Stream")&&i.d(t,{Stream:function(){return o.Stream}}),i.o(o,"Timeout")&&i.d(t,{Timeout:function(){return o.Timeout}}),i.o(o,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return o.marshalPromiseToCallbacks}});var s=i(2671);i.o(s,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return s.BackgroundEvent}}),i.o(s,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return s.ChunkedArrayBufferStream}}),i.o(s,"Deferred")&&i.d(t,{Deferred:function(){return s.Deferred}}),i.o(s,"EventType")&&i.d(t,{EventType:function(){return s.EventType}}),i.o(s,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return s.OCSPCacheEntryExpiredEvent}}),i.o(s,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return s.OCSPCacheEntryNeedsRefreshEvent}}),i.o(s,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return s.OCSPCacheFetchErrorEvent}}),i.o(s,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return s.OCSPCacheHitEvent}}),i.o(s,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return s.OCSPCacheMissEvent}}),i.o(s,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return s.OCSPCacheUpdateNeededEvent}}),i.o(s,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return s.OCSPCacheUpdatehCompleteEvent}}),i.o(s,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return s.OCSPDiskCacheHitEvent}}),i.o(s,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return s.OCSPDiskCacheStoreEvent}}),i.o(s,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return s.OCSPMemoryCacheHitEvent}}),i.o(s,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return s.OCSPMemoryCacheStoreEvent}}),i.o(s,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return s.OCSPResponseRetrievedEvent}}),i.o(s,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return s.OCSPStapleReceivedEvent}}),i.o(s,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return s.OCSPVerificationFailedEvent}}),i.o(s,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return s.PlatformEvent}}),i.o(s,"Queue")&&i.d(t,{Queue:function(){return s.Queue}}),i.o(s,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return s.RawWebsocketMessage}}),i.o(s,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return s.RiffPcmEncoder}}),i.o(s,"Stream")&&i.d(t,{Stream:function(){return s.Stream}}),i.o(s,"Timeout")&&i.d(t,{Timeout:function(){return s.Timeout}}),i.o(s,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return s.marshalPromiseToCallbacks}});var a=i(3725);i.o(a,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return a.BackgroundEvent}}),i.o(a,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return a.ChunkedArrayBufferStream}}),i.o(a,"Deferred")&&i.d(t,{Deferred:function(){return a.Deferred}}),i.o(a,"EventType")&&i.d(t,{EventType:function(){return a.EventType}}),i.o(a,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return a.OCSPCacheEntryExpiredEvent}}),i.o(a,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return a.OCSPCacheEntryNeedsRefreshEvent}}),i.o(a,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return a.OCSPCacheFetchErrorEvent}}),i.o(a,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return a.OCSPCacheHitEvent}}),i.o(a,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return a.OCSPCacheMissEvent}}),i.o(a,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return a.OCSPCacheUpdateNeededEvent}}),i.o(a,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return a.OCSPCacheUpdatehCompleteEvent}}),i.o(a,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return a.OCSPDiskCacheHitEvent}}),i.o(a,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return a.OCSPDiskCacheStoreEvent}}),i.o(a,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return a.OCSPMemoryCacheHitEvent}}),i.o(a,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return a.OCSPMemoryCacheStoreEvent}}),i.o(a,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return a.OCSPResponseRetrievedEvent}}),i.o(a,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return a.OCSPStapleReceivedEvent}}),i.o(a,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return a.OCSPVerificationFailedEvent}}),i.o(a,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return a.PlatformEvent}}),i.o(a,"Queue")&&i.d(t,{Queue:function(){return a.Queue}}),i.o(a,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return a.RawWebsocketMessage}}),i.o(a,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return a.RiffPcmEncoder}}),i.o(a,"Stream")&&i.d(t,{Stream:function(){return a.Stream}}),i.o(a,"Timeout")&&i.d(t,{Timeout:function(){return a.Timeout}}),i.o(a,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return a.marshalPromiseToCallbacks}});var c=i(770);i.o(c,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return c.BackgroundEvent}}),i.o(c,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return c.ChunkedArrayBufferStream}}),i.o(c,"Deferred")&&i.d(t,{Deferred:function(){return c.Deferred}}),i.o(c,"EventType")&&i.d(t,{EventType:function(){return c.EventType}}),i.o(c,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return c.OCSPCacheEntryExpiredEvent}}),i.o(c,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return c.OCSPCacheEntryNeedsRefreshEvent}}),i.o(c,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return c.OCSPCacheFetchErrorEvent}}),i.o(c,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return c.OCSPCacheHitEvent}}),i.o(c,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return c.OCSPCacheMissEvent}}),i.o(c,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return c.OCSPCacheUpdateNeededEvent}}),i.o(c,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return c.OCSPCacheUpdatehCompleteEvent}}),i.o(c,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return c.OCSPDiskCacheHitEvent}}),i.o(c,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return c.OCSPDiskCacheStoreEvent}}),i.o(c,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return c.OCSPMemoryCacheHitEvent}}),i.o(c,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return c.OCSPMemoryCacheStoreEvent}}),i.o(c,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return c.OCSPResponseRetrievedEvent}}),i.o(c,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return c.OCSPStapleReceivedEvent}}),i.o(c,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return c.OCSPVerificationFailedEvent}}),i.o(c,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return c.PlatformEvent}}),i.o(c,"Queue")&&i.d(t,{Queue:function(){return c.Queue}}),i.o(c,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return c.RawWebsocketMessage}}),i.o(c,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return c.RiffPcmEncoder}}),i.o(c,"Stream")&&i.d(t,{Stream:function(){return c.Stream}}),i.o(c,"Timeout")&&i.d(t,{Timeout:function(){return c.Timeout}}),i.o(c,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return c.marshalPromiseToCallbacks}});var p=i(5882);i.o(p,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return p.BackgroundEvent}}),i.o(p,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return p.ChunkedArrayBufferStream}}),i.o(p,"Deferred")&&i.d(t,{Deferred:function(){return p.Deferred}}),i.o(p,"EventType")&&i.d(t,{EventType:function(){return p.EventType}}),i.o(p,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return p.OCSPCacheEntryExpiredEvent}}),i.o(p,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return p.OCSPCacheEntryNeedsRefreshEvent}}),i.o(p,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return p.OCSPCacheFetchErrorEvent}}),i.o(p,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return p.OCSPCacheHitEvent}}),i.o(p,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return p.OCSPCacheMissEvent}}),i.o(p,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return p.OCSPCacheUpdateNeededEvent}}),i.o(p,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return p.OCSPCacheUpdatehCompleteEvent}}),i.o(p,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return p.OCSPDiskCacheHitEvent}}),i.o(p,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return p.OCSPDiskCacheStoreEvent}}),i.o(p,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return p.OCSPMemoryCacheHitEvent}}),i.o(p,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return p.OCSPMemoryCacheStoreEvent}}),i.o(p,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return p.OCSPResponseRetrievedEvent}}),i.o(p,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return p.OCSPStapleReceivedEvent}}),i.o(p,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return p.OCSPVerificationFailedEvent}}),i.o(p,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return p.PlatformEvent}}),i.o(p,"Queue")&&i.d(t,{Queue:function(){return p.Queue}}),i.o(p,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return p.RawWebsocketMessage}}),i.o(p,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return p.RiffPcmEncoder}}),i.o(p,"Stream")&&i.d(t,{Stream:function(){return p.Stream}}),i.o(p,"Timeout")&&i.d(t,{Timeout:function(){return p.Timeout}}),i.o(p,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return p.marshalPromiseToCallbacks}});var h=i(4502);i.o(h,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return h.BackgroundEvent}}),i.o(h,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return h.ChunkedArrayBufferStream}}),i.o(h,"Deferred")&&i.d(t,{Deferred:function(){return h.Deferred}}),i.o(h,"EventType")&&i.d(t,{EventType:function(){return h.EventType}}),i.o(h,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return h.OCSPCacheEntryExpiredEvent}}),i.o(h,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return h.OCSPCacheEntryNeedsRefreshEvent}}),i.o(h,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return h.OCSPCacheFetchErrorEvent}}),i.o(h,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return h.OCSPCacheHitEvent}}),i.o(h,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return h.OCSPCacheMissEvent}}),i.o(h,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return h.OCSPCacheUpdateNeededEvent}}),i.o(h,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return h.OCSPCacheUpdatehCompleteEvent}}),i.o(h,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return h.OCSPDiskCacheHitEvent}}),i.o(h,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return h.OCSPDiskCacheStoreEvent}}),i.o(h,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return h.OCSPMemoryCacheHitEvent}}),i.o(h,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return h.OCSPMemoryCacheStoreEvent}}),i.o(h,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return h.OCSPResponseRetrievedEvent}}),i.o(h,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return h.OCSPStapleReceivedEvent}}),i.o(h,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return h.OCSPVerificationFailedEvent}}),i.o(h,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return h.PlatformEvent}}),i.o(h,"Queue")&&i.d(t,{Queue:function(){return h.Queue}}),i.o(h,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return h.RawWebsocketMessage}}),i.o(h,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return h.RiffPcmEncoder}}),i.o(h,"Stream")&&i.d(t,{Stream:function(){return h.Stream}}),i.o(h,"Timeout")&&i.d(t,{Timeout:function(){return h.Timeout}}),i.o(h,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return h.marshalPromiseToCallbacks}});var u=i(7130);i.o(u,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return u.BackgroundEvent}}),i.o(u,"ChunkedArrayBufferStream")&&i.d(t,{ChunkedArrayBufferStream:function(){return u.ChunkedArrayBufferStream}}),i.o(u,"Deferred")&&i.d(t,{Deferred:function(){return u.Deferred}}),i.o(u,"EventType")&&i.d(t,{EventType:function(){return u.EventType}}),i.o(u,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return u.OCSPCacheEntryExpiredEvent}}),i.o(u,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return u.OCSPCacheEntryNeedsRefreshEvent}}),i.o(u,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return u.OCSPCacheFetchErrorEvent}}),i.o(u,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return u.OCSPCacheHitEvent}}),i.o(u,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return u.OCSPCacheMissEvent}}),i.o(u,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return u.OCSPCacheUpdateNeededEvent}}),i.o(u,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return u.OCSPCacheUpdatehCompleteEvent}}),i.o(u,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return u.OCSPDiskCacheHitEvent}}),i.o(u,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return u.OCSPDiskCacheStoreEvent}}),i.o(u,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return u.OCSPMemoryCacheHitEvent}}),i.o(u,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return u.OCSPMemoryCacheStoreEvent}}),i.o(u,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return u.OCSPResponseRetrievedEvent}}),i.o(u,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return u.OCSPStapleReceivedEvent}}),i.o(u,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return u.OCSPVerificationFailedEvent}}),i.o(u,"PlatformEvent")&&i.d(t,{PlatformEvent:function(){return u.PlatformEvent}}),i.o(u,"Queue")&&i.d(t,{Queue:function(){return u.Queue}}),i.o(u,"RawWebsocketMessage")&&i.d(t,{RawWebsocketMessage:function(){return u.RawWebsocketMessage}}),i.o(u,"RiffPcmEncoder")&&i.d(t,{RiffPcmEncoder:function(){return u.RiffPcmEncoder}}),i.o(u,"Stream")&&i.d(t,{Stream:function(){return u.Stream}}),i.o(u,"Timeout")&&i.d(t,{Timeout:function(){return u.Timeout}}),i.o(u,"marshalPromiseToCallbacks")&&i.d(t,{marshalPromiseToCallbacks:function(){return u.marshalPromiseToCallbacks}});var d=i(4300),v=i(3182),l=i(847),f=i(6259),g=i(8426),S=i(9595),m=i(5038),C=i(6322);i.o(C,"BackgroundEvent")&&i.d(t,{BackgroundEvent:function(){return C.BackgroundEvent}}),i.o(C,"OCSPCacheEntryExpiredEvent")&&i.d(t,{OCSPCacheEntryExpiredEvent:function(){return C.OCSPCacheEntryExpiredEvent}}),i.o(C,"OCSPCacheEntryNeedsRefreshEvent")&&i.d(t,{OCSPCacheEntryNeedsRefreshEvent:function(){return C.OCSPCacheEntryNeedsRefreshEvent}}),i.o(C,"OCSPCacheFetchErrorEvent")&&i.d(t,{OCSPCacheFetchErrorEvent:function(){return C.OCSPCacheFetchErrorEvent}}),i.o(C,"OCSPCacheHitEvent")&&i.d(t,{OCSPCacheHitEvent:function(){return C.OCSPCacheHitEvent}}),i.o(C,"OCSPCacheMissEvent")&&i.d(t,{OCSPCacheMissEvent:function(){return C.OCSPCacheMissEvent}}),i.o(C,"OCSPCacheUpdateNeededEvent")&&i.d(t,{OCSPCacheUpdateNeededEvent:function(){return C.OCSPCacheUpdateNeededEvent}}),i.o(C,"OCSPCacheUpdatehCompleteEvent")&&i.d(t,{OCSPCacheUpdatehCompleteEvent:function(){return C.OCSPCacheUpdatehCompleteEvent}}),i.o(C,"OCSPDiskCacheHitEvent")&&i.d(t,{OCSPDiskCacheHitEvent:function(){return C.OCSPDiskCacheHitEvent}}),i.o(C,"OCSPDiskCacheStoreEvent")&&i.d(t,{OCSPDiskCacheStoreEvent:function(){return C.OCSPDiskCacheStoreEvent}}),i.o(C,"OCSPMemoryCacheHitEvent")&&i.d(t,{OCSPMemoryCacheHitEvent:function(){return C.OCSPMemoryCacheHitEvent}}),i.o(C,"OCSPMemoryCacheStoreEvent")&&i.d(t,{OCSPMemoryCacheStoreEvent:function(){return C.OCSPMemoryCacheStoreEvent}}),i.o(C,"OCSPResponseRetrievedEvent")&&i.d(t,{OCSPResponseRetrievedEvent:function(){return C.OCSPResponseRetrievedEvent}}),i.o(C,"OCSPStapleReceivedEvent")&&i.d(t,{OCSPStapleReceivedEvent:function(){return C.OCSPStapleReceivedEvent}}),i.o(C,"OCSPVerificationFailedEvent")&&i.d(t,{OCSPVerificationFailedEvent:function(){return C.OCSPVerificationFailedEvent}}),i.o(C,"Timeout")&&i.d(t,{Timeout:function(){return C.Timeout}});var y=i(2309),P=i(3451),R=i(9187)},5487:(e,t,i)=>{"use strict";i.d(t,{c:()=>n,Q:()=>o});var r=i(5877);const n=()=>(0,r.v4)(),o=()=>n().replace(new RegExp("-","g"),"").toUpperCase()},6322:()=>{},4947:()=>{},3842:(e,t,i)=>{"use strict";var r;i.d(t,{e:()=>r}),function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(r||(r={}))},4503:()=>{},2671:()=>{},3725:()=>{},5882:()=>{},770:()=>{},4502:()=>{},7130:()=>{},3451:(e,t,i)=>{"use strict";i.d(t,{L9:()=>o,cs:()=>s,HP:()=>a,v:()=>c,PT:()=>p,_G:()=>h,Yk:()=>u,Qj:()=>d,Be:()=>v,fH:()=>l,YS:()=>f,sp:()=>g,su:()=>S,bY:()=>m,ut:()=>C});var r=i(4300);class n extends r.A{constructor(e,t,i){super(e,t),this.privSignature=i}}class o extends n{constructor(e){super("OCSPMemoryCacheHitEvent",r.t.Debug,e)}}class s extends n{constructor(e){super("OCSPCacheMissEvent",r.t.Debug,e)}}class a extends n{constructor(e){super("OCSPDiskCacheHitEvent",r.t.Debug,e)}}class c extends n{constructor(e){super("OCSPCacheUpdateNeededEvent",r.t.Debug,e)}}class p extends n{constructor(e){super("OCSPMemoryCacheStoreEvent",r.t.Debug,e)}}class h extends n{constructor(e){super("OCSPDiskCacheStoreEvent",r.t.Debug,e)}}class u extends n{constructor(e){super("OCSPCacheUpdatehCompleteEvent",r.t.Debug,e)}}class d extends n{constructor(){super("OCSPStapleReceivedEvent",r.t.Debug,"")}}class v extends n{constructor(e,t){super("OCSPCacheEntryExpiredEvent",r.t.Debug,e),this.privExpireTime=t}}class l extends n{constructor(e,t,i){super("OCSPCacheEntryNeedsRefreshEvent",r.t.Debug,e),this.privExpireTime=i,this.privStartTime=t}}class f extends n{constructor(e,t,i){super("OCSPCacheHitEvent",r.t.Debug,e),this.privExpireTime=i,this.privExpireTimeString=new Date(i).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}class g extends n{constructor(e,t){super("OCSPVerificationFailedEvent",r.t.Debug,e),this.privError=t}}class S extends n{constructor(e,t){super("OCSPCacheFetchErrorEvent",r.t.Debug,e),this.privError=t}}class m extends n{constructor(e){super("OCSPResponseRetrievedEvent",r.t.Debug,e)}}class C extends n{constructor(e,t){super("OCSPCacheUpdateErrorEvent",r.t.Debug,e),this.privError=t}}},4300:(e,t,i)=>{"use strict";i.d(t,{t:()=>r,A:()=>o});var r,n=i(5487);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(r||(r={}));class o{constructor(e,t){this.privName=e,this.privEventId=(0,n.Q)(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},3182:(e,t,i)=>{"use strict";var r;i.d(t,{BH:()=>n,Kb:()=>o}),function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r||(r={}));class n{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}}function o(e,t,i){e.then((e=>{try{t&&t(e)}catch(e){if(i)try{if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}catch(e){}}}),(e=>{if(i)try{if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}catch(e){}}))}},847:(e,t,i)=>{"use strict";i.d(t,{c:()=>c});var r=i(491);class n{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=e=>(this.throwIfDisposed(),this.privList[e]),this.first=()=>this.get(0),this.last=()=>this.get(this.length()-1),this.add=e=>{this.throwIfDisposed(),this.insertAt(this.privList.length,e)},this.insertAt=(e,t)=>{this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)},this.removeFirst=()=>(this.throwIfDisposed(),this.removeAt(0)),this.removeLast=()=>(this.throwIfDisposed(),this.removeAt(this.length()-1)),this.removeAt=e=>(this.throwIfDisposed(),this.remove(e,1)[0]),this.remove=(e,t)=>{this.throwIfDisposed();const i=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),i},this.clear=()=>{this.throwIfDisposed(),this.remove(0,this.length())},this.length=()=>(this.throwIfDisposed(),this.privList.length),this.onAdded=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}},this.onRemoved=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}},this.onDisposed=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}},this.join=e=>(this.throwIfDisposed(),this.privList.join(e)),this.toArray=()=>{const e=Array();return this.privList.forEach((t=>{e.push(t)})),e},this.any=e=>(this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0),this.all=e=>(this.throwIfDisposed(),this.where(e).length()===this.length()),this.forEach=e=>{this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)},this.select=e=>{this.throwIfDisposed();const t=[];for(let i=0;i<this.privList.length;i++)t.push(e(this.privList[i],i));return new n(t)},this.where=e=>{this.throwIfDisposed();const t=new n;for(let i=0;i<this.privList.length;i++)e(this.privList[i],i)&&t.add(this.privList[i]);return t},this.orderBy=e=>{this.throwIfDisposed();const t=this.toArray().sort(e);return new n(t)},this.orderByDesc=e=>(this.throwIfDisposed(),this.orderBy(((t,i)=>e(i,t)))),this.clone=()=>(this.throwIfDisposed(),new n(this.toArray())),this.concat=e=>(this.throwIfDisposed(),new n(this.privList.concat(e.toArray()))),this.concatArray=e=>(this.throwIfDisposed(),new n(this.privList.concat(e))),this.isDisposed=()=>null==this.privList,this.dispose=e=>{this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))},this.throwIfDisposed=()=>{if(this.isDisposed())throw new r.IV("List",this.privDisposeReason)},this.triggerSubscriptions=e=>{if(e)for(const t in e)t&&e[t]()},this.privList=[],e)for(const t of e)this.privList.push(t)}}var o,s=i(3182),a=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(o||(o={}));class c{constructor(e){this.privPromiseStore=new n,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=e=>{this.throwIfDispose(),this.enqueueFromPromise(new Promise(((t,i)=>{t(e)})))},this.enqueueFromPromise=e=>{this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(e=>{}))},this.dequeue=()=>{this.throwIfDispose();const e=new s.BH;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:o.Dequeue}),this.drain()),e.promise},this.peek=()=>{this.throwIfDispose();const e=new s.BH;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:o.Peek}),this.drain()),e.promise},this.length=()=>(this.throwIfDispose(),this.privList.length()),this.isDisposed=()=>null==this.privSubscribers,this.drain=()=>{if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const i=e.removeFirst();if(i.type===o.Peek)i.deferral.resolve(t.first());else{const e=t.removeFirst();i.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}},this.throwIfDispose=()=>{if(this.isDisposed()){if(this.privDisposeReason)throw new r.$2(this.privDisposeReason);throw new r.IV("Queue")}if(this.privIsDisposing)throw new r.$2("Queue disposing")},this.privList=e||new n,this.privDetachables=[],this.privSubscribers=new n,this.privDetachables.push(this.privList.onAdded(this.drain))}drainAndDispose(e,t){return a(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const i=this.privSubscribers;if(i){for(;i.length()>0;)i.removeFirst().deferral.resolve(void 0);this.privSubscribers===i&&(this.privSubscribers=i)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach(((t,i)=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return a(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}}},6259:(e,t,i)=>{"use strict";i.d(t,{S:()=>s});var r=i(6645),n=i(491),o=i(5487);class s{constructor(e,t,i){if(this.privPayload=null,!t)throw new n.Do("payload");if(e===r.C.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new n.$2("Payload must be ArrayBuffer");if(e===r.C.Text&&"string"!=typeof t)throw new n.$2("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=i||(0,o.Q)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.C.Binary)throw new n.$2("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.C.Text)throw new n.$2("Not supported for text message");return this.privPayload}get id(){return this.privId}}},8426:(e,t,i)=>{"use strict";i.d(t,{S:()=>r});class r{constructor(e,t){this.encode=e=>{const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const i=2*t.length,r=new ArrayBuffer(i),n=new DataView(r);return this.floatTo16BitPCM(n,0,t),r},this.setString=(e,t,i)=>{for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))},this.floatTo16BitPCM=(e,t,i)=>{for(let r=0;r<i.length;r++,t+=2){const n=Math.max(-1,Math.min(1,i[r]));e.setInt16(t,n<0?32768*n:32767*n,!0)}},this.downSampleAudioFrame=(e,t,i)=>{if(i===t||i>t)return e;const r=t/i,n=Math.round(e.length/r),o=new Float32Array(n);let s=0,a=0;for(;a<n;){const t=Math.round((a+1)*r);let i=0,n=0;for(;s<t&&s<e.length;)i+=e[s++],n++;o[a++]=i/n}return o},this.privActualSampleRate=e,this.privDesiredSampleRate=t}}},9595:(e,t,i)=>{"use strict";i.d(t,{F:()=>s});var r=i(491),n=i(5487),o=i(847);class s{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=()=>{if(this.privIsReadEnded)throw new r.$2("Stream read has already finished");return this.privReaderQueue.dequeue().then((e=>{return t=this,i=void 0,n=function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e},new((r=void 0)||(r=Promise))((function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,a)}c((n=n.apply(t,i||[])).next())}));var t,i,r,n}))},this.readEnded=()=>{this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new o.c)},this.throwIfClosed=()=>{if(this.privIsWriteEnded)throw new r.$2("Stream closed")},this.privId=e||(0,n.Q)(),this.privReaderQueue=new o.c}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}}},2309:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});class r{}r.workerTimers=null,r.clearTimeout=e=>r.timers().clearTimeout(e),r.setTimeout=(e,t)=>r.timers().setTimeout(e,t),r.load=e=>{const t=new Map([[0,()=>{}]]),i=new Map,n=new Worker(e);return n.addEventListener("message",(({data:e})=>{if(r.isCallNotification(e)){const{params:{timerId:r}}=e,n=t.get(r);if("number"==typeof n){const e=i.get(n);if(void 0===e||e!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===n)throw new Error("The timer is in an undefined state.");n(),t.delete(r)}}else{if(!r.isClearResponse(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:r}=e,n=i.get(r);if(void 0===n)throw new Error("The timer is in an undefined state.");i.delete(r),t.delete(n)}}})),{clearTimeout:e=>{const r=Math.random();i.set(r,e),t.set(e,r),n.postMessage({id:r,method:"clear",params:{timerId:e}})},setTimeout:(e,i)=>{const r=Math.random();return t.set(r,e),n.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:r}}),r}}},r.loadWorkerTimers=()=>()=>{if(null!==r.workerTimers)return r.workerTimers;const e=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return r.workerTimers=r.load(t),r.workerTimers.setTimeout((()=>URL.revokeObjectURL(t)),0),r.workerTimers},r.timers=r.loadWorkerTimers(),r.isCallNotification=e=>void 0!==e.method&&"call"===e.method,r.isClearResponse=e=>null===e.error&&"number"==typeof e.id},3428:(e,t,i)=>{"use strict";i.d(t,{v:()=>r});class r{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},6e3:(e,t,i)=>{"use strict";i.d(t,{rU:()=>u});var r=i(4067),n=i(9513),o=i(4692),s=i(309),a=i(9576),c=i(3946),p=i(1912),h=i(1298);class u{static fromDefaultMicrophoneInput(){const e=new r.PcmRecorder;return new d(new r.MicAudioSource(e))}static fromMicrophoneInput(e){const t=new r.PcmRecorder;return new d(new r.MicAudioSource(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new d(new r.FileAudioSource(e,t))}static fromStreamInput(e){if(e instanceof o.W)return new d(new s.fB(e));if(e instanceof s.yk)return new d(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){const t=new r.PcmRecorder;return new d(new r.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new v(new a.K)}static fromSpeakerOutput(e){if(void 0===e)return u.fromDefaultSpeakerOutput();if(e instanceof a.K)return new v(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new v(new h.O(e))}static fromStreamOutput(e){if(e instanceof c.y)return new v(new p.KS(e));if(e instanceof p.XO)return new v(e);if(e instanceof p.Ao)return new v(e);throw new Error("Not Supported Type")}}class d extends u{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}get blob(){return this.privSource.blob}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(n.a.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class v extends u{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(e,t){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,t){throw new Error("This AudioConfig instance does not support getting properties.")}}},1298:(e,t,i)=>{"use strict";i.d(t,{O:()=>o});var r=i(2993),n=i(9513);class o{constructor(e){this.id=()=>this.privId,n.a.throwIfNullOrUndefined(r.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=r.openSync(e,"w")}set format(e){n.a.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=r.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){n.a.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),r.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),r.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}}},309:(e,t,i)=>{"use strict";i.d(t,{yk:()=>u,ZT:()=>d,kv:()=>l,fB:()=>f});var r=i(2389),n=i(3625),o=i(8232),s=i(2605),a=i(6582),c=i(5487),p=i(3895),h=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(){}static createPushStream(e){return d.create(e)}static createPullStream(e,t){return l.create(e,t)}}class d extends u{static create(e){return new v(e)}}class v extends d{constructor(e){super(),this.onEvent=e=>{this.privEvents.onEvent(e),n.z.instance.onEvent(e)},this.privFormat=void 0===e?p.Bm.getDefaultInputFormat():e,this.privEvents=new o.n,this.privId=(0,c.Q)(),this.privStream=new s.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}get blob(){return this.attach("id").then((e=>{const t=[];let i=Buffer.from("");const r=()=>e.read().then((e=>!e||e.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(t)):Promise.resolve(Buffer.from(i)):("undefined"!=typeof Blob?t.push(e.buffer):i=Buffer.concat([i,this.toBuffer(e.buffer)]),r())));return r()}))}turnOn(){this.onEvent(new a.QZ(this.privId)),this.onEvent(new a.Jl(this.privId))}attach(e){return h(this,void 0,void 0,(function*(){this.onEvent(new a.i5(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new a.sQ(this.privId,e)),{detach:()=>h(this,void 0,void 0,(function*(){return t.readEnded(),this.onEvent(new a.He(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new a.He(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}toBuffer(e){const t=Buffer.alloc(e.byteLength),i=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=i[e];return t}}class l extends u{constructor(){super()}static create(e,t){return new f(e,t)}}class f extends l{constructor(e,t){super(),this.onEvent=e=>{this.privEvents.onEvent(e),n.z.instance.onEvent(e)},this.privFormat=void 0===t?p.HT.getDefaultInputFormat():t,this.privEvents=new o.n,this.privId=(0,c.Q)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}get blob(){return Promise.reject("Not implemented")}turnOn(){this.onEvent(new a.QZ(this.privId)),this.onEvent(new a.Jl(this.privId))}attach(e){return h(this,void 0,void 0,(function*(){return this.onEvent(new a.i5(this.privId,e)),yield this.turnOn(),this.onEvent(new a.sQ(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new a.He(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const i=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(i);if(void 0===e?e=i:new Int8Array(e).set(new Int8Array(i),t),0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new a.He(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}}},5904:(e,t,i)=>{"use strict";i.d(t,{d:()=>o});var r=i(2356),n=i(3895);class o extends n.Bm{constructor(e,t,i,r,n,o,s,a,c){super(i,o,t,e),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=n,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?o.getDefaultOutputFormat():o.fromSpeechSynthesisOutputFormatString(o.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new o(n.WY.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new o(n.WY.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new o(n.WY.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new o(n.WY.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new o(n.WY.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new o(n.WY.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new o(n.WY.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new o(n.WY.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new o(n.WY.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new o(n.WY.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new o(n.WY.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new o(n.WY.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new o(n.WY.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new o(n.WY.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new o(n.WY.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new o(n.WY.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new o(n.WY.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new o(n.WY.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new o(n.WY.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new o(n.WY.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new o(n.WY.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new o(n.WY.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new o(n.WY.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new o(n.WY.WEBM_OPUS,1,16e3,8e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new o(n.WY.WEBM_OPUS,1,24e3,8e3,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new o(n.WY.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new o(n.WY.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new o(n.WY.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"riff-16khz-16bit-mono-pcm":default:return new o(n.WY.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return o.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){this.priHasHeader&&new DataView(this.privHeader).setUint32(40,e,!0)}get requestAudioFormatString(){return this.priRequestAudioFormatString}}o.SpeechSynthesisOutputFormatToString={[r.Y.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.Y.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.Y.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.Y.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.Y.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.Y.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.Y.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.Y.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.Y.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.Y.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.Y.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.Y.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.Y.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.Y.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.Y.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.Y.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.Y.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.Y.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.Y.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.Y.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.Y.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.Y.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.Y.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.Y.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.Y.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.Y.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.Y.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.Y.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.Y.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw"}},1912:(e,t,i)=>{"use strict";i.d(t,{J4:()=>a,Ao:()=>c,NO:()=>p,XO:()=>h,KS:()=>u});var r=i(5487),n=i(2605),o=i(9513),s=i(5904);class a{constructor(){}static createPullStream(){return c.create()}}class c extends a{static create(){return new p}}class p extends c{constructor(){super(),this.privId=(0,r.Q)(),this.privStream=new n.Stream}set format(e){null==e&&(this.privFormat=s.d.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return t=this,i=void 0,n=function*(){const t=new Int8Array(e);let i=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),i=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;i<e.byteLength&&!this.privStream.isReadEnded;){const r=yield this.privStream.read();if(void 0===r||r.isEnd)yield this.privStream.readEnded();else{let n;r.buffer.byteLength>e.byteLength-i?(n=r.buffer.slice(0,e.byteLength-i),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-i))):n=r.buffer,t.set(new Int8Array(n),i),i+=n.byteLength}}return i},new((r=void 0)||(r=Promise))((function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,a)}c((n=n.apply(t,i||[])).next())}));var t,i,r,n}write(e){o.a.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class h extends a{constructor(){super()}static create(e){return new u(e)}}class u extends h{constructor(e){super(),this.privId=(0,r.Q)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}},3895:(e,t,i)=>{"use strict";var r;i.d(t,{WY:()=>r,HT:()=>n,Bm:()=>o}),function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw"}(r||(r={}));class n{static getDefaultInputFormat(){return o.getDefaultInputFormat()}static getWaveFormatPCM(e,t,i){return new o(e,t,i)}}class o extends n{constructor(e=16e3,t=16,i=1,n=r.PCM){switch(super(),this.setString=(e,t,i)=>{for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))},n){case r.PCM:this.formatTag=1;break;case r.ALaw:this.formatTag=6;break;case r.MuLaw:this.formatTag=7}this.bitsPerSample=t,this.samplesPerSec=e,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),this.privHeader=new ArrayBuffer(44);const o=new DataView(this.privHeader);this.setString(o,0,"RIFF"),o.setUint32(4,0,!0),this.setString(o,8,"WAVEfmt "),o.setUint32(16,16,!0),o.setUint16(20,this.formatTag,!0),o.setUint16(22,this.channels,!0),o.setUint32(24,this.samplesPerSec,!0),o.setUint32(28,this.avgBytesPerSec,!0),o.setUint16(32,this.channels*(this.bitsPerSample/8),!0),o.setUint16(34,this.bitsPerSample,!0),this.setString(o,36,"data"),o.setUint32(40,0,!0)}static getDefaultInputFormat(){return new o}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}}},4692:(e,t,i)=>{"use strict";i.d(t,{W:()=>r});class r{}},3946:(e,t,i)=>{"use strict";i.d(t,{y:()=>r});class r{}},9576:(e,t,i)=>{"use strict";i.d(t,{K:()=>u});var r=i(2389),n=i(5487),o=i(3625),s=i(2605),a=i(1912),c=i(3895),p=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h={[c.WY.PCM]:"audio/wav",[c.WY.MuLaw]:"audio/x-wav",[c.WY.MP3]:"audio/mpeg",[c.WY.OGG_OPUS]:"audio/ogg",[c.WY.WEBM_OPUS]:"audio/webm; codecs=opus",[c.WY.ALaw]:"audio/x-wav"};class u{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||(0,n.Q)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,i){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{i&&i(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream)if(this.privFormat.formatTag!==c.WY.PCM&&this.privFormat.formatTag!==c.WY.MuLaw&&this.privFormat.formatTag!==c.WY.ALaw||!1!==this.privFormat.hasHeader){let i=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(i).then((n=>{i=r.SynthesisAdapterBase.addHeader(i,this.privFormat);const o=new Blob([i],{type:h[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(o),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||void 0!==window.webkitAudioContext){this.privFormat=e;const t=h[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${c.WY[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=e=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=e=>{this.updateSourceBuffer().catch((e=>{o.z.instance.onEvent(new s.BackgroundEvent(e))}))},this.privSourceBuffer.onupdateend=e=>{this.handleSourceBufferUpdateEnd().catch((e=>{o.z.instance.onEvent(new s.BackgroundEvent(e))}))},this.privSourceBuffer.onupdatestart=e=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{o.z.instance.onEvent(new s.BackgroundEvent(e))}))):(console.warn(`Format ${c.WY[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new a.NO,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return p(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return p(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return p(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}},8563:(e,t,i)=>{"use strict";var r;i.d(t,{E:()=>r}),function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError"}(r||(r={}))},8106:(e,t,i)=>{"use strict";i.d(t,{w:()=>n});var r=i(9801);class n extends r.J{constructor(e,t,i,r,n){super(r,n),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},6550:(e,t,i)=>{"use strict";var r;i.d(t,{_:()=>r}),function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(r||(r={}))},3333:(e,t,i)=>{"use strict";i.d(t,{e:()=>h});var r=i(2389),n=i(2605),o=i(8433),s=i(9513),a=i(9338),c=i(9342),p=i(9033);class h{static fromRecognizer(e){const t=e.internalData,i=new h;return i.privInternalData=t,i.setupEvents(),i}static fromSynthesizer(e){const t=e.internalData,i=new h;return i.privInternalData=t,i.setupEvents(),i}openConnection(e,t){(0,n.marshalPromiseToCallbacks)(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,n.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,i){if(s.a.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,i)}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,i)}}sendMessageAsync(e,t,i,r){(0,n.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(e,t),i,r)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new a.R(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new a.R(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new c.b(new o.k(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new c.b(new o.k(e.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new p.$(e.jsonString,e.name))}))}}},9338:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});var r=i(7841);class n extends r.${}},8433:(e,t,i)=>{"use strict";i.d(t,{H:()=>a,k:()=>c});var r=i(4257),n=i(6645),o=i(2874),s=i(5453);class a{}class c{constructor(e){this.privConnectionMessage=e,this.privProperties=new o.O,this.privConnectionMessage.headers[r.S.ConnectionId]&&this.privProperties.setProperty(s.o.Speech_SessionId,this.privConnectionMessage.headers[r.S.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(((e,t,i)=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])}))}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((e=>e.toLowerCase()==="path".toLowerCase()))]}get isTextMessage(){return this.privConnectionMessage.messageType===n.C.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===n.C.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}},9342:(e,t,i)=>{"use strict";i.d(t,{b:()=>r});class r{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}},9513:(e,t,i)=>{"use strict";i.d(t,{a:()=>r});class r{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const i of e)r.throwIfNullOrWhitespace(i,t)}static throwIfFileDoesNotExist(e,t){r.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}},6362:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});var r=i(8106);class n extends r.w{}},4751:(e,t,i)=>{"use strict";i.d(t,{E:()=>a,I:()=>c});var r,n=i(9513),o=i(843),s=i(5453);class a{constructor(){}set applicationId(e){}}a.DialogTypes=((r=class{}).BotFramework="bot_framework",r.CustomCommands="custom_commands",r);class c extends a{constructor(){super(),this.privSpeechConfig=new o.z}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){n.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,i,r){this.setProperty(s.o.SpeechServiceConnection_ProxyHostName,e),this.setProperty(s.o.SpeechServiceConnection_ProxyPort,""+t),i&&this.setProperty(s.o.SpeechServiceConnection_ProxyUserName,i),r&&this.setProperty(s.o.SpeechServiceConnection_ProxyPassword,r)}setServiceProperty(e,t,i){this.privSpeechConfig.setServiceProperty(e,t,i)}close(){}}},2821:(e,t,i)=>{"use strict";i.d(t,{v:()=>n});var r=i(2209);class n extends r.h{constructor(e,t,i,r,n,o){super(r,n,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},2209:(e,t,i)=>{"use strict";i.d(t,{h:()=>n});var r=i(9801);class n extends r.J{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}}},794:(e,t,i)=>{"use strict";i.d(t,{i:()=>n});var r=i(8670);class n extends r.b{constructor(e,t,i,r,n,o,s,a,c,p,h){super(t,i,r,n,o,s,a,void 0,c,p,h),this.privIntentId=e}get intentId(){return this.privIntentId}}},8530:(e,t,i)=>{"use strict";var r;i.d(t,{W:()=>r}),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(r||(r={}))},731:(e,t,i)=>{"use strict";var r;i.d(t,{P:()=>r}),function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(r||(r={}))},2874:(e,t,i)=>{"use strict";i.d(t,{O:()=>n});var r=i(5453);class n{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let i;i="string"==typeof e?e:r.o[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return this.privValues[e];return t}setProperty(e,t){let i;i="string"==typeof e?e:r.o[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return void(this.privValues[e]=t);this.privKeys.push(i),this.privValues.push(t)}clone(){const e=new n;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const i=this.getProperty(t);e.setProperty(t,i)}}))}}},5453:(e,t,i)=>{"use strict";var r;i.d(t,{o:()=>r}),function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.Conversation_ApplicationId=39]="Conversation_ApplicationId",e[e.Conversation_DialogType=40]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=42]="Conversation_From_Id",e[e.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=47]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=48]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=49]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=50]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=51]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=52]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=53]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=54]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=55]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=56]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=57]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=58]="PronunciationAssessment_Params"}(r||(r={}))},9801:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var r=i(7841);class n extends r.${constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}},3260:(e,t,i)=>{"use strict";i.d(t,{p:()=>r});class r{constructor(e,t,i,r,n,o,s,a,c,p){this.privResultId=e,this.privReason=t,this.privText=i,this.privDuration=r,this.privOffset=n,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=p}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},4571:(e,t,i)=>{"use strict";i.d(t,{c:()=>u});var r=i(2389),n=i(512),o=i(4825),s=i(2605),a=i(9513),c=i(6e3),p=i(5453),h=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t,i){this.audioConfig=void 0!==e?e:c.rU.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=i,this.implCommonRecognizerSetup()}close(e,t){a.a.throwIfDisposed(this.privDisposed),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return h(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return r.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){r.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const n=this.createRecognizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(e,t,i))));this.privReco=this.createServiceRecognizer(u.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,n)}recognizeOnceAsyncImpl(e){return h(this,void 0,void 0,(function*(){a.a.throwIfDisposed(this.privDisposed);const t=new s.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const i=yield t.promise;return yield this.implRecognizerStop(),i}))}startContinuousRecognitionAsyncImpl(e){return h(this,void 0,void 0,(function*(){a.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return h(this,void 0,void 0,(function*(){a.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return h(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(e){const t=e.getProperty(p.o.SpeechServiceConnection_Key,void 0);return t&&""!==t?new n.U(t):new o.w((t=>{const i=e.getProperty(p.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)}),(t=>{const i=e.getProperty(p.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)}))}}},1048:(e,t,i)=>{"use strict";var r;i.d(t,{s:()=>r}),function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile"}(r||(r={}))},9033:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});var r=i(7841);class n extends r.${constructor(e,t,i){super(i),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}},7841:(e,t,i)=>{"use strict";i.d(t,{$:()=>r});class r{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}},843:(e,t,i)=>{"use strict";i.d(t,{c:()=>h,z:()=>u});var r=i(2389),n=i(9513),o=i(5453),s=i(2874),a=i(8530),c=i(731),p=i(2356);class h{constructor(){}static fromSubscription(e,t){n.a.throwIfNullOrWhitespace(e,"subscriptionKey"),n.a.throwIfNullOrWhitespace(t,"region");const i=new u;return i.setProperty(o.o.SpeechServiceConnection_Region,t),i.setProperty(o.o.SpeechServiceConnection_IntentRegion,t),i.setProperty(o.o.SpeechServiceConnection_Key,e),i}static fromEndpoint(e,t){n.a.throwIfNull(e,"endpoint");const i=new u;return i.setProperty(o.o.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&i.setProperty(o.o.SpeechServiceConnection_Key,t),i}static fromHost(e,t){n.a.throwIfNull(e,"hostName");const i=new u;return i.setProperty(o.o.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(o.o.SpeechServiceConnection_Key,t),i}static fromAuthorizationToken(e,t){n.a.throwIfNull(e,"authorizationToken"),n.a.throwIfNullOrWhitespace(t,"region");const i=new u;return i.setProperty(o.o.SpeechServiceConnection_Region,t),i.setProperty(o.o.SpeechServiceConnection_IntentRegion,t),i.authorizationToken=e,i}close(){}}class u extends h{constructor(){super(),this.privProperties=new s.O,this.speechRecognitionLanguage="en-US",this.outputFormat=a.W.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.o.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.o.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return a.W[this.privProperties.getProperty(r.xv,void 0)]}set outputFormat(e){this.privProperties.setProperty(r.xv,a.W[e])}get endpointId(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){n.a.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,i,r){this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyUserName],i),this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyPassword],r)}setServiceProperty(e,t,i){const n=JSON.parse(this.privProperties.getProperty(r.XP,"{}"));n[e]=t,this.privProperties.setProperty(r.XP,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(o.o.SpeechServiceResponse_ProfanityOption,c.P[e])}enableAudioLogging(){this.privProperties.setProperty(o.o.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.o.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(r.CI,"true")}clone(){const e=new u;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return p.Y[this.privProperties.getProperty(o.o.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_SynthOutputFormat,p.Y[e])}}},2438:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});var r=i(8106);class n extends r.w{}},3383:(e,t,i)=>{"use strict";i.d(t,{m:()=>n,d:()=>o});var r=i(9801);class n extends r.J{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}}class o extends n{}},8670:(e,t,i)=>{"use strict";i.d(t,{b:()=>n});var r=i(3260);class n extends r.p{constructor(e,t,i,r,n,o,s,a,c,p,h){super(e,t,i,r,n,o,s,c,p,h),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}},3733:(e,t,i)=>{"use strict";i.d(t,{i:()=>r});class r{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},4974:(e,t,i)=>{"use strict";i.d(t,{c:()=>r});class r{constructor(e){this.privResult=e}get result(){return this.privResult}}},2356:(e,t,i)=>{"use strict";var r;i.d(t,{Y:()=>r}),function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw"}(r||(r={}))},1211:(e,t,i)=>{"use strict";i.d(t,{P:()=>r});class r{constructor(e,t,i,r,n){this.privResultId=e,this.privReason=t,this.privAudioData=i,this.privErrorDetails=r,this.privProperties=n}get resultId(){return this.privResultId}get reason(){return this.privReason}get audioData(){return this.privAudioData}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},2:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});class r{constructor(e,t,i){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},3491:(e,t,i)=>{"use strict";i.d(t,{G:()=>r});class r{constructor(e,t,i,r){this.privAudioOffset=e,this.privText=t,this.privWordLength=i,this.privTextOffset=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}}},454:(e,t,i)=>{"use strict";i.d(t,{i:()=>n});var r=i(7841);class n extends r.${constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}}},7469:(e,t,i)=>{"use strict";i.d(t,{O:()=>n});var r=i(8106);class n extends r.w{}},6523:(e,t,i)=>{"use strict";i.d(t,{M:()=>n});var r=i(3465);class n extends r.r{constructor(e,t,i,r,n,o,s,a,c,p,h){super(t,r,n,o,s,a,c,p,h),this.privId=e,this.privOrigLang=i}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}},7762:(e,t,i)=>{"use strict";i.d(t,{j:()=>r});class r{constructor(e,t,i,r,n){this.privCancelReason=t,this.privErrorDetails=i,this.privResult=n,this.privSessionId=e,this.privErrorCode=r}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},3062:(e,t,i)=>{"use strict";i.d(t,{s:()=>n});var r=i(9801);class n extends r.J{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}}},3465:(e,t,i)=>{"use strict";i.d(t,{r:()=>n});var r=i(8670);class n extends r.b{constructor(e,t,i,r,n,o,s,a,c){super(t,i,r,n,o,void 0,void 0,void 0,s,a,c),this.privTranslations=e}get translations(){return this.privTranslations}}},5250:(e,t,i)=>{"use strict";i.d(t,{v:()=>n});var r=i(7841);class n extends r.${constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}},5890:(e,t,i)=>{"use strict";i.d(t,{S:()=>r});class r{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}},649:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(2874);class n{constructor(){this.privMap=new r.O}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}}},576:(e,t,i)=>{"use strict";i.d(t,{Q:()=>n});class r{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}class n{constructor(e){this.privTurnStatus=r.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},8345:(e,t,i)=>{"use strict";var r;i.d(t,{f:()=>r}),function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(r||(r={}))},7129:(e,t)=>{"use strict";var i=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function n(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(i.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=n(o),r=n(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,n={};t=i.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in n||(n[o]=s)}return n}},7418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},8840:(e,t,i)=>{"use strict";i.r(t),i.d(t,{avatarFixedIcon:()=>o.Ze,card:()=>o.In,content:()=>o.kQ,deClose:()=>o.AB,deMask:()=>o.tH,header:()=>o.Fs,iframeContainer:()=>o.Cs,loadDiv:()=>o.tz,previewBg:()=>o.Be,previewClose:()=>o.Zh,previewContainer:()=>o.YT,previewContent:()=>o.aq,previewDiv:()=>o.es,previewVideo:()=>o.tq,rotate:()=>o.U1,round:()=>o.NM,slider:()=>o.$i,subtitle:()=>o.Oc,subtitleSwitch:()=>o.vN,switchLabel:()=>o.F2,title:()=>o.TN,url:()=>o.HQ});var r=i(3379),n=i.n(r),o=i(2790);n()(o.ZP,{insert:"head",singleton:!1})},3379:(e,t,i)=>{"use strict";var r,n=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function s(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},r=[],n=0;n<e.length;n++){var a=e[n],c=t.base?a[0]+t.base:a[0],p=i[c]||0,h="".concat(c," ").concat(p);i[c]=p+1;var u=s(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(o[u].references++,o[u].updater(d)):o.push({identifier:h,updater:f(d,t),references:1}),r.push(h)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=i.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=n(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var p,h=(p=[],function(e,t){return p[e]=t,p.filter(Boolean).join("\n")});function u(e,t,i,r){var n=i?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,n);else{var o=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function d(e,t,i){var r=i.css,n=i.media,o=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var v=null,l=0;function f(e,t){var i,r,n;if(t.singleton){var o=l++;i=v||(v=c(t)),r=u.bind(null,i,o,!1),n=u.bind(null,i,o,!0)}else i=c(t),r=d.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var i=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<i.length;r++){var n=s(i[r]);o[n].references--}for(var c=a(e,t),p=0;p<i.length;p++){var h=s(i[p]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}i=c}}}},4564:(e,t,i)=>{"use strict";var r=i(7418),n=i(7129),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function u(e){var t,r=("undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{}).location||{},n={},s=typeof(e=e||r);if("blob:"===e.protocol)n=new v(unescape(e.pathname),{});else if("string"===s)for(t in n=new v(e,{}),h)delete n[t];else if("object"===s){for(t in e)t in h||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=o.test(e.href))}return n}function d(e){e=c(e);var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function v(e,t,i){if(e=c(e),!(this instanceof v))return new v(e,t,i);var o,s,a,h,l,f,g=p.slice(),S=typeof t,m=this,C=0;for("object"!==S&&"string"!==S&&(i=t,t=null),i&&"function"!=typeof i&&(i=n.parse),t=u(t),o=!(s=d(e||"")).protocol&&!s.slashes,m.slashes=s.slashes||o&&t.slashes,m.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(g[3]=[/(.*)/,"pathname"]);C<g.length;C++)"function"!=typeof(h=g[C])?(a=h[0],f=h[1],a!=a?m[f]=e:"string"==typeof a?~(l=e.indexOf(a))&&("number"==typeof h[2]?(m[f]=e.slice(0,l),e=e.slice(l+h[2])):(m[f]=e.slice(l),e=e.slice(0,l))):(l=a.exec(e))&&(m[f]=l[1],e=e.slice(0,l.index)),m[f]=m[f]||o&&h[3]&&t[f]||"",h[4]&&(m[f]=m[f].toLowerCase())):e=h(e);i&&(m.query=i(m.query)),o&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=function(e,t){if(""===e)return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=i.length,n=i[r-1],o=!1,s=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),s++):s&&(0===r&&(o=!0),i.splice(r,1),s--);return o&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}(m.pathname,t.pathname)),r(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(h=m.auth.split(":"),m.username=h[0]||"",m.password=h[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}v.prototype={set:function(e,t,i){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||n.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!i;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;default:o[e]=t}for(var a=0;a<p.length;a++){var c=p[a];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=n.stringify);var t,i=this,r=i.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(i.slashes?"//":"");return i.username&&(o+=i.username,i.password&&(o+=":"+i.password),o+="@"),o+=i.host+i.pathname,(t="object"==typeof i.query?e(i.query):i.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),i.hash&&(o+=i.hash),o}},v.extractProtocol=d,v.location=u,v.trimLeft=c,v.qs=n,e.exports=v},5877:(e,t,i)=>{var r=i(3570),n=i(1171),o=n;o.v1=r,o.v4=n,e.exports=o},5327:e=>{for(var t=[],i=0;i<256;++i)t[i]=(i+256).toString(16).substr(1);e.exports=function(e,i){var r=i||0,n=t;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},5217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var i=new Uint8Array(16);e.exports=function(){return t(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},3570:(e,t,i)=>{var r,n,o=i(5217),s=i(5327),a=0,c=0;e.exports=function(e,t,i){var p=t&&i||0,h=t||[],u=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:n;if(null==u||null==d){var v=o();null==u&&(u=r=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==d&&(d=n=16383&(v[6]<<8|v[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:c+1,g=l-a+(f-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||l>a)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=l,c=f,n=d;var S=(1e4*(268435455&(l+=122192928e5))+f)%4294967296;h[p++]=S>>>24&255,h[p++]=S>>>16&255,h[p++]=S>>>8&255,h[p++]=255&S;var m=l/4294967296*1e4&268435455;h[p++]=m>>>8&255,h[p++]=255&m,h[p++]=m>>>24&15|16,h[p++]=m>>>16&255,h[p++]=d>>>8|128,h[p++]=255&d;for(var C=0;C<6;++C)h[p+C]=u[C];return t||s(h)}},1171:(e,t,i)=>{var r=i(5217),n=i(5327);e.exports=function(e,t,i){var o=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||n(s)}},3959:()=>{},4024:()=>{},5711:()=>{},2993:()=>{},1578:()=>{},7694:()=>{},7928:()=>{},418:()=>{},1063:()=>{}},t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={id:r,exports:{}};return e[r](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";i(8840);var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};function t(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}function r(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function n(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function s(e,t){for(var i=0,r=t.length,n=e.length;i<r;i++,n++)e[n]=t[i];return e}function a(e){return this instanceof a?(this.v=e,this):new a(e)}function c(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=n[e](t)).value instanceof a?Promise.resolve(i.value.v).then(p,h):u(o[0][2],i)}catch(e){u(o[0][3],e)}var i}function p(e){c("next",e)}function h(e){c("throw",e)}function u(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}}function p(e){return"function"==typeof e}function h(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Object.create,Object.create;var u=h((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function d(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}var v=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}var t;return e.prototype.unsubscribe=function(){var e,t,i,r,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var h=n(c),d=h.next();!d.done;d=h.next())d.value.remove(this)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}else c.remove(this);var v=this.initialTeardown;if(p(v))try{v()}catch(e){a=e instanceof u?e.errors:[e]}var l=this._teardowns;if(l){this._teardowns=null;try{for(var f=n(l),S=f.next();!S.done;S=f.next()){var m=S.value;try{g(m)}catch(e){a=null!=a?a:[],e instanceof u?a=s(s([],o(a)),o(e.errors)):a.push(e)}}}catch(e){i={error:e}}finally{try{S&&!S.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}}if(a)throw new u(a)}},e.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)g(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(i=this._teardowns)&&void 0!==i?i:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&d(t,e)},e.prototype.remove=function(t){var i=this._teardowns;i&&d(i,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),l=v.EMPTY;function f(e){return e instanceof v||e&&"closed"in e&&p(e.remove)&&p(e.add)&&p(e.unsubscribe)}function g(e){p(e)?e():e.unsubscribe()}var S=null,m=null,C=void 0,y=!1,P=!1,R={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=R.delegate;return((null==i?void 0:i.setTimeout)||setTimeout).apply(void 0,s([],o(e)))},clearTimeout:function(e){var t=R.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function w(e){R.setTimeout((function(){if(!S)throw e;S(e)}))}function E(){}var T=I("C",void 0,void 0);function I(e,t,i){return{kind:e,value:t,error:i}}var b=function(e){function i(t){var i=e.call(this)||this;return i.isStopped=!1,t?(i.destination=t,f(t)&&t.add(i)):i.destination=D,i}return t(i,e),i.create=function(e,t,i){return new O(e,t,i)},i.prototype.next=function(e){this.isStopped?x(function(e){return I("N",e,void 0)}(e),this):this._next(e)},i.prototype.error=function(e){this.isStopped?x(I("E",void 0,e),this):(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped?x(T,this):(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(v),O=function(e){function i(t,i,r){var n,o=e.call(this)||this;if(p(t))n=t;else if(t){var s;n=t.next,i=t.error,r=t.complete,o&&P?(s=Object.create(t)).unsubscribe=function(){return o.unsubscribe()}:s=t,n=null==n?void 0:n.bind(s),i=null==i?void 0:i.bind(s),r=null==r?void 0:r.bind(s)}return o.destination={next:n?A(n,o):E,error:A(null!=i?i:k,o),complete:r?A(r,o):E},o}return t(i,e),i}(b);function A(e,t){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{e.apply(void 0,s([],o(i)))}catch(e){if(y){if(!t._syncErrorHack_isSubscribing)throw e;t.__syncError=e}else w(e)}}}function k(e){throw e}function x(e,t){var i=m;i&&R.setTimeout((function(){return i(e,t)}))}var D={closed:!0,next:E,error:k,complete:E},M="function"==typeof Symbol&&Symbol.observable||"@@observable";function z(e){return e}function L(e){return 0===e.length?z:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var N=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var r,n=(r=e)&&r instanceof b||function(e){return e&&p(e.next)&&p(e.error)&&p(e.complete)}(r)&&f(r)?e:new O(e,t,i);if(y)this._deprecatedSyncErrorSubscribe(n);else{var o=this.operator,s=this.source;n.add(o?o.call(n,s):s?this._subscribe(n):this._trySubscribe(n))}return n},e.prototype._deprecatedSyncErrorSubscribe=function(e){var t=e;t._syncErrorHack_isSubscribing=!0;var i=this.operator;if(i)e.add(i.call(e,this.source));else try{e.add(this._subscribe(e))}catch(e){t.__syncError=e}for(var r=t;r;){if("__syncError"in r)try{throw r.__syncError}finally{e.unsubscribe()}r=r.destination}t._syncErrorHack_isSubscribing=!1},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=_(t))((function(t,r){var n;n=i.subscribe((function(t){try{e(t)}catch(e){r(e),null==n||n.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[M]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?L(e)(this):this},e.prototype.toPromise=function(e){var t=this;return new(e=_(e))((function(e,i){var r;t.subscribe((function(e){return r=e}),(function(e){return i(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function _(e){var t;return null!==(t=null!=e?e:C)&&void 0!==t?t:Promise}var B=h((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),F=function(e){function i(){var t=e.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return t(i,e),i.prototype.lift=function(e){var t=new U(this,this);return t.operator=e,t},i.prototype._throwIfClosed=function(){if(this.closed)throw new B},i.prototype.next=function(e){var t,i;if(this._throwIfClosed(),!this.isStopped){var r=this.observers.slice();try{for(var o=n(r),s=o.next();!s.done;s=o.next())s.value.next(e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}}},i.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},i.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},i.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},i.prototype._innerSubscribe=function(e){var t=this,i=t.hasError,r=t.isStopped,n=t.observers;return i||r?l:(n.push(e),new v((function(){return d(n,e)})))},i.prototype._checkFinalizedStatuses=function(e){var t=this,i=t.hasError,r=t.thrownError,n=t.isStopped;i?e.error(r):n&&e.complete()},i.prototype.asObservable=function(){var e=new N;return e.source=this,e},i.create=function(e,t){return new U(e,t)},i}(N),U=function(e){function i(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return t(i,e),i.prototype.next=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)},i.prototype.error=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)},i.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},i.prototype._subscribe=function(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:l},i}(F),H=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},q=function(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},W=[{image:"/assets/img/taobao.png",width:"256px",height:"460px",name:"淘宝",id:0},{image:"/assets/img/douyin.png",width:"256px",height:"460px",name:"抖音",id:1},{width:"700px",height:"560px",name:"BingAds",id:2}],K={state:new F,contentElement:new F,data:new F},V="https://vadev.chinanorth3.cloudapp.chinacloudapi.cn",j=new Headers;j.set("content-type","application/json"),j.set("Authorization","Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJVc2VyTWFuYWdlbWVudCIsInN1YiI6IjYwNmU2ZWU1MTgzYWM5NTUyZTNlNDBiMiIsIm5hbWUiOiJ2ciIsInVuaXF1ZV9uYW1lIjoidnJARGlhbG9nUG9ydGFsIiwianRpIjoiNjIyOGEyZTUtOTA3Ni00NmE1LThiYjctYTQ5NTljNTBlNGU3Iiwibm9uY2UiOiIzUEJ0N3QxdnFsIiwiaWF0IjoxNjIwODk1MTExLCJuYmYiOjE2MjA4OTQ4MTEsImRvbWFpbiI6IkRpYWxvZ1BvcnRhbCIsImF1ZCI6IkRpYWxvZ1BvcnRhbCIsInJvbGVzIjoiT3BlcmF0b3IiLCJleHAiOjE2MjE0OTk5MTF9.vITZXNxBXemRqi7tJbsNSJ5v-Ssm59rQTn0V67LtLpMYtMW4d15VfGYD_wL_XcNQi1scApZe5Neom4-q3R5FRx_3b4NKmHys5__iJp3OKtLImcsObtxWw4vkmFEGtUADVmpLVb769baSlJ4QjczTrHalRRhrSaTbpFerAd8xTGjbuZtgAmW1-xM6IKWwW5HxsQNVBSpma88Ma8ACdnByIJi2sB69vUKEvaUbcRbZGrJhK9bja6W-WWXDBzRYHwDDJeIvFxWM9HwAKmf2K6hLmOyfwd2OjaZtD4hJvp2A8YymG5GLkiSTAGJ0kxGc8xzekbV6HkIJmIWd7KmImRqUmg");var J=function(e){return V+"/api/Media/"+e+"?accountId=vadevstorage"},Y=i(8840),G="https://va4-dev.chinaeast2.cloudapp.chinacloudapi.cn/assets/img/avatar.gif",Q=function(){function e(e,t,i){var r=this;this.bindEl=e,this.store=t,this.config=i,this.openStatus=!1,this.liveState="",K.state.subscribe((function(e){r.liveState=e}))}return e.prototype.render=function(){this.boxEl&&(this.store.openStatus?(this.boxEl.classList.remove(Y.deChatBox),this.boxEl.innerHTML=""):(this.boxEl.classList.add(Y.deChatBox),this.boxEl.innerHTML="\n                <img  src='"+G+"'  />\n            "))},e.prototype.init=function(){var e=this,t=document.createElement("div");return t.setAttribute("id","de-chat-box"),this.store.openStatus?(t.classList.remove(Y.avatarFixedIcon),t.innerHTML=""):(t.classList.add(Y.avatarFixedIcon),t.innerHTML="\n              <img  src='"+G+"'  />\n            "),t.addEventListener("click",(function(t){e.store.openStatus=!e.store.openStatus,e.store.openStatus&&"end"===e.liveState&&K.state.next("restart")})),this.boxEl=t,this.bindEl.appendChild(t)},e}();function $(e){return function(t){if(function(e){return p(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var X=function(e){function i(t,i,r,n,o){var s=e.call(this,t)||this;return s.onFinalize=o,s._next=i?function(e){try{i(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return t(i,e),i.prototype.unsubscribe=function(){var t,i=this.closed;e.prototype.unsubscribe.call(this),!i&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},i}(b),Z="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ee(e){return new N((function(t){(function(e,t){var i,o,s,a,c,p,h,u;return c=this,p=void 0,u=function(){var c,p;return r(this,(function(r){switch(r.label){case 0:r.trys.push([0,5,6,11]),i=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=n(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}}(e),r.label=1;case 1:return[4,i.next()];case 2:if((o=r.sent()).done)return[3,4];if(c=o.value,t.next(c),t.closed)return[2];r.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return p=r.sent(),s={error:p},[3,11];case 6:return r.trys.push([6,,9,10]),o&&!o.done&&(a=i.return)?[4,a.call(i)]:[3,8];case 7:r.sent(),r.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((h=void 0)||(h=Promise))((function(e,t){function i(e){try{n(u.next(e))}catch(e){t(e)}}function r(e){try{n(u.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof h?n:new h((function(e){e(n)}))).then(i,r)}n((u=u.apply(c,p||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}var te=i(8840),ie=function(){function e(e,t){this.el=e,this.content=t,this.delete(),this.el&&this.content&&this.init()}return e.prototype.init=function(){var e=document.createElement("div");e.classList.add(te.header);var t=document.createElement("img");t.src=J(this.content.iconUrl);var i=document.createElement("span");i.classList.add(te.title),i.innerHTML=this.content.displayTtitle;var r=document.createElement("a");r.classList.add(te.url),r.target="_blank",r.href=this.content.url,r.innerHTML='\n    <svg\n      t="1617181917784"\n      class="icon"\n      viewBox="0 0 1024 1024"\n      version="1.1"\n      xmlns="http://www.w3.org/2000/svg"\n      p-id="3628"\n      width="28"\n      height="28"\n    >\n      <path\n        d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"\n        fill="#FEE8EB"\n        p-id="3629"\n      ></path>\n      <path\n        d="M494.3 659.4c7.2 0 14.1 1.3 20.6 4 6.5 2.7 12.2 6.4 17.1 11.1 5 4.8 8.8 10.4 11.4 16.9 2.7 6.5 4 13.3 4 20.6 0 7.2-1.3 14.1-4 20.6s-6.5 12.1-11.4 16.9-10.7 8.6-17.1 11.4-13.3 4.3-20.6 4.3c-7.6 0-14.6-1.4-20.9-4.3s-11.9-6.7-16.9-11.4c-5-4.8-8.8-10.4-11.4-16.9-2.7-6.5-4-13.3-4-20.6 0-7.2 1.3-14.1 4-20.6 2.7-6.5 6.5-12.1 11.4-16.9 5-4.8 10.6-8.5 16.9-11.1 6.3-2.6 13.3-4 20.9-4zM753 339c10.7 0 19 1.4 24.9 4.3 5.9 2.9 10.1 6.4 12.6 10.6 2.5 4.2 3.6 8.7 3.4 13.4s-0.9 8.9-2 12.3c-1.1 3.4-3.5 10.5-7.1 21.1-3.6 10.7-7.7 22.4-12.3 35.1-4.6 12.8-9 25.4-13.4 38-4.4 12.6-7.7 22.5-10 29.7-5 15.2-11.2 25.8-18.9 31.7-7.6 5.9-17 8.9-28 8.9h-300l8.6 51.4s177.2 0.5 179.2 0.5c-15 13-19 36-20 51-17 0-16.9-0.1-16.9-0.1H399.9c-7.6 0-14-1.7-19.1-5.1-5.1-3.4-9.4-7.9-12.9-13.4-3.4-5.5-6.2-11.5-8.3-18-2.1-6.5-3.7-12.6-4.9-18.3-0.4-2.3-1.4-7.8-3.1-16.6-1.7-8.8-3.8-19.7-6.3-32.9-2.5-13.1-5.2-27.8-8.3-44-3-16.2-6.1-32.5-9.1-48.9-7.2-38.5-15.4-81.3-24.6-128.6h-42.9c-5.7 0-10.5-1.4-14.3-4.3-3.8-2.9-7-6.3-9.4-10.3-2.5-4-4.2-8.3-5.1-12.9-1-4.6-1.4-8.8-1.4-12.6 0-7.6 2.6-13.9 7.7-18.9 5.1-5 12.1-7.4 20.9-7.4h57.6c7.6 0 13.7 1.1 18.3 3.4 4.6 2.3 8.2 5.1 10.9 8.6 2.7 3.4 4.6 7 5.7 10.9 1.1 3.8 2.1 7 2.9 9.7 0.8 3 1.5 7.3 2.3 12.9 0.8 5.5 1.5 11.1 2.3 16.9 1.1 6.9 2.3 14.1 3.4 21.7 0 0.2 390.8 0.2 390.8 0.2z"\n        fill="#FF6A69"\n        p-id="3630"\n      ></path>\n      <path\n        d="M684.8 554.8c14.7 0 28.8 2.7 42.3 8.1 13.5 5.4 25.1 12.9 34.7 22.6s17.4 21 23.2 34.2c5.8 13.1 8.7 27 8.7 41.7 0 14.7-2.9 28.6-8.7 41.7-5.8 13.1-13.5 24.5-23.2 34.2s-21.2 17.4-34.7 23.2c-13.5 5.8-27.6 8.7-42.3 8.7s-28.6-2.9-41.7-8.7-24.5-13.5-34.2-23.2-17.4-21-23.2-34.2c-5.8-13.1-8.7-27-8.7-41.7 0-14.7 2.9-28.6 8.7-41.7 5.8-13.1 13.5-24.5 23.2-34.2s21-17.2 34.2-22.6c13.2-5.4 27.1-8.1 41.7-8.1z"\n        fill="#FFA3A5"\n        p-id="3631"\n      ></path>\n      <path\n        d="M699.7 651.6v-27c0-3.3-1.7-6-5-6l-18.8 0.1c-3.3 0-5.9 2.7-5.9 5.9v26.7h-14c-3.3 0-5.9 2.7-5.9 5.9 0 1.4 0.5 2.8 1.4 3.8l29.9 42.1c2.1 2.5 7.3 2.4 9 0l28.9-42.1c2.1-2.5 1.8-6.2-0.7-8.4-1.1-0.9-2.4-1.4-3.8-1.4 0 0.2-15.1 0.4-15.1 0.4z"\n        fill="#FFFFFF"\n        p-id="3632"\n      ></path>\n    </svg>\n    ',e.appendChild(t),e.appendChild(i),e.appendChild(r);var n=document.createElement("div");n.classList.add(te.content);var o=document.createElement("p");o.innerHTML=this.content.displayText,n.appendChild(o),this.el.appendChild(e),this.el.appendChild(n)},e.prototype.delete=function(){0!==this.el.children.length&&(this.el.innerHTML="")},e}(),re=function(){function e(e,t){for(var i in this.imgContainer=e,this.data=t,e){var r=100-Number(i);this.imgContainer[i].el.style.zIndex=r}this.imgContainer&&this.data&&this.init()}return e.prototype.init=function(){var e,t=this;if(this.delete(),this.imgContainer[this.data.showPlaceHolderIndex]){var i=null===(e=this.imgContainer[this.data.showPlaceHolderIndex])||void 0===e?void 0:e.size,r=i[0],n=i[1],o=new Image(r,n);o.src=J(this.data.url),o.onload=function(){t.imgContainer[t.data.showPlaceHolderIndex].el.appendChild(o)}}},e.prototype.delete=function(){this.imgContainer.map((function(e){e.el.innerHTML=""}))},e}(),ne=i(8840),oe=function(){function e(e){this.container=e}return e.prototype.create=function(){if(this.el)this.el.style.display="block";else{this.el=document.createElement("div"),this.el.classList.add(ne.loadDiv);var e=document.createElement("span");e.innerHTML='\n      <svg t="1624343181752" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2489" width="32" height="32"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" p-id="2490" fill="#ffffff"></path></svg>\n        ',this.el.appendChild(e),this.container.appendChild(this.el)}},e.prototype.hide=function(){this.el.style.display="none"},e}();i(8840);const se=function(){function e(e,t){this.elements=e,this.data=t,this.init()}return e.prototype.init=function(){if(this.delete(),this.data){this.elements[this.data.showPlaceHolderIndex].el.innerHTML='\n      <video id="vid1" class="azuremediaplayer amp-default-skin" autoplay  width="100%" height="100%"   data-setup=\'{"nativeControlsForTouch": false}\'>\n      </video>\n    ';var e=document.getElementById("vid1");amp(e,{techOrder:["azureHtml5JS","flashSS","html5FairPlayHLS","silverlightSS","html5"],nativeControlsForTouch:!1,autoplay:!0,controls:!1,muted:!this.data.isSoundSwithOn}).src([{src:this.data.url,type:"application/vnd.ms-sstr+xml"}])}},e.prototype.delete=function(){this.elements.map((function(e){e.el.innerHTML=""}))},e}();var ae=function(){return(ae=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ce=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},pe=function(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},he=i(8840),ue=i(3494),de=function(){function e(e,t){var i=this;this.bindEl=e,this.data=t,this.ttsVoiceOpen=!1,this.imgContainer=[],this.live$=new F,this.liveState="",this.subtitle$=new F,this.subtitleLanguage$=new F,this.videoElements=[],this.el=this.bindEl,this.config=t,this.avartarAgentId=this.data.avatarAgentId,this.player=new ue.SpeakerAudioDestination,window.player=this.player,this.audioConfig=ue.AudioConfig.fromSpeakerOutput(this.player),this.voice=this.data.avatarAgent.ttsAgent.voice,this.init();var o,s,h,u,d,v,l=this.data.avatarAgent.ttsAgent,f=l.subscriptionKey,g=l.serviceRegion;this.speechConfig=ue.SpeechConfig.fromSubscription(f,g),Promise.all([this.loadAvatar(),this.loadScript(this.data.units[0])]).then((function(e){e[0];var t=e[1];i.data.units[0].ttsUnit=t,i.loadElement.hide(),document.getElementById("va-unity").style.opacity="1",i.iframe=document.getElementById("va-unity"),"restart"!==i.liveState&&(i.ttsVoiceOpen=!0,i.liveUnits(i.data.units))})).catch((function(e){return console.log(e)})),this.live$.subscribe((function(e){return ce(i,void 0,void 0,(function(){return pe(this,(function(t){switch(t.label){case 0:return"start"!==e.type?[3,2]:[4,this.live(e.data,e.mode)];case 1:t.sent(),t.label=2;case 2:return e.type,e.type,e.type,"end"===e.type&&(this.iframe.contentWindow.postMessage({type:"deactivate"},"*"),this.iframe.contentWindow.postMessage({type:"visemeclean"},"*"),this.subtitle$.next("")),[2]}}))}))})),this.subtitle$.subscribe((function(e){i.subtitleEL.innerText=e})),K.state.subscribe((function(e){"end"===e&&(i.ttsVoiceOpen=!1),i.liveState=e})),this.subtitleLanguage$.pipe((v=function(){return i.liveSubtitleList&&i.liveSubtitleList.length>0},$((function(e,t){var i=0;e.subscribe(new X(t,(function(e){return v.call(undefined,e,i++)&&t.next(e)})))}))),(s=function(e){return i.subtitleLanguage=e},d=p(s)?{next:s,error:h,complete:u}:s,d?$((function(e,t){e.subscribe(new X(t,(function(e){var i;null===(i=d.next)||void 0===i||i.call(d,e),t.next(e)}),(function(){var e;null===(e=d.complete)||void 0===e||e.call(d),t.complete()}),(function(e){var i;null===(i=d.error)||void 0===i||i.call(d,e),t.error(e)})))})):z),(o=function(e){return t=i.liveSubtitleList.map((function(e){return e.text})),r=e,H(void 0,void 0,void 0,(function(){var e,i;return q(this,(function(n){switch(n.label){case 0:e="https://api.translator.azure.cn/translate?api-version=3.0&to="+r,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",headers:{"Ocp-Apim-Subscription-Key":"e56d3c478611476d8f3cbb02ed7775c1","Ocp-Apim-Subscription-Region":"chinaeast2","Content-type":"application/json"},body:JSON.stringify(t.map((function(e){return{text:e}})))}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))];case 2:return[2,n.sent()];case 3:return i=n.sent(),console.log(i),[3,4];case 4:return[2]}}))}));var t,r},$((function(e,t){var i=null,s=!1,h=function(){return s&&!i&&t.complete()};e.subscribe(new X(t,(function(e){null==i||i.unsubscribe();0;(function(e){if(e instanceof N)return e;if(null!=e){if(function(e){return p(e[M])}(e))return u=e,new N((function(e){var t=u[M]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((h=e)&&"number"==typeof h.length&&"function"!=typeof h)return s=e,new N((function(e){for(var t=0;t<s.length&&!e.closed;t++)e.next(s[t]);e.complete()}));if(p(null==(o=e)?void 0:o.then))return i=e,new N((function(e){i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,w)}));if(function(e){return Symbol.asyncIterator&&p(null==e?void 0:e[Symbol.asyncIterator])}(e))return ee(e);if(function(e){return p(null==e?void 0:e[Z])}(e))return t=e,new N((function(e){var i,r;try{for(var o=n(t),s=o.next();!s.done;s=o.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}e.complete()}));if(function(e){return p(null==e?void 0:e.getReader)}(e))return ee(function(e){return c(this,arguments,(function(){var t,i,n;return r(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,a(t.read())];case 3:return i=r.sent(),n=i.value,i.done?[4,a(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,a(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,i,o,s,h,u;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)})(o(e)).subscribe(i=new X(t,(function(e){return t.next(e)}),(function(){i=null,h()})))}),(function(){s=!0,h()})))})))).subscribe((function(e){e&&e.length>0&&(i.liveSubtitleList=i.liveSubtitleList.map((function(t,i){return t.zh="en"===e[0].detectedLanguage.language?e[i].translations[0].text:t.text,t.en="en"===e[0].detectedLanguage.language?t.text:e[i].translations[0].text,t})))}))}return e.prototype.xmlToString=function(e,t){return'\n      <speak version="1.0" xmlns="https://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" xml:lang="'+t.language+"\">\n          <voice name='"+t.voice+"'>\n            <prosody rate=\""+100*(t.rate-1)+'%" volume="'+100*t.volume+'%">\n              <mstts:express-as style="'+t.style+'" role="'+t.role+'">\n                  '+this.encodeXML(e)+"\n              </mstts:express-as>\n            </prosody>\n          </voice>\n      </speak>\n    "},e.prototype.encodeXML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},e.prototype.liveUnits=function(e){return ce(this,void 0,void 0,(function(){var t,i,r,n,o=this;return pe(this,(function(s){switch(s.label){case 0:if("end"===this.liveState)return[2];if(0===e.length)return[2];t=function(t){var r;return pe(this,(function(n){switch(n.label){case 0:return i.ttsVoiceOpen?(t+1<e.length&&(r=setTimeout((function(){var i=t+1;o.loadScript(e[i]).then((function(t){e[i].ttsUnit=t,clearTimeout(r)}))}),10)),new re(i.imgContainer).delete(),new se(i.imgContainer).delete(),new ie(i.cardContainer).delete(),[4,i.isLoadingIndex(t,e)]):[2,{value:void 0}];case 1:return n.sent(),[4,i.liveScriptUnit(e[t].ttsUnit,"live")];case 2:return n.sent(),[2]}}))},i=this,r=0,s.label=1;case 1:return r<e.length?[5,t(r)]:[3,4];case 2:if("object"==typeof(n=s.sent()))return[2,n.value];s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.liveScriptUnit=function(e,t){return ce(this,void 0,void 0,(function(){var i=this;return pe(this,(function(r){return[2,new Promise((function(r){i.live$.next({type:"start",data:e,mode:t}),i.live$.subscribe((function(e){"end"===e.type&&r("end")}))})).catch((function(e){return console.log(e)}))]}))}))},e.prototype.isLoadingIndex=function(e,t){return new Promise((function(i){var r=setInterval((function(){t[e].ttsUnit&&(clearInterval(r),i(!0))}),100)})).catch((function(e){return console.log(e)}))},e.prototype.loadAvatar=function(){return new Promise((function(e){window.addEventListener("message",(function(t){"loadModelEnd"===t.data.type&&e(!0)}),!1)})).catch((function(e){return console.log(e)}))},e.prototype.loadScript=function(e){return ce(this,void 0,void 0,(function(){var t,i,r,n,o,s,a,c,p,h,u,d,v,l,f,g,S,m=this;return pe(this,(function(C){switch(C.label){case 0:for(t={paragraph:[],text:e.text,trigger:[],breakTrigger:[],avatarAgentId:e.avartarAgentId},i=e.actionsDisplay,r=function(e){var r=i.find((function(t){return t.actionType===e.actionType}));r&&(e._type="actions",e.avatarCallingIndex=r.avatarCallingIndex,e.isSuspendTalking=r.isSuspendTalking,r.isSuspendTalking&&t.breakTrigger.push(e))},n=0,o=e.actions||[];n<o.length;n++)s=o[n],r(s);for(a=0,c=e.dialogs||[];a<c.length;a++)(p=c[a])._type="dialogs",t.breakTrigger.push(p);for(t.trigger=[].concat(e.actions,e.images&&e.images.map((function(e){return e._type="images",e})),e.dialogs,e.cards&&e.cards.map((function(e){return e._type="cards",e})),e.videos&&e.videos.map((function(e){return e._type="videos",e}))).filter((function(e){return!!e&&-1===t.breakTrigger.indexOf(e)})).map((function(e){return e.isRun=!1,e})),h=this.ttsInfo(),u=Array.from(new Set(function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)r[n]=o[s];return r}([0,e.text.length],t.breakTrigger.map((function(e){return e.index}))))).sort((function(e,t){return e-t})),d=[],v=0;v<u.length-1;++v)l=u[v],f=u[v+1],g=e.text.substring(l,f),d.push({start:l,end:f,text:g});return[4,Promise.all(d.map((function(e){return m.speech(e.text,h)})))];case 1:return S=C.sent(),t.paragraph=d.map((function(e,t){return ae(ae({},e),{tts:S[t]})})),[2,t]}}))}))},e.prototype.ttsInfo=function(){return this.data.avatarAgent.ttsAgent},e.prototype.speech=function(e,t){var i=this;return t=t,new Promise((function(r){i.player=new ue.SpeakerAudioDestination,window.player=i.player,i.audioConfig=ue.AudioConfig.fromSpeakerOutput(i.player);var n=i.config.avatarAgent.ttsAgent,o=n.subscriptionKey,s=n.serviceRegion;i.speechConfig=ue.SpeechConfig.fromSubscription(o,s);var a=i.player,c=i.speechConfig,p=i.audioConfig;i.synthesizer=new ue.SpeechSynthesizer(c,p);var h=i.xmlToString(e,t);i.synthesizer.speakSsmlAsync(h,(function(e){i.synthesizer.close(),i.synthesizer=void 0}),(function(e){i.synthesizer.close(),i.synthesizer=void 0}));var u=[],d={lang:"zh_cn",res:[],originalRes:u},v=0,l=0;i.synthesizer.visemeReceived=function(e,t){u.push({vise:t.visemeId,offset:t.audioOffset/1e7}),v=l,l=t.audioOffset,d.res.push({vise:t.visemeId,offset:(l-v)/1e7})};var f,g=[];i.synthesizer.wordBoundary=function(e,t){void 0===f&&(f=t.textOffset),g.push({audioOffset:t.audioOffset,wordLength:t.wordLength,wordOffset:t.textOffset-f})},i.synthesizer.synthesisCompleted=function(e,t){var i=t.result.audioData;r({player:a,viseRes:d,audioData:i,wordBoundaryList:g})},a.pause()})).catch((function(e){return console.log(e)}))},e.prototype.speak=function(e,t,i){var r=this;return new Promise((function(n){var o=-1,s=-1;e.player.resume(),r.iframe.contentWindow.postMessage({type:"activate",data:JSON.stringify(e.viseRes)},"*");var a=setInterval((function(){if(r.ttsVoiceOpen||e.player.pause(),void 0!==e.player){var n,c=e.player.currentTime;if(s===c)return r.live$.next({type:"end"}),void clearInterval(a);s=c;for(var p=0,h=e.wordBoundaryList;p<h.length;p++){var u=h[p];if(!(1e3*c>u.audioOffset/1e4))break;n=u}if(void 0!==n){var d=t+n.wordOffset;if(d!==o){var v=r.liveSubtitleList.find((function(e){return n.wordOffset>=e.start&&n.wordOffset<=e.end}));v&&r.subtitle$.next(v[r.subtitleLanguage]||v.text);for(var l=0,f=i.filter((function(e){return!e.isRun&&e.index<d+n.wordLength}));l<f.length;l++){var g=f[l];r.runTrigger(g),g.isRun=!0}o=d}}}}),500);e.player.onAudioEnd=function(){clearInterval(a),n(!0),r.iframe.contentWindow.postMessage({type:"deactivate"},"*")}})).catch((function(e){return console.log(e)}))},e.prototype.runTrigger=function(e){e._type&&this[{actions:"action",images:"image",dialogs:"dialog",cards:"card",videos:"video"}[e._type]](e)},e.prototype.action=function(e){var t=this;if(e.isSuspendTalking)return new Promise((function(i){t.iframe.contentWindow.postMessage({type:"action",data:e.avatarCallingIndex+""},"*"),setTimeout((function(){i(!0)}),1500)})).catch((function(e){return console.log(e)}));this.iframe.contentWindow.postMessage({type:"action",data:e.avatarCallingIndex+""},"*")},e.prototype.image=function(e){new re(this.imgContainer,e)},e.prototype.card=function(e){new ie(this.cardContainer,e)},e.prototype.video=function(e){window.video=new se(this.imgContainer,e)},e.prototype.dialog=function(e,t){console.log("dialog")},e.prototype.live=function(e,t){return ce(this,void 0,void 0,(function(){var t,i,r,n,o,s,a,c,p;return pe(this,(function(h){switch(h.label){case 0:if(this.live$.next({type:"tts"}),!(e.paragraph&&e.paragraph.length>0))return[3,5];t=function(t){var r,n,o,s;return pe(this,(function(a){switch(a.label){case 0:r=e.breakTrigger.filter((function(e){return e.index===t.start})),n=0,o=r,a.label=1;case 1:return n<o.length?"actions"!==(s=o[n])._type?[3,3]:[4,i.action(s)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return i.liveSubtitleList=(c=t.text,p=[],h=0,c.replaceAll(/[。？，！.!,?、\n；;]/g,(function(e,t){p.push({start:h,end:t,text:c.substring(h,t)}),h=t+1})),h<c.length&&p.push({start:h,end:c.length,text:c.substring(h,c.length)}),p),[4,i.speak(t.tts,t.start,e.trigger)];case 5:return a.sent(),[2]}var c,p,h}))},i=this,r=0,n=e.paragraph,h.label=1;case 1:return r<n.length?(o=n[r],[5,t(o)]):[3,4];case 2:h.sent(),h.label=3;case 3:return r++,[3,1];case 4:return[3,9];case 5:s=[].concat(e.breakTrigger,e.trigger),a=0,c=s,h.label=6;case 6:return a<c.length?"actions"!==(p=c[a])._type?[3,8]:[4,this.action(p)]:[3,9];case 7:h.sent(),h.label=8;case 8:return a++,[3,6];case 9:return this.live$.next({type:"end"}),[2]}}))}))},e.prototype.init=function(){var e=this,t=document.createElement("div"),i=W[this.data.targetPlatform],r=i.width,n=i.height;t.style.width=r,t.style.height=n,this.loadElement=new oe(t),this.loadElement.create();var o=this.data.scene.backgroundImgId,s=new Image(parseFloat(r),parseFloat(n));s.src=J(o),s.classList.add(he.previewBg),s.onload=function(){t.appendChild(s)};for(var a=0,c=this.data.scene.showPlaceholders;a<c.length;a++){var p=c[a],h=document.createElement("div");this.imgContainer.push({el:h,size:[p.width,p.height]}),h.classList.add(he.previewContainer),h.style.width=p.width+"px",h.style.height=p.height+"px",h.style.top=p.positionY+"px",h.style.left=p.positionX+"px",t.appendChild(h)}var u=document.createElement("div");u.classList.add(he.card),this.cardContainer=u,t.appendChild(u);var d=this.data.scene.avatarPlaceholder,v=document.createElement("div");v.classList.add(he.iframeContainer),v.style.width=d.width+"px",v.style.height=d.height+"px",v.style.top=d.positionY+"px",v.style.left=d.positionX+"px";var l=document.createElement("iframe");l.style.width="100%",l.style.height="100%",l.src=this.data.avatarAgent.url,l.setAttribute("id","va-unity"),l.style.border="none",l.style.opacity="0",v.appendChild(l),t.appendChild(v);var f=document.createElement("div");this.subtitleEL=f,f.classList.add(he.subtitle),t.appendChild(f);var g=document.createElement("div");this.subtitleSwitchEl=g,g.classList.add(he.subtitleSwitch);var S=document.createElement("label");S.classList.add(he.switchLabel);var m=document.createElement("input");m.type="checkbox",m.checked=!0,m.addEventListener("click",(function(t){t.target.checked?e.subtitleEL.style.display="block":e.subtitleEL.style.display="none"}));var C=document.createElement("div");C.classList.add(he.slider),C.classList.add(he.round),S.appendChild(m),S.appendChild(C),g.innerHTML=" <span>字幕</span>",g.appendChild(S);var y=this.createSpan();g.appendChild(y),t.appendChild(g),this.bindEl.appendChild(t)},e.prototype.canceled=function(){this.synthesizer.close()},e.prototype.createSpan=function(){var e=this,t=document.createElement("label");return t.innerHTML="<span type='en'>English</span> / <span type='zh'>中文</span>",t.addEventListener("click",(function(t){var i=t.target.getAttribute("type");i&&e.subtitleLanguage$.next(i)})),t},e}(),ve=i(8840),le=function(){function e(e,t,i){var r=this;this.bindEl=e,this.store=t,this.data=i,K.contentElement.subscribe((function(e){r.contentEl=e}))}return e.prototype.changeOpenStatus=function(){this.iframeEl&&(this.iframeEl.style.display=this.store.openStatus?"flex":"none",document.getElementById("de-chat-box").style.display="none")},e.prototype._renderClsoeTag=function(){var e=this,t=document.createElement("div");return t.classList.add(ve.previewClose),t.innerHTML='\n            <svg t="1603258937885" viewBox="0 0 1030 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3066" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><defs><style type="text/css"></style></defs><path d="M566.613333 512l279.893334-279.893333c13.653333-13.653333 13.653333-34.133333 0-47.786667-13.653333-13.653333-34.133333-13.653333-47.786667 0l-286.72 273.066667-273.066667-273.066667c-13.653333-13.653333-34.133333-13.653333-47.786666 0-13.653333 13.653333-13.653333 34.133333 0 47.786667l279.893333 279.893333-279.893333 279.893333c-13.653333 13.653333-13.653333 34.133333 0 47.786667 13.653333 13.653333 34.133333 13.653333 47.786666 0l279.893334-279.893333 279.893333 279.893333c13.653333 13.653333 34.133333 13.653333 47.786667 0 13.653333-13.653333 13.653333-34.133333 0-47.786667L566.613333 512z m0 0" p-id="3067" fill="#8a8a8a"></path></svg>\n        ',t.addEventListener("click",(function(){e.store.openStatus=!e.store.openStatus;var t=document.getElementById("va-unity");e.store.openStatus||(t.contentWindow.postMessage({type:"deactivate"},"*"),document.getElementById("de-chat-box").style.display="block",window.player.pause(),K.state.next("end"),setTimeout((function(){e.contentEl.innerHTML=""}),1e3))})),t},e.prototype._renderContent=function(){var e=document.createElement("div");return e.classList.add(ve.previewContent),K.contentElement.next(e),new de(e,this.data),e},e.prototype.init=function(){var e=document.createElement("div");return e.classList.add(ve.previewDiv),e.setAttribute("id","previewDiv"),e.appendChild(this._renderClsoeTag()),e.appendChild(this._renderContent()),this.iframeEl=e,this.bindEl.appendChild(e)},e}(),fe=function(){function e(){this.openFlag=!1,this.sessionId=""}return Object.defineProperty(e.prototype,"openStatus",{get:function(){return this.openFlag},set:function(e){this.openFlag=e,this.openStatusChange()},enumerable:!1,configurable:!0}),e}(),ge=function(){return(ge=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Se=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},me=function(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ce=i(8840),ye=function(){function e(e){var t=this;this.config=e,this.version="1.9.0",this.window=window,document.write('<link href="//amp.azure.net/libs/amp/latest/skins/amp-default/azuremediaplayer.min.css" rel="stylesheet">'),document.write('<script src= "//amp.azure.net/libs/amp/latest/azuremediaplayer.min.js"><\/script>'),console.log("正在初始化"),K.contentElement.subscribe((function(e){t.contentEl=e})),document.addEventListener("DOMContentLoaded",(function(){return Se(t,void 0,void 0,(function(){var e,t;return me(this,(function(i){switch(i.label){case 0:return e=this,[4,this.getScriptData(this.config.id)];case 1:return e.data=i.sent(),this.store=new fe,t=ge({},this.data.avatarAgent),this.preLoadAvatar(this.data.avatarAgent.url),this.render(t),[2]}}))}))})),K.state.subscribe((function(e){return Se(t,void 0,void 0,(function(){var t;return me(this,(function(i){switch(i.label){case 0:return"restart"!==e?[3,2]:[4,this.getScriptData(this.config.id)];case 1:t=i.sent(),new de(this.contentEl,t),i.label=2;case 2:return[2]}}))}))}))}return e.prototype.getScriptData=function(e){return Se(this,void 0,void 0,(function(){return me(this,(function(t){switch(t.label){case 0:return[4,(i=V+"/api/Script/"+e,H(void 0,void 0,void 0,(function(){var e;return q(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch(i,{method:"GET",headers:j}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.script}))];case 1:return[2,t.sent()];case 2:return e=t.sent(),alert("Bad Request"+e),[3,3];case 3:return[2]}}))})))];case 1:return[2,t.sent()]}var i}))}))},e.prototype.render=function(e){var t=this,i=document.createElement("div"),r=new Q(i,this.store,e),n=new le(i,this.store,this.data);r.init();var o=document.createElement("div");o.classList.add(Ce.deMask),this.store.openStatusChange=function(){n.iframeEl||n.init(),n.changeOpenStatus(),r.render(),o.style.display=t.store.openStatus?"block":"none"},this.el=i,o.style.display=this.store.openStatus?"block":"none",document.body.appendChild(o),document.body.appendChild(i)},e.prototype.open=function(){this.store.openStatus=!0},e.prototype.close=function(){this.store.openStatus=!1},e.prototype.preLoadAvatar=function(e){console.log(e)},e}();window.VirtualAnchor=ye})()})();
